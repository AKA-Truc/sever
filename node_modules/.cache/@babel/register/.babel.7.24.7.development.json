{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst app = express();\nconst {\n  connectDB\n} = require('./config/db');\nconst initRoute = require('./Routes/index');\nconst cors = require('cors');\nrequire('dotenv').config();\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: true\n}));\napp.use(cors());\nconnectDB();\ninitRoute(app);\napp.listen(process.env.PORT || 8080, () => {\n  console.log('Server running on port', process.env.PORT || 8080);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImNvbm5lY3REQiIsImluaXRSb3V0ZSIsImNvcnMiLCJjb25maWciLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuY29uc3QgeyBjb25uZWN0REIgfSA9IHJlcXVpcmUoJy4vY29uZmlnL2RiJyk7XHJcbmNvbnN0IGluaXRSb3V0ZSA9IHJlcXVpcmUoJy4vUm91dGVzL2luZGV4Jyk7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XHJcblxyXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcclxuXHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcclxuXHJcbmFwcC51c2UoY29ycygpKTtcclxuXHJcbmNvbm5lY3REQigpO1xyXG5cclxuaW5pdFJvdXRlKGFwcCk7XHJcblxyXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQgfHwgODA4MCwgKCkgPT4ge1xyXG5jb25zb2xlLmxvZygnU2VydmVyIHJ1bm5pbmcgb24gcG9ydCcsIHByb2Nlc3MuZW52LlBPUlQgfHwgODA4MCk7XHJcbn0pIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsR0FBRyxHQUFHRixPQUFPLENBQUMsQ0FBQztBQUNyQixNQUFNO0VBQUVHO0FBQVUsQ0FBQyxHQUFHRixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQzVDLE1BQU1HLFNBQVMsR0FBR0gsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQzNDLE1BQU1JLElBQUksR0FBR0osT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QkEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDSyxNQUFNLENBQUMsQ0FBQztBQUUxQkosR0FBRyxDQUFDSyxHQUFHLENBQUNQLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN2Qk4sR0FBRyxDQUFDSyxHQUFHLENBQUNQLE9BQU8sQ0FBQ1MsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDO0FBRS9DUixHQUFHLENBQUNLLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUVmRixTQUFTLENBQUMsQ0FBQztBQUVYQyxTQUFTLENBQUNGLEdBQUcsQ0FBQztBQUVkQSxHQUFHLENBQUNTLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksSUFBSSxJQUFJLEVBQUUsTUFBTTtFQUMzQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0JBQXdCLEVBQUVKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLElBQUksSUFBSSxDQUFDO0FBQy9ELENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","app","connectDB","initRoute","cors","config","use","json","urlencoded","extended","listen","process","env","PORT","console","log"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst app = express();\r\nconst { connectDB } = require('./config/db');\r\nconst initRoute = require('./Routes/index');\r\nconst cors = require('cors');\r\n\r\nrequire('dotenv').config();\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\n\r\napp.use(cors());\r\n\r\nconnectDB();\r\n\r\ninitRoute(app);\r\n\r\napp.listen(process.env.PORT || 8080, () => {\r\nconsole.log('Server running on port', process.env.PORT || 8080);\r\n})"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGF,OAAO,CAAC,CAAC;AACrB,MAAM;EAAEG;AAAU,CAAC,GAAGF,OAAO,CAAC,aAAa,CAAC;AAC5C,MAAMG,SAAS,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AAC3C,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAE5BA,OAAO,CAAC,QAAQ,CAAC,CAACK,MAAM,CAAC,CAAC;AAE1BJ,GAAG,CAACK,GAAG,CAACP,OAAO,CAACQ,IAAI,CAAC,CAAC,CAAC;AACvBN,GAAG,CAACK,GAAG,CAACP,OAAO,CAACS,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAE/CR,GAAG,CAACK,GAAG,CAACF,IAAI,CAAC,CAAC,CAAC;AAEfF,SAAS,CAAC,CAAC;AAEXC,SAAS,CAACF,GAAG,CAAC;AAEdA,GAAG,CAACS,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI,EAAE,MAAM;EAC3CC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEJ,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI,CAAC;AAC/D,CAAC,CAAC","ignoreList":[]}},"mtime":1718431659446},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\config\\\\db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const {\n  Sequelize\n} = require('sequelize');\nconst sequelize = new Sequelize('db_perfume', 'root', null, {\n  host: 'localhost',\n  dialect: 'mysql'\n});\nconst connectDB = async () => {\n  try {\n    await sequelize.authenticate();\n    console.log('MySQL connected...');\n  } catch (err) {\n    console.error('Unable to connect to the database:', err);\n    process.exit(1);\n  }\n};\nmodule.exports = {\n  sequelize,\n  connectDB\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiaG9zdCIsImRpYWxlY3QiLCJjb25uZWN0REIiLCJhdXRoZW50aWNhdGUiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3IiLCJwcm9jZXNzIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcY29uZmlnXFwiLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbmNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoJ2RiX3BlcmZ1bWUnLCAncm9vdCcsIG51bGwsIHtcclxuICBob3N0OiAnbG9jYWxob3N0JyxcclxuICBkaWFsZWN0OiAnbXlzcWwnLFxyXG59KTtcclxuXHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpO1xyXG4gICAgY29uc29sZS5sb2coJ015U1FMIGNvbm5lY3RlZC4uLicpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOicsIGVycik7XHJcbiAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHNlcXVlbGl6ZSwgY29ubmVjdERCIH07Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVUsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRTFDLE1BQU1DLFNBQVMsR0FBRyxJQUFJRixTQUFTLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7RUFDMURHLElBQUksRUFBRSxXQUFXO0VBQ2pCQyxPQUFPLEVBQUU7QUFDWCxDQUFDLENBQUM7QUFFRixNQUFNQyxTQUFTLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzVCLElBQUk7SUFDRixNQUFNSCxTQUFTLENBQUNJLFlBQVksQ0FBQyxDQUFDO0lBQzlCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztFQUNuQyxDQUFDLENBQUMsT0FBT0MsR0FBRyxFQUFFO0lBQ1pGLE9BQU8sQ0FBQ0csS0FBSyxDQUFDLG9DQUFvQyxFQUFFRCxHQUFHLENBQUM7SUFDeERFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQjtBQUNGLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRVosU0FBUztFQUFFRztBQUFVLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Sequelize","require","sequelize","host","dialect","connectDB","authenticate","console","log","err","error","process","exit","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\config\\","sources":["db.js"],"sourcesContent":["const { Sequelize } = require('sequelize');\r\n\r\nconst sequelize = new Sequelize('db_perfume', 'root', null, {\r\n  host: 'localhost',\r\n  dialect: 'mysql',\r\n});\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    await sequelize.authenticate();\r\n    console.log('MySQL connected...');\r\n  } catch (err) {\r\n    console.error('Unable to connect to the database:', err);\r\n    process.exit(1);\r\n  }\r\n};\r\n\r\nmodule.exports = { sequelize, connectDB };"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAE1C,MAAMC,SAAS,GAAG,IAAIF,SAAS,CAAC,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE;EAC1DG,IAAI,EAAE,WAAW;EACjBC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMH,SAAS,CAACI,YAAY,CAAC,CAAC;IAC9BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACnC,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZF,OAAO,CAACG,KAAK,CAAC,oCAAoC,EAAED,GAAG,CAAC;IACxDE,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;EACjB;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEZ,SAAS;EAAEG;AAAU,CAAC","ignoreList":[]}},"mtime":1718264288787},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const productRouter = require('./product_routes');\nconst categoryRouter = require('./category_routes');\nconst invoiceRouter = require('./invoice_routes');\nconst customerRouter = require('./customer_routes');\nconst employeeRouter = require('./emloyee_routes');\nconst orderRouter = require('./order_routes');\nconst userRouter = require('./user_routes');\nconst initRoute = app => {\n  app.use('/api/product', productRouter);\n  app.use('/api/category', categoryRouter);\n  app.use('/api/invoice', invoiceRouter);\n  app.use('/api/customer', customerRouter);\n  app.use('/api/employee', employeeRouter);\n  app.use('/api/order', orderRouter);\n  app.use('/api/user', userRouter);\n};\nmodule.exports = initRoute;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwicmVxdWlyZSIsImNhdGVnb3J5Um91dGVyIiwiaW52b2ljZVJvdXRlciIsImN1c3RvbWVyUm91dGVyIiwiZW1wbG95ZWVSb3V0ZXIiLCJvcmRlclJvdXRlciIsInVzZXJSb3V0ZXIiLCJpbml0Um91dGUiLCJhcHAiLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXHJvdXRlc1xcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm9kdWN0Um91dGVyID0gcmVxdWlyZSgnLi9wcm9kdWN0X3JvdXRlcycpO1xyXG5jb25zdCBjYXRlZ29yeVJvdXRlciA9IHJlcXVpcmUoJy4vY2F0ZWdvcnlfcm91dGVzJyk7XHJcbmNvbnN0IGludm9pY2VSb3V0ZXIgPSByZXF1aXJlKCcuL2ludm9pY2Vfcm91dGVzJyk7XHJcbmNvbnN0IGN1c3RvbWVyUm91dGVyID0gcmVxdWlyZSgnLi9jdXN0b21lcl9yb3V0ZXMnKTtcclxuY29uc3QgZW1wbG95ZWVSb3V0ZXIgPSByZXF1aXJlKCcuL2VtbG95ZWVfcm91dGVzJyk7XHJcbmNvbnN0IG9yZGVyUm91dGVyID0gcmVxdWlyZSgnLi9vcmRlcl9yb3V0ZXMnKTtcclxuY29uc3QgdXNlclJvdXRlciA9IHJlcXVpcmUoJy4vdXNlcl9yb3V0ZXMnKVxyXG5cclxuY29uc3QgaW5pdFJvdXRlID0gKGFwcCkgPT4ge1xyXG4gICAgYXBwLnVzZSgnL2FwaS9wcm9kdWN0JywgcHJvZHVjdFJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2NhdGVnb3J5JywgY2F0ZWdvcnlSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS9pbnZvaWNlJywgaW52b2ljZVJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2N1c3RvbWVyJywgY3VzdG9tZXJSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS9lbXBsb3llZScsIGVtcGxveWVlUm91dGVyKTtcclxuICAgIGFwcC51c2UoJy9hcGkvb3JkZXInLCBvcmRlclJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL3VzZXInLCB1c2VyUm91dGVyKVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRSb3V0ZTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGFBQWEsR0FBR0MsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELE1BQU1DLGNBQWMsR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ25ELE1BQU1FLGFBQWEsR0FBR0YsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELE1BQU1HLGNBQWMsR0FBR0gsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ25ELE1BQU1JLGNBQWMsR0FBR0osT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2xELE1BQU1LLFdBQVcsR0FBR0wsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQzdDLE1BQU1NLFVBQVUsR0FBR04sT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUUzQyxNQUFNTyxTQUFTLEdBQUlDLEdBQUcsSUFBSztFQUN2QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsY0FBYyxFQUFFVixhQUFhLENBQUM7RUFDdENTLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRVIsY0FBYyxDQUFDO0VBQ3hDTyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxjQUFjLEVBQUVQLGFBQWEsQ0FBQztFQUN0Q00sR0FBRyxDQUFDQyxHQUFHLENBQUMsZUFBZSxFQUFFTixjQUFjLENBQUM7RUFDeENLLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRUwsY0FBYyxDQUFDO0VBQ3hDSSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVKLFdBQVcsQ0FBQztFQUNsQ0csR0FBRyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFSCxVQUFVLENBQUM7QUFDcEMsQ0FBQztBQUVESSxNQUFNLENBQUNDLE9BQU8sR0FBR0osU0FBUyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["productRouter","require","categoryRouter","invoiceRouter","customerRouter","employeeRouter","orderRouter","userRouter","initRoute","app","use","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["index.js"],"sourcesContent":["const productRouter = require('./product_routes');\r\nconst categoryRouter = require('./category_routes');\r\nconst invoiceRouter = require('./invoice_routes');\r\nconst customerRouter = require('./customer_routes');\r\nconst employeeRouter = require('./emloyee_routes');\r\nconst orderRouter = require('./order_routes');\r\nconst userRouter = require('./user_routes')\r\n\r\nconst initRoute = (app) => {\r\n    app.use('/api/product', productRouter);\r\n    app.use('/api/category', categoryRouter);\r\n    app.use('/api/invoice', invoiceRouter);\r\n    app.use('/api/customer', customerRouter);\r\n    app.use('/api/employee', employeeRouter);\r\n    app.use('/api/order', orderRouter);\r\n    app.use('/api/user', userRouter)\r\n}\r\n\r\nmodule.exports = initRoute;"],"mappings":"AAAA,MAAMA,aAAa,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMC,cAAc,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAME,aAAa,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMG,cAAc,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAMI,cAAc,GAAGJ,OAAO,CAAC,kBAAkB,CAAC;AAClD,MAAMK,WAAW,GAAGL,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAMM,UAAU,GAAGN,OAAO,CAAC,eAAe,CAAC;AAE3C,MAAMO,SAAS,GAAIC,GAAG,IAAK;EACvBA,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEV,aAAa,CAAC;EACtCS,GAAG,CAACC,GAAG,CAAC,eAAe,EAAER,cAAc,CAAC;EACxCO,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEP,aAAa,CAAC;EACtCM,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEN,cAAc,CAAC;EACxCK,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEL,cAAc,CAAC;EACxCI,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEJ,WAAW,CAAC;EAClCG,GAAG,CAACC,GAAG,CAAC,WAAW,EAAEH,UAAU,CAAC;AACpC,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGJ,SAAS","ignoreList":[]}},"mtime":1718425950734},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\product_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createProduct,\n  getAllProduct,\n  getProduct,\n  updateProduct,\n  deleteProduct,\n  uploadImageProduct\n} = require('../controllers/product_controller');\nconst router = express.Router();\nrouter.post('/Products', createProduct);\nrouter.get('/Products', getAllProduct);\nrouter.get('/Products/:id', getProduct);\nrouter.put('/Products/:id', updateProduct);\nrouter.delete('/Products/:id', deleteProduct);\nrouter.put('/Products/:id', uploadImageProduct);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZVByb2R1Y3QiLCJnZXRBbGxQcm9kdWN0IiwiZ2V0UHJvZHVjdCIsInVwZGF0ZVByb2R1Y3QiLCJkZWxldGVQcm9kdWN0IiwidXBsb2FkSW1hZ2VQcm9kdWN0Iiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbInByb2R1Y3Rfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlUHJvZHVjdCwgZ2V0QWxsUHJvZHVjdCwgZ2V0UHJvZHVjdCwgdXBkYXRlUHJvZHVjdCwgZGVsZXRlUHJvZHVjdCwgdXBsb2FkSW1hZ2VQcm9kdWN0IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9wcm9kdWN0X2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvUHJvZHVjdHMnLCBjcmVhdGVQcm9kdWN0KTtcclxucm91dGVyLmdldCgnL1Byb2R1Y3RzJywgZ2V0QWxsUHJvZHVjdCk7XHJcbnJvdXRlci5nZXQoJy9Qcm9kdWN0cy86aWQnLCBnZXRQcm9kdWN0KTtcclxucm91dGVyLnB1dCgnL1Byb2R1Y3RzLzppZCcsIHVwZGF0ZVByb2R1Y3QpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvUHJvZHVjdHMvOmlkJywgZGVsZXRlUHJvZHVjdCk7XHJcbnJvdXRlci5wdXQoJy9Qcm9kdWN0cy86aWQnLHVwbG9hZEltYWdlUHJvZHVjdCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxhQUFhO0VBQUVDLGFBQWE7RUFBRUMsVUFBVTtFQUFFQyxhQUFhO0VBQUVDLGFBQWE7RUFBRUM7QUFBbUIsQ0FBQyxHQUFHTixPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDbkosTUFBTU8sTUFBTSxHQUFHUixPQUFPLENBQUNTLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxXQUFXLEVBQUVSLGFBQWEsQ0FBQztBQUN2Q00sTUFBTSxDQUFDRyxHQUFHLENBQUMsV0FBVyxFQUFFUixhQUFhLENBQUM7QUFDdENLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGVBQWUsRUFBRVAsVUFBVSxDQUFDO0FBQ3ZDSSxNQUFNLENBQUNJLEdBQUcsQ0FBQyxlQUFlLEVBQUVQLGFBQWEsQ0FBQztBQUMxQ0csTUFBTSxDQUFDSyxNQUFNLENBQUMsZUFBZSxFQUFFUCxhQUFhLENBQUM7QUFDN0NFLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGVBQWUsRUFBQ0wsa0JBQWtCLENBQUM7QUFFOUNPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createProduct","getAllProduct","getProduct","updateProduct","deleteProduct","uploadImageProduct","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["product_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createProduct, getAllProduct, getProduct, updateProduct, deleteProduct, uploadImageProduct } = require('../controllers/product_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Products', createProduct);\r\nrouter.get('/Products', getAllProduct);\r\nrouter.get('/Products/:id', getProduct);\r\nrouter.put('/Products/:id', updateProduct);\r\nrouter.delete('/Products/:id', deleteProduct);\r\nrouter.put('/Products/:id',uploadImageProduct);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC,aAAa;EAAEC;AAAmB,CAAC,GAAGN,OAAO,CAAC,mCAAmC,CAAC;AACnJ,MAAMO,MAAM,GAAGR,OAAO,CAACS,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,WAAW,EAAER,aAAa,CAAC;AACvCM,MAAM,CAACG,GAAG,CAAC,WAAW,EAAER,aAAa,CAAC;AACtCK,MAAM,CAACG,GAAG,CAAC,eAAe,EAAEP,UAAU,CAAC;AACvCI,MAAM,CAACI,GAAG,CAAC,eAAe,EAAEP,aAAa,CAAC;AAC1CG,MAAM,CAACK,MAAM,CAAC,eAAe,EAAEP,aAAa,CAAC;AAC7CE,MAAM,CAACI,GAAG,CAAC,eAAe,EAACL,kBAAkB,CAAC;AAE9CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121543862},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\product_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const {\n  Op\n} = require('sequelize');\nconst Product = require('../Models/product');\nconst Category = require('../Models/category');\nconst asyncHandler = require('express-async-handler');\nconst createProduct = asyncHandler(async (req, res) => {\n  try {\n    const productData = req.body;\n    const newProduct = await Product.create(productData);\n    return res.status(201).json({\n      success: true,\n      createdProduct: newProduct\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    // Tìm sản phẩm theo ID và bao gồm danh mục\n    const product = await Product.findOne({\n      where: {\n        ProductID: pid\n      },\n      include: [{\n        model: Category,\n        as: 'category'\n      }]\n    });\n    if (product) {\n      res.status(200).json({\n        success: true,\n        productData: product\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        productData: \"Không tìm thấy sản phẩm này\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst updateProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    const [updated] = await Product.update(req.body, {\n      where: {\n        ProductID: pid\n      }\n    });\n    if (updated) {\n      const updatedProduct = await Product.findByPk(pid);\n      res.status(200).json({\n        success: true,\n        updatedProduct: updatedProduct\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        message: \"Không tìm thấy sản phẩm hoặc không có gì được cập nhật\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error.message\n    });\n  }\n});\nconst deleteProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    const deleted = await Product.destroy({\n      where: {\n        ProductID: pid\n      }\n    });\n    if (deleted) {\n      res.status(200).json({\n        success: true,\n        message: \"Sản phẩm đã được xoá\"\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        message: \"Không tìm thấy sản phẩm hoặc không có gì được xoá\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error.message\n    });\n  }\n});\nconst getAllProduct = asyncHandler(async (req, res) => {\n  try {\n    const queryOptions = {};\n    if (req.query.Name) {\n      queryOptions.Name = {\n        [Op.iLike]: `%${req.query.Name}%`\n      };\n    }\n    const products = await Product.findAll({\n      where: queryOptions,\n      include: [{\n        model: Category,\n        as: 'category'\n      }]\n    });\n    res.status(200).json({\n      success: true,\n      products\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst uploadImageProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    if (!req.files || req.files.length === 0) {\n      throw new Error(\"Không có ảnh được tải lên\");\n    }\n    const product = await Product.findByPk(pid);\n    if (!product) {\n      throw new Error(\"Không tìm thấy sản phẩm\");\n    }\n    const imagePaths = req.files.map(el => el.path);\n    await product.update({\n      Image: [...product.Image, ...imagePaths]\n    });\n    return res.status(200).json({\n      success: true,\n      message: \"Ảnh đã được tải lên thành công\",\n      product\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nmodule.exports = {\n  createProduct,\n  getProduct,\n  updateProduct,\n  deleteProduct,\n  getAllProduct,\n  uploadImageProduct\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcCIsInJlcXVpcmUiLCJQcm9kdWN0IiwiQ2F0ZWdvcnkiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVQcm9kdWN0IiwicmVxIiwicmVzIiwicHJvZHVjdERhdGEiLCJib2R5IiwibmV3UHJvZHVjdCIsImNyZWF0ZSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiY3JlYXRlZFByb2R1Y3QiLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRQcm9kdWN0IiwicGlkIiwicGFyYW1zIiwicHJvZHVjdCIsImZpbmRPbmUiLCJ3aGVyZSIsIlByb2R1Y3RJRCIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwidXBkYXRlUHJvZHVjdCIsInVwZGF0ZWQiLCJ1cGRhdGUiLCJ1cGRhdGVkUHJvZHVjdCIsImZpbmRCeVBrIiwiZGVsZXRlUHJvZHVjdCIsImRlbGV0ZWQiLCJkZXN0cm95IiwiZ2V0QWxsUHJvZHVjdCIsInF1ZXJ5T3B0aW9ucyIsInF1ZXJ5IiwiTmFtZSIsImlMaWtlIiwicHJvZHVjdHMiLCJmaW5kQWxsIiwidXBsb2FkSW1hZ2VQcm9kdWN0IiwiZmlsZXMiLCJsZW5ndGgiLCJFcnJvciIsImltYWdlUGF0aHMiLCJtYXAiLCJlbCIsInBhdGgiLCJJbWFnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsicHJvZHVjdF9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgT3AgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xyXG5jb25zdCBQcm9kdWN0ID0gcmVxdWlyZSgnLi4vTW9kZWxzL3Byb2R1Y3QnKTtcclxuY29uc3QgQ2F0ZWdvcnkgPSByZXF1aXJlKCcuLi9Nb2RlbHMvY2F0ZWdvcnknKTtcclxuY29uc3QgYXN5bmNIYW5kbGVyID0gcmVxdWlyZSgnZXhwcmVzcy1hc3luYy1oYW5kbGVyJyk7XHJcblxyXG5jb25zdCBjcmVhdGVQcm9kdWN0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgICAgIGNvbnN0IG5ld1Byb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmNyZWF0ZShwcm9kdWN0RGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgY3JlYXRlZFByb2R1Y3Q6IG5ld1Byb2R1Y3RcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBnZXRQcm9kdWN0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBwaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFTDrG0gc+G6o24gcGjhuqltIHRoZW8gSUQgdsOgIGJhbyBn4buTbSBkYW5oIG3hu6VjXHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IFByb2R1Y3RJRDogcGlkIH0sXHJcbiAgICAgICAgICAgIGluY2x1ZGU6IFt7IG1vZGVsOiBDYXRlZ29yeSwgYXM6ICdjYXRlZ29yeScgfV1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvZHVjdCkge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdERhdGE6IHByb2R1Y3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0RGF0YTogXCJLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltIG7DoHlcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGRhdGVQcm9kdWN0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBwaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IFt1cGRhdGVkXSA9IGF3YWl0IFByb2R1Y3QudXBkYXRlKHJlcS5ib2R5LCB7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IFByb2R1Y3RJRDogcGlkIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodXBkYXRlZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5UGsocGlkKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRQcm9kdWN0OiB1cGRhdGVkUHJvZHVjdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IHPhuqNuIHBo4bqpbSBob+G6t2Mga2jDtG5nIGPDsyBnw6wgxJHGsOG7o2MgY+G6rXAgbmjhuq10XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZVByb2R1Y3QgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZCA9IGF3YWl0IFByb2R1Y3QuZGVzdHJveSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IFByb2R1Y3RJRDogcGlkIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJT4bqjbiBwaOG6qW0gxJHDoyDEkcaw4bujYyB4b8OhXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIktow7RuZyB0w6xtIHRo4bqleSBz4bqjbiBwaOG6qW0gaG/hurdjIGtow7RuZyBjw7MgZ8OsIMSRxrDhu6NjIHhvw6FcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0QWxsUHJvZHVjdCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zID0ge307XHJcblxyXG4gICAgICAgIGlmIChyZXEucXVlcnkuTmFtZSkge1xyXG4gICAgICAgICAgICBxdWVyeU9wdGlvbnMuTmFtZSA9IHsgW09wLmlMaWtlXTogYCUke3JlcS5xdWVyeS5OYW1lfSVgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZEFsbCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiBxdWVyeU9wdGlvbnMsXHJcbiAgICAgICAgICAgIGluY2x1ZGU6IFt7IG1vZGVsOiBDYXRlZ29yeSwgYXM6ICdjYXRlZ29yeScgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBwcm9kdWN0c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkSW1hZ2VQcm9kdWN0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBwaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAoIXJlcS5maWxlcyB8fCByZXEuZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIktow7RuZyBjw7Mg4bqjbmggxJHGsOG7o2MgdOG6o2kgbMOqblwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeVBrKHBpZCk7XHJcblxyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VQYXRocyA9IHJlcS5maWxlcy5tYXAoZWwgPT4gZWwucGF0aCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHByb2R1Y3QudXBkYXRlKHtcclxuICAgICAgICAgICAgSW1hZ2U6IFsuLi5wcm9kdWN0LkltYWdlLCAuLi5pbWFnZVBhdGhzXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIuG6om5oIMSRw6MgxJHGsOG7o2MgdOG6o2kgbMOqbiB0aMOgbmggY8O0bmdcIixcclxuICAgICAgICAgICAgcHJvZHVjdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlUHJvZHVjdCxcclxuICAgIGdldFByb2R1Y3QsXHJcbiAgICB1cGRhdGVQcm9kdWN0LFxyXG4gICAgZGVsZXRlUHJvZHVjdCxcclxuICAgIGdldEFsbFByb2R1Y3QsXHJcbiAgICB1cGxvYWRJbWFnZVByb2R1Y3RcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQUcsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ25DLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU1FLFFBQVEsR0FBR0YsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQzlDLE1BQU1HLFlBQVksR0FBR0gsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1JLGFBQWEsR0FBR0QsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25ELElBQUk7SUFDQSxNQUFNQyxXQUFXLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUM1QixNQUFNQyxVQUFVLEdBQUcsTUFBTVIsT0FBTyxDQUFDUyxNQUFNLENBQUNILFdBQVcsQ0FBQztJQUNwRCxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxPQUFPLEVBQUUsSUFBSTtNQUNiQyxjQUFjLEVBQUVMO0lBQ3BCLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQyxPQUFPTSxLQUFLLEVBQUU7SUFDWixPQUFPVCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxPQUFPLEVBQUUsS0FBSztNQUNkRyxPQUFPLEVBQUVELEtBQUssQ0FBQ0M7SUFDbkIsQ0FB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","map":{"version":3,"names":["Op","require","Product","Category","asyncHandler","createProduct","req","res","productData","body","newProduct","create","status","json","success","createdProduct","error","message","getProduct","pid","params","product","findOne","where","ProductID","include","model","as","updateProduct","updated","update","updatedProduct","findByPk","deleteProduct","deleted","destroy","getAllProduct","queryOptions","query","Name","iLike","products","findAll","uploadImageProduct","files","length","Error","imagePaths","map","el","path","Image","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["product_controller.js"],"sourcesContent":["const { Op } = require('sequelize');\r\nconst Product = require('../Models/product');\r\nconst Category = require('../Models/category');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createProduct = asyncHandler(async (req, res) => {\r\n    try {\r\n        const productData = req.body;\r\n        const newProduct = await Product.create(productData);\r\n        return res.status(201).json({\r\n            success: true,\r\n            createdProduct: newProduct\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        // Tìm sản phẩm theo ID và bao gồm danh mục\r\n        const product = await Product.findOne({\r\n            where: { ProductID: pid },\r\n            include: [{ model: Category, as: 'category' }]\r\n        });\r\n        if (product) {\r\n            res.status(200).json({\r\n                success: true,\r\n                productData: product\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                productData: \"Không tìm thấy sản phẩm này\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst updateProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        const [updated] = await Product.update(req.body, {\r\n            where: { ProductID: pid }\r\n        });\r\n        if (updated) {\r\n            const updatedProduct = await Product.findByPk(pid);\r\n            res.status(200).json({\r\n                success: true,\r\n                updatedProduct: updatedProduct\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                message: \"Không tìm thấy sản phẩm hoặc không có gì được cập nhật\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst deleteProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        const deleted = await Product.destroy({\r\n            where: { ProductID: pid }\r\n        });\r\n        if (deleted) {\r\n            res.status(200).json({\r\n                success: true,\r\n                message: \"Sản phẩm đã được xoá\"\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                message: \"Không tìm thấy sản phẩm hoặc không có gì được xoá\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getAllProduct = asyncHandler(async (req, res) => {\r\n    try {\r\n        const queryOptions = {};\r\n\r\n        if (req.query.Name) {\r\n            queryOptions.Name = { [Op.iLike]: `%${req.query.Name}%` };\r\n        }\r\n\r\n        const products = await Product.findAll({\r\n            where: queryOptions,\r\n            include: [{ model: Category, as: 'category' }]\r\n        });\r\n\r\n        res.status(200).json({\r\n            success: true,\r\n            products\r\n        });\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst uploadImageProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n\r\n    try {\r\n        if (!req.files || req.files.length === 0) {\r\n            throw new Error(\"Không có ảnh được tải lên\");\r\n        }\r\n\r\n        const product = await Product.findByPk(pid);\r\n\r\n        if (!product) {\r\n            throw new Error(\"Không tìm thấy sản phẩm\");\r\n        }\r\n\r\n        const imagePaths = req.files.map(el => el.path);\r\n\r\n        await product.update({\r\n            Image: [...product.Image, ...imagePaths]\r\n        });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: \"Ảnh đã được tải lên thành công\",\r\n            product\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nmodule.exports = {\r\n    createProduct,\r\n    getProduct,\r\n    updateProduct,\r\n    deleteProduct,\r\n    getAllProduct,\r\n    uploadImageProduct\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718121386000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\product.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Product extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Product.belongsTo(models.Category, {\n        foreignKey: 'CategoryID'\n      });\n    }\n  }\n  Product.init({\n    CategoryID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      references: {\n        model: 'Categories',\n        key: 'CategoryID'\n      }\n    },\n    Name: DataTypes.STRING,\n    Brand: DataTypes.STRING,\n    Description: DataTypes.STRING,\n    Volume: DataTypes.INTEGER,\n    Price: DataTypes.INTEGER,\n    image: DataTypes.TEXT,\n    Inventory: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Product'\n  });\n  return Product;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiUHJvZHVjdCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIkNhdGVnb3J5IiwiZm9yZWlnbktleSIsImluaXQiLCJDYXRlZ29yeUlEIiwidHlwZSIsIklOVEVHRVIiLCJhbGxvd051bGwiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJOYW1lIiwiU1RSSU5HIiwiQnJhbmQiLCJEZXNjcmlwdGlvbiIsIlZvbHVtZSIsIlByaWNlIiwiaW1hZ2UiLCJURVhUIiwiSW52ZW50b3J5IiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJwcm9kdWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBQcm9kdWN0IGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcclxuICAgICAgICAgICAgUHJvZHVjdC5iZWxvbmdzVG8obW9kZWxzLkNhdGVnb3J5LCB7IGZvcmVpZ25LZXk6ICdDYXRlZ29yeUlEJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBQcm9kdWN0LmluaXQoe1xyXG4gICAgICAgIENhdGVnb3J5SUQ6IHtcclxuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcclxuICAgICAgICAgICAgICAgIG1vZGVsOiAnQ2F0ZWdvcmllcycsXHJcbiAgICAgICAgICAgICAgICBrZXk6ICdDYXRlZ29yeUlEJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBOYW1lOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICAgIEJyYW5kOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICAgIERlc2NyaXB0aW9uOiBEYXRhVHlwZXMuU1RSSU5HLCBcclxuICAgICAgICBWb2x1bWU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgIFByaWNlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICBpbWFnZTogRGF0YVR5cGVzLlRFWFQsXHJcbiAgICAgICAgSW52ZW50b3J5OiBEYXRhVHlwZXMuSU5URUdFUlxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdQcm9kdWN0JyxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFByb2R1Y3Q7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLE9BQU8sU0FBU04sS0FBSyxDQUFDO0lBQ3hCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsT0FBTyxDQUFDRyxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsUUFBUSxFQUFFO1FBQUVDLFVBQVUsRUFBRTtNQUFhLENBQUMsQ0FBQztJQUNwRTtFQUNKO0VBQ0FMLE9BQU8sQ0FBQ00sSUFBSSxDQUFDO0lBQ1RDLFVBQVUsRUFBRTtNQUNSQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztNQUN2QkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFVBQVUsRUFBRTtRQUNSQyxLQUFLLEVBQUUsWUFBWTtRQUNuQkMsR0FBRyxFQUFFO01BQ1Q7SUFDSixDQUFDO0lBQ0RDLElBQUksRUFBRWYsU0FBUyxDQUFDZ0IsTUFBTTtJQUN0QkMsS0FBSyxFQUFFakIsU0FBUyxDQUFDZ0IsTUFBTTtJQUN2QkUsV0FBVyxFQUFFbEIsU0FBUyxDQUFDZ0IsTUFBTTtJQUM3QkcsTUFBTSxFQUFFbkIsU0FBUyxDQUFDVSxPQUFPO0lBQ3pCVSxLQUFLLEVBQUVwQixTQUFTLENBQUNVLE9BQU87SUFDeEJXLEtBQUssRUFBRXJCLFNBQVMsQ0FBQ3NCLElBQUk7SUFDckJDLFNBQVMsRUFBRXZCLFNBQVMsQ0FBQ1U7RUFDekIsQ0FBQyxFQUFFO0lBQ0NYLFNBQVM7SUFDVHlCLFNBQVMsRUFBRTtFQUNmLENBQUMsQ0FBQztFQUNGLE9BQU92QixPQUFPO0FBQ2xCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Product","associate","models","belongsTo","Category","foreignKey","init","CategoryID","type","INTEGER","allowNull","references","model","key","Name","STRING","Brand","Description","Volume","Price","image","TEXT","Inventory","modelName"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["product.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Product extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Product.belongsTo(models.Category, { foreignKey: 'CategoryID' });\r\n        }\r\n    }\r\n    Product.init({\r\n        CategoryID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            references: {\r\n                model: 'Categories',\r\n                key: 'CategoryID'\r\n            }\r\n        },\r\n        Name: DataTypes.STRING,\r\n        Brand: DataTypes.STRING,\r\n        Description: DataTypes.STRING, \r\n        Volume: DataTypes.INTEGER,\r\n        Price: DataTypes.INTEGER,\r\n        image: DataTypes.TEXT,\r\n        Inventory: DataTypes.INTEGER\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Product',\r\n    });\r\n    return Product;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,OAAO,CAACG,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QAAEC,UAAU,EAAE;MAAa,CAAC,CAAC;IACpE;EACJ;EACAL,OAAO,CAACM,IAAI,CAAC;IACTC,UAAU,EAAE;MACRC,IAAI,EAAET,SAAS,CAACU,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;QACRC,KAAK,EAAE,YAAY;QACnBC,GAAG,EAAE;MACT;IACJ,CAAC;IACDC,IAAI,EAAEf,SAAS,CAACgB,MAAM;IACtBC,KAAK,EAAEjB,SAAS,CAACgB,MAAM;IACvBE,WAAW,EAAElB,SAAS,CAACgB,MAAM;IAC7BG,MAAM,EAAEnB,SAAS,CAACU,OAAO;IACzBU,KAAK,EAAEpB,SAAS,CAACU,OAAO;IACxBW,KAAK,EAAErB,SAAS,CAACsB,IAAI;IACrBC,SAAS,EAAEvB,SAAS,CAACU;EACzB,CAAC,EAAE;IACCX,SAAS;IACTyB,SAAS,EAAE;EACf,CAAC,CAAC;EACF,OAAOvB,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718268912909},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Category extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Category.hasMany(models.Product, {\n        foreignKey: 'CategoryID'\n      });\n    }\n  }\n  Category.init({\n    CategoryID: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      allowNull: false,\n      autoIncrement: true\n    },\n    Name: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Category',\n    tableName: 'Categories',\n    timestamps: false\n  });\n  return Category;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ2F0ZWdvcnkiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNNYW55IiwiUHJvZHVjdCIsImZvcmVpZ25LZXkiLCJpbml0IiwiQ2F0ZWdvcnlJRCIsInR5cGUiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsImF1dG9JbmNyZW1lbnQiLCJOYW1lIiwiU1RSSU5HIiwibW9kZWxOYW1lIiwidGFibGVOYW1lIiwidGltZXN0YW1wcyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsiY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcclxuICAgIGNsYXNzIENhdGVnb3J5IGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcclxuICAgICAgICAgICAgQ2F0ZWdvcnkuaGFzTWFueShtb2RlbHMuUHJvZHVjdCwgeyBmb3JlaWduS2V5OiAnQ2F0ZWdvcnlJRCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQ2F0ZWdvcnkuaW5pdCh7XHJcbiAgICAgICAgQ2F0ZWdvcnlJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTmFtZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgIH0sIHtcclxuICAgICAgICBzZXF1ZWxpemUsXHJcbiAgICAgICAgbW9kZWxOYW1lOiAnQ2F0ZWdvcnknLFxyXG4gICAgICAgIHRhYmxlTmFtZTogJ0NhdGVnb3JpZXMnLFxyXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ2F0ZWdvcnk7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLFFBQVEsU0FBU04sS0FBSyxDQUFDO0lBQ3pCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsUUFBUSxDQUFDRyxPQUFPLENBQUNELE1BQU0sQ0FBQ0UsT0FBTyxFQUFFO1FBQUVDLFVBQVUsRUFBRTtNQUFhLENBQUMsQ0FBQztJQUNsRTtFQUNKO0VBQ0FMLFFBQVEsQ0FBQ00sSUFBSSxDQUFDO0lBQ1ZDLFVBQVUsRUFBRTtNQUNSQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztNQUN2QkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxhQUFhLEVBQUU7SUFDbkIsQ0FBQztJQUNEQyxJQUFJLEVBQUVkLFNBQVMsQ0FBQ2U7RUFDcEIsQ0FBQyxFQUFFO0lBQ0NoQixTQUFTO0lBQ1RpQixTQUFTLEVBQUUsVUFBVTtJQUNyQkMsU0FBUyxFQUFFLFlBQVk7SUFDdkJDLFVBQVUsRUFBRTtFQUNoQixDQUFDLENBQUM7RUFDRixPQUFPakIsUUFBUTtBQUNuQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Category","associate","models","hasMany","Product","foreignKey","init","CategoryID","type","INTEGER","primaryKey","allowNull","autoIncrement","Name","STRING","modelName","tableName","timestamps"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["category.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Category extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Category.hasMany(models.Product, { foreignKey: 'CategoryID' });\r\n        }\r\n    }\r\n    Category.init({\r\n        CategoryID: {\r\n            type: DataTypes.INTEGER,\r\n            primaryKey: true,\r\n            allowNull: false,\r\n            autoIncrement: true\r\n        },\r\n        Name: DataTypes.STRING,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Category',\r\n        tableName: 'Categories',\r\n        timestamps: false,\r\n    });\r\n    return Category;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,OAAO,CAACD,MAAM,CAACE,OAAO,EAAE;QAAEC,UAAU,EAAE;MAAa,CAAC,CAAC;IAClE;EACJ;EACAL,QAAQ,CAACM,IAAI,CAAC;IACVC,UAAU,EAAE;MACRC,IAAI,EAAET,SAAS,CAACU,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE;IACnB,CAAC;IACDC,IAAI,EAAEd,SAAS,CAACe;EACpB,CAAC,EAAE;IACChB,SAAS;IACTiB,SAAS,EAAE,UAAU;IACrBC,SAAS,EAAE,YAAY;IACvBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOjB,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718438442772},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\category_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCategory,\n  getAllCategory,\n  getCategory,\n  updateCategory,\n  deleteCategory\n} = require('../controllers/category_controller');\nconst router = express.Router();\nrouter.post('/Categorys', createCategory);\nrouter.get('/Categorys', getAllCategory);\nrouter.get('/Categorys/:id', getCategory);\nrouter.put('/Categorys/:id', updateCategory);\nrouter.delete('/Categorys/:id', deleteCategory);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUNhdGVnb3J5IiwiZ2V0QWxsQ2F0ZWdvcnkiLCJnZXRDYXRlZ29yeSIsInVwZGF0ZUNhdGVnb3J5IiwiZGVsZXRlQ2F0ZWdvcnkiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiY2F0ZWdvcnlfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ2F0ZWdvcnksIGdldEFsbENhdGVnb3J5LCBnZXRDYXRlZ29yeSwgdXBkYXRlQ2F0ZWdvcnksIGRlbGV0ZUNhdGVnb3J5IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jYXRlZ29yeV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0NhdGVnb3J5cycsIGNyZWF0ZUNhdGVnb3J5KTtcclxucm91dGVyLmdldCgnL0NhdGVnb3J5cycsIGdldEFsbENhdGVnb3J5KTtcclxucm91dGVyLmdldCgnL0NhdGVnb3J5cy86aWQnLCBnZXRDYXRlZ29yeSk7XHJcbnJvdXRlci5wdXQoJy9DYXRlZ29yeXMvOmlkJywgdXBkYXRlQ2F0ZWdvcnkpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvQ2F0ZWdvcnlzLzppZCcsIGRlbGV0ZUNhdGVnb3J5KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLGNBQWM7RUFBRUMsY0FBYztFQUFFQyxXQUFXO0VBQUVDLGNBQWM7RUFBRUM7QUFBZSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUNySSxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFlBQVksRUFBRVAsY0FBYyxDQUFDO0FBQ3pDSyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxZQUFZLEVBQUVQLGNBQWMsQ0FBQztBQUN4Q0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsZ0JBQWdCLEVBQUVOLFdBQVcsQ0FBQztBQUN6Q0csTUFBTSxDQUFDSSxHQUFHLENBQUMsZ0JBQWdCLEVBQUVOLGNBQWMsQ0FBQztBQUM1Q0UsTUFBTSxDQUFDSyxNQUFNLENBQUMsZ0JBQWdCLEVBQUVOLGNBQWMsQ0FBQztBQUUvQ08sTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","createCategory","getAllCategory","getCategory","updateCategory","deleteCategory","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["category_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCategory, getAllCategory, getCategory, updateCategory, deleteCategory } = require('../controllers/category_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Categorys', createCategory);\r\nrouter.get('/Categorys', getAllCategory);\r\nrouter.get('/Categorys/:id', getCategory);\r\nrouter.put('/Categorys/:id', updateCategory);\r\nrouter.delete('/Categorys/:id', deleteCategory);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,WAAW,CAAC;AACzCG,MAAM,CAACI,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAE/CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718413250251},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\category_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const db = require('../Models');\nconst Product = require('../Models/product');\nconst Category = require('../Models/category');\nconst asyncHandler = require('express-async-handler');\nconst createCategory = asyncHandler(async (req, res) => {\n  const {\n    Name\n  } = req.body;\n  try {\n    if (!Name) {\n      return res.status(400).json({\n        success: false,\n        message: \"Tên danh mục sản phẩm không được để trống\"\n      });\n    }\n\n    // Kiểm tra xem danh mục đã tồn tại hay chưa\n    const categoryExist = await db.Category.findOne({\n      where: {\n        Name\n      },\n      attributes: ['CategoryID', 'Name']\n    });\n    if (categoryExist) {\n      return res.status(400).json({\n        success: false,\n        message: \"Danh mục sản phẩm đã tồn tại\"\n      });\n    }\n\n    // Tạo mới danh mục sản phẩm\n    const newCategory = await db.Category.create({\n      Name\n    });\n    return res.status(201).json({\n      success: true,\n      newCategory\n    });\n  } catch (error) {\n    console.error(\"Error in createCategory:\", error);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã xảy ra lỗi khi tạo danh mục sản phẩm\"\n    });\n  }\n});\nconst getCategory = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  const category = await db.Category.findByPk(uid);\n  if (category) {\n    return res.status(200).json({\n      success: true,\n      category: category\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Danh mục không tồn tại\"\n    });\n  }\n});\nconst updateCategory = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  const category = await db.Category.findByPk(uid);\n  if (!category) {\n    return res.status(404).json({\n      success: false,\n      message: \"Danh mục không tồn tại\"\n    });\n  }\n  await db.category.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedCategory: category\n  });\n});\nconst deleteCategory = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  const category = await db.Category.findByPk(uid);\n\n  // Ktra xem danh mục có tồn tại hay không\n  if (!category) {\n    return res.status(404).json({\n      success: false,\n      message: \"Danh mục không tồn tại\"\n    });\n  }\n  const productsInCategory = await db.Product.findAll({\n    where: {\n      categoryId: uid\n    }\n  });\n  if (productsInCategory.length > 0) {\n    return res.status(400).json({\n      success: false,\n      message: \"Không thể xóa danh mục này vì có sản phẩm trong danh mục\"\n    });\n  }\n  await db.category.destroy();\n  return res.status(200).json({\n    success: true,\n    message: `Đã xoá danh mục ${category.Name}`\n  });\n});\nconst getAllCategory = asyncHandler(async (req, res) => {\n  //Lấy all loại hàng\n  const listCategory = await db.Category.findAll();\n  for (let category of listCategory) {\n    const productCount = await db.Product.count({\n      where: {\n        Category: category.categoryId\n      }\n    });\n    category.productCount = productCount;\n  }\n\n  // Trả về danh sách loại hàng và số lượng sản phẩm cho mỗi loại hàng\n  return res.status(200).json({\n    success: true,\n    listCategory: listCategory\n  });\n});\nmodule.exports = {\n  createCategory,\n  getAllCategory,\n  getCategory,\n  updateCategory,\n  deleteCategory\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJQcm9kdWN0IiwiQ2F0ZWdvcnkiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVDYXRlZ29yeSIsInJlcSIsInJlcyIsIk5hbWUiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY2F0ZWdvcnlFeGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsImF0dHJpYnV0ZXMiLCJuZXdDYXRlZ29yeSIsImNyZWF0ZSIsImVycm9yIiwiY29uc29sZSIsImdldENhdGVnb3J5IiwidWlkIiwicGFyYW1zIiwiY2F0ZWdvcnkiLCJmaW5kQnlQayIsInVwZGF0ZUNhdGVnb3J5IiwidXBkYXRlIiwidXBkYXRlZENhdGVnb3J5IiwiZGVsZXRlQ2F0ZWdvcnkiLCJwcm9kdWN0c0luQ2F0ZWdvcnkiLCJmaW5kQWxsIiwiY2F0ZWdvcnlJZCIsImxlbmd0aCIsImRlc3Ryb3kiLCJnZXRBbGxDYXRlZ29yeSIsImxpc3RDYXRlZ29yeSIsInByb2R1Y3RDb3VudCIsImNvdW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJjYXRlZ29yeV9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IFByb2R1Y3QgPSByZXF1aXJlKCcuLi9Nb2RlbHMvcHJvZHVjdCcpO1xyXG5jb25zdCBDYXRlZ29yeSA9IHJlcXVpcmUoJy4uL01vZGVscy9jYXRlZ29yeScpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICghTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlTDqm4gZGFuaCBt4bulYyBz4bqjbiBwaOG6qW0ga2jDtG5nIMSRxrDhu6NjIMSR4buDIHRy4buRbmdcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEtp4buDbSB0cmEgeGVtIGRhbmggbeG7pWMgxJHDoyB04buTbiB04bqhaSBoYXkgY2jGsGFcclxuICAgICAgICBjb25zdCBjYXRlZ29yeUV4aXN0ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuZmluZE9uZSh7IHdoZXJlOiB7IE5hbWUgfSwgYXR0cmlidXRlczogWydDYXRlZ29yeUlEJywgJ05hbWUnXSB9KTtcclxuXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5RXhpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEYW5oIG3hu6VjIHPhuqNuIHBo4bqpbSDEkcOjIHThu5NuIHThuqFpXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBU4bqhbyBt4bubaSBkYW5oIG3hu6VjIHPhuqNuIHBo4bqpbVxyXG4gICAgICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuY3JlYXRlKHsgTmFtZSB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbmV3Q2F0ZWdvcnlcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGNyZWF0ZUNhdGVnb3J5OlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwixJDDoyB44bqjeSByYSBs4buXaSBraGkgdOG6oW8gZGFuaCBt4bulYyBz4bqjbiBwaOG6qW1cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGdldENhdGVnb3J5ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB1aWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSBhd2FpdCBkYi5DYXRlZ29yeS5maW5kQnlQayh1aWQpO1xyXG5cclxuICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJEYW5oIG3hu6VjIGtow7RuZyB04buTbiB04bqhaVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlQ2F0ZWdvcnkgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCBjYXRlZ29yeSA9IGF3YWl0IGRiLkNhdGVnb3J5LmZpbmRCeVBrKHVpZCk7XHJcblxyXG4gICAgaWYgKCFjYXRlZ29yeSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkRhbmggbeG7pWMga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBkYi5jYXRlZ29yeS51cGRhdGUocmVxLmJvZHkpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1cGRhdGVkQ2F0ZWdvcnk6IGNhdGVnb3J5XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVDYXRlZ29yeSA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdWlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuZmluZEJ5UGsodWlkKTtcclxuXHJcbiAgICAvLyBLdHJhIHhlbSBkYW5oIG3hu6VjIGPDsyB04buTbiB04bqhaSBoYXkga2jDtG5nXHJcbiAgICBpZiAoIWNhdGVnb3J5KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiRGFuaCBt4bulYyBraMO0bmcgdOG7k24gdOG6oWlcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcm9kdWN0c0luQ2F0ZWdvcnkgPSBhd2FpdCBkYi5Qcm9kdWN0LmZpbmRBbGwoeyB3aGVyZTogeyBjYXRlZ29yeUlkOiB1aWQgfSB9KTtcclxuICAgIGlmIChwcm9kdWN0c0luQ2F0ZWdvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIktow7RuZyB0aOG7gyB4w7NhIGRhbmggbeG7pWMgbsOgeSB2w6wgY8OzIHPhuqNuIHBo4bqpbSB0cm9uZyBkYW5oIG3hu6VjXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGIuY2F0ZWdvcnkuZGVzdHJveSgpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiBgxJDDoyB4b8OhIGRhbmggbeG7pWMgJHtjYXRlZ29yeS5OYW1lfWBcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGdldEFsbENhdGVnb3J5ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy9M4bqleSBhbGwgbG/huqFpIGjDoG5nXHJcbiAgICBjb25zdCBsaXN0Q2F0ZWdvcnkgPSBhd2FpdCBkYi5DYXRlZ29yeS5maW5kQWxsKCk7XHJcblxyXG4gICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgbGlzdENhdGVnb3J5KSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdENvdW50ID0gYXdhaXQgZGIuUHJvZHVjdC5jb3VudCh7IHdoZXJlOiB7IENhdGVnb3J5OiBjYXRlZ29yeS5jYXRlZ29yeUlkfSB9KTtcclxuICAgICAgICBjYXRlZ29yeS5wcm9kdWN0Q291bnQgPSBwcm9kdWN0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHLhuqMgduG7gSBkYW5oIHPDoWNoIGxv4bqhaSBow6BuZyB2w6Agc+G7kSBsxrDhu6NuZyBz4bqjbiBwaOG6qW0gY2hvIG3hu5dpIGxv4bqhaSBow6BuZ1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGxpc3RDYXRlZ29yeTogbGlzdENhdGVnb3J5XHJcbiAgICB9KTtcclxufSk7XHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlQ2F0ZWdvcnksXHJcbiAgICBnZXRBbGxDYXRlZ29yeSxcclxuICAgIGdldENhdGVnb3J5LFxyXG4gICAgdXBkYXRlQ2F0ZWdvcnksXHJcbiAgICBkZWxldGVDYXRlZ29yeVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMvQixNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUM1QyxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUM5QyxNQUFNRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUVyRCxNQUFNSSxjQUFjLEdBQUdELFlBQVksQ0FBQyxPQUFPRSxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNwRCxNQUFNO0lBQUVDO0VBQUssQ0FBQyxHQUFHRixHQUFHLENBQUNHLElBQUk7RUFFekIsSUFBSTtJQUNBLElBQUksQ0FBQ0QsSUFBSSxFQUFFO01BQ1AsT0FBT0QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUN4QkMsT0FBTyxFQUFFLEtBQUs7UUFDZEMsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ047O0lBRUE7SUFDQSxNQUFNQyxhQUFhLEdBQUcsTUFBTWQsRUFBRSxDQUFDRyxRQUFRLENBQUNZLE9BQU8sQ0FBQztNQUFFQyxLQUFLLEVBQUU7UUFBRVI7TUFBSyxDQUFDO01BQUVTLFVBQVUsRUFBRSxDQUFDLFlBQVksRUFBRSxNQUFNO0lBQUUsQ0FBQyxDQUFDO0lBRXhHLElBQUlILGFBQWEsRUFBRTtNQUNmLE9BQU9QLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDeEJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLE9BQU8sRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNOOztJQUVBO0lBQ0EsTUFBTUssV0FBVyxHQUFHLE1BQU1s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","map":{"version":3,"names":["db","require","Product","Category","asyncHandler","createCategory","req","res","Name","body","status","json","success","message","categoryExist","findOne","where","attributes","newCategory","create","error","console","getCategory","uid","params","category","findByPk","updateCategory","update","updatedCategory","deleteCategory","productsInCategory","findAll","categoryId","length","destroy","getAllCategory","listCategory","productCount","count","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["category_controller.js"],"sourcesContent":["const db = require('../Models');\r\nconst Product = require('../Models/product');\r\nconst Category = require('../Models/category');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createCategory = asyncHandler(async (req, res) => {\r\n    const { Name } = req.body;\r\n\r\n    try {\r\n        if (!Name) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: \"Tên danh mục sản phẩm không được để trống\"\r\n            });\r\n        }\r\n\r\n        // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n        const categoryExist = await db.Category.findOne({ where: { Name }, attributes: ['CategoryID', 'Name'] });\r\n\r\n        if (categoryExist) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: \"Danh mục sản phẩm đã tồn tại\"\r\n            });\r\n        }\r\n\r\n        // Tạo mới danh mục sản phẩm\r\n        const newCategory = await db.Category.create({ Name });\r\n\r\n        return res.status(201).json({\r\n            success: true,\r\n            newCategory\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Error in createCategory:\", error);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã xảy ra lỗi khi tạo danh mục sản phẩm\"\r\n        });\r\n    }\r\n});\r\n\r\nconst getCategory = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    const category = await db.Category.findByPk(uid);\r\n\r\n    if (category) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            category: category\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Danh mục không tồn tại\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateCategory = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    const category = await db.Category.findByPk(uid);\r\n\r\n    if (!category) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Danh mục không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await db.category.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedCategory: category\r\n    });\r\n});\r\n\r\nconst deleteCategory = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    const category = await db.Category.findByPk(uid);\r\n\r\n    // Ktra xem danh mục có tồn tại hay không\r\n    if (!category) {\r\n        return res.status(404).json({ success: false, message: \"Danh mục không tồn tại\" });\r\n    }\r\n\r\n    const productsInCategory = await db.Product.findAll({ where: { categoryId: uid } });\r\n    if (productsInCategory.length > 0) {\r\n        return res.status(400).json({ success: false, message: \"Không thể xóa danh mục này vì có sản phẩm trong danh mục\" });\r\n    }\r\n\r\n    await db.category.destroy();\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: `Đã xoá danh mục ${category.Name}`\r\n    });\r\n});\r\n\r\nconst getAllCategory = asyncHandler(async (req, res) => {\r\n    //Lấy all loại hàng\r\n    const listCategory = await db.Category.findAll();\r\n\r\n    for (let category of listCategory) {\r\n        const productCount = await db.Product.count({ where: { Category: category.categoryId} });\r\n        category.productCount = productCount;\r\n    }\r\n\r\n    // Trả về danh sách loại hàng và số lượng sản phẩm cho mỗi loại hàng\r\n    return res.status(200).json({\r\n        success: true,\r\n        listCategory: listCategory\r\n    });\r\n});\r\nmodule.exports = {\r\n    createCategory,\r\n    getAllCategory,\r\n    getCategory,\r\n    updateCategory,\r\n    deleteCategory\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718440581492},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\invoice_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createInvoice,\n  getAllInvoice,\n  getInvoice,\n  updateInvoice,\n  deleteInvoice\n} = require('../controllers/invoice_controller');\nconst router = express.Router();\nrouter.post('/Invoices', createInvoice);\nrouter.get('/Invoices', getAllInvoice);\nrouter.get('/Invoices/:id', getInvoice);\nrouter.put('/Invoices/:id', updateInvoice);\nrouter.delete('/Invoices/:id', deleteInvoice);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUludm9pY2UiLCJnZXRBbGxJbnZvaWNlIiwiZ2V0SW52b2ljZSIsInVwZGF0ZUludm9pY2UiLCJkZWxldGVJbnZvaWNlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbImludm9pY2Vfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlSW52b2ljZSwgZ2V0QWxsSW52b2ljZSwgZ2V0SW52b2ljZSwgdXBkYXRlSW52b2ljZSwgZGVsZXRlSW52b2ljZSB9ID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvaW52b2ljZV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0ludm9pY2VzJywgY3JlYXRlSW52b2ljZSk7XHJcbnJvdXRlci5nZXQoJy9JbnZvaWNlcycsIGdldEFsbEludm9pY2UpO1xyXG5yb3V0ZXIuZ2V0KCcvSW52b2ljZXMvOmlkJywgZ2V0SW52b2ljZSk7XHJcbnJvdXRlci5wdXQoJy9JbnZvaWNlcy86aWQnLCB1cGRhdGVJbnZvaWNlKTtcclxucm91dGVyLmRlbGV0ZSgnL0ludm9pY2VzLzppZCcsIGRlbGV0ZUludm9pY2UpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsYUFBYTtFQUFFQyxhQUFhO0VBQUVDLFVBQVU7RUFBRUMsYUFBYTtFQUFFQztBQUFjLENBQUMsR0FBR0wsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQy9ILE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsV0FBVyxFQUFFUCxhQUFhLENBQUM7QUFDdkNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFdBQVcsRUFBRVAsYUFBYSxDQUFDO0FBQ3RDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxlQUFlLEVBQUVOLFVBQVUsQ0FBQztBQUN2Q0csTUFBTSxDQUFDSSxHQUFHLENBQUMsZUFBZSxFQUFFTixhQUFhLENBQUM7QUFDMUNFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLGVBQWUsRUFBRU4sYUFBYSxDQUFDO0FBRTdDTyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createInvoice","getAllInvoice","getInvoice","updateInvoice","deleteInvoice","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["invoice_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createInvoice, getAllInvoice, getInvoice, updateInvoice, deleteInvoice } = require('../controllers/invoice_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Invoices', createInvoice);\r\nrouter.get('/Invoices', getAllInvoice);\r\nrouter.get('/Invoices/:id', getInvoice);\r\nrouter.put('/Invoices/:id', updateInvoice);\r\nrouter.delete('/Invoices/:id', deleteInvoice);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,mCAAmC,CAAC;AAC/H,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,WAAW,EAAEP,aAAa,CAAC;AACvCK,MAAM,CAACG,GAAG,CAAC,WAAW,EAAEP,aAAa,CAAC;AACtCI,MAAM,CAACG,GAAG,CAAC,eAAe,EAAEN,UAAU,CAAC;AACvCG,MAAM,CAACI,GAAG,CAAC,eAAe,EAAEN,aAAa,CAAC;AAC1CE,MAAM,CAACK,MAAM,CAAC,eAAe,EAAEN,aAAa,CAAC;AAE7CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718162934968},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\invoice_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Invoice = require('../Models/invoice');\nconst InvoiceDetail = require('../Models/invoicedetail');\nconst asyncHandler = require('express-async-handler');\nconst createInvoice = asyncHandler(async (req, res) => {\n  const {\n    invoiceData,\n    invoiceDetailData\n  } = req.body;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await Invoice.create(invoiceData, {\n      transaction: t\n    });\n\n    // Tạo các chi tiết hóa đơn\n    for (const item of invoiceDetailData) {\n      await InvoiceDetail.create({\n        InvoiceID: invoice.InvoiceID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n    }\n    await t.commit();\n    res.status(201).json(invoice);\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst getInvoice = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const invoice = await Invoice.findByPk(id, {\n      include: [InvoiceDetail]\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n    res.status(200).json(invoice);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst getAllInvoice = asyncHandler(async (req, res) => {\n  try {\n    const invoices = await Invoice.findAll({\n      include: [InvoiceDetail]\n    });\n    res.status(200).json(invoices);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst updateInvoice = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    invoiceData,\n    invoiceDetailData\n  } = req.body;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await Invoice.findByPk(id, {\n      transaction: t\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n    await invoice.update(invoiceData, {\n      transaction: t\n    });\n\n    // Xóa các chi tiết hóa đơn cũ\n    await InvoiceDetail.destroy({\n      where: {\n        InvoiceID: id\n      },\n      transaction: t\n    });\n\n    // Tạo các chi tiết hóa đơn mới\n    for (const item of invoiceDetailData) {\n      await InvoiceDetail.create({\n        InvoiceID: invoice.InvoiceID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n    }\n\n    // Commit transaction\n    await t.commit();\n    res.status(200).json(invoice);\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst deleteInvoice = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await Invoice.findByPk(id, {\n      transaction: t\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n\n    // Xóa các chi tiết hóa đơn\n    await InvoiceDetail.destroy({\n      where: {\n        InvoiceID: id\n      },\n      transaction: t\n    });\n\n    // Xóa hóa đơn\n    await invoice.destroy({\n      transaction: t\n    });\n\n    // Commit transaction\n    await t.commit();\n    res.status(200).json({\n      message: 'Invoice deleted successfully'\n    });\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nmodule.exports = {\n  createInvoice,\n  getInvoice,\n  getAllInvoice,\n  updateInvoice,\n  deleteInvoice\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbnZvaWNlIiwicmVxdWlyZSIsIkludm9pY2VEZXRhaWwiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVJbnZvaWNlIiwicmVxIiwicmVzIiwiaW52b2ljZURhdGEiLCJpbnZvaWNlRGV0YWlsRGF0YSIsImJvZHkiLCJ0Iiwic2VxdWVsaXplIiwidHJhbnNhY3Rpb24iLCJpbnZvaWNlIiwiY3JlYXRlIiwiaXRlbSIsIkludm9pY2VJRCIsIlByb2R1Y3RJRCIsIlF1YW50aXR5IiwiY29tbWl0Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicm9sbGJhY2siLCJtZXNzYWdlIiwiZ2V0SW52b2ljZSIsImlkIiwicGFyYW1zIiwiZmluZEJ5UGsiLCJpbmNsdWRlIiwiZ2V0QWxsSW52b2ljZSIsImludm9pY2VzIiwiZmluZEFsbCIsInVwZGF0ZUludm9pY2UiLCJ1cGRhdGUiLCJkZXN0cm95Iiwid2hlcmUiLCJkZWxldGVJbnZvaWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJpbnZvaWNlX2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgSW52b2ljZSA9IHJlcXVpcmUoJy4uL01vZGVscy9pbnZvaWNlJyk7XHJcbmNvbnN0IEludm9pY2VEZXRhaWwgPSByZXF1aXJlKCcuLi9Nb2RlbHMvaW52b2ljZWRldGFpbCcpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUludm9pY2UgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGludm9pY2VEYXRhLCBpbnZvaWNlRGV0YWlsRGF0YSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgY29uc3QgdCA9IGF3YWl0IHNlcXVlbGl6ZS50cmFuc2FjdGlvbigpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgSW52b2ljZS5jcmVhdGUoaW52b2ljZURhdGEsIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcblxyXG4gICAgICAgIC8vIFThuqFvIGPDoWMgY2hpIHRp4bq/dCBow7NhIMSRxqFuXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGludm9pY2VEZXRhaWxEYXRhKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IEludm9pY2VEZXRhaWwuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIEludm9pY2VJRDogaW52b2ljZS5JbnZvaWNlSUQsXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SUQ6IGl0ZW0uUHJvZHVjdElELFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IGl0ZW0uUXVhbnRpdHksXHJcbiAgICAgICAgICAgIH0sIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0LmNvbW1pdCgpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGludm9pY2UpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBu4bq/dSBjw7MgbOG7l2lcclxuICAgICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBnZXRJbnZvaWNlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IEludm9pY2UuZmluZEJ5UGsoaWQsIHtcclxuICAgICAgICAgICAgaW5jbHVkZTogW0ludm9pY2VEZXRhaWxdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCFpbnZvaWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSW52b2ljZSBub3QgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihpbnZvaWNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBnZXRBbGxJbnZvaWNlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBpbnZvaWNlcyA9IGF3YWl0IEludm9pY2UuZmluZEFsbCh7XHJcbiAgICAgICAgICAgIGluY2x1ZGU6IFtJbnZvaWNlRGV0YWlsXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGludm9pY2VzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGRhdGVJbnZvaWNlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgaW52b2ljZURhdGEsIGludm9pY2VEZXRhaWxEYXRhIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHQgPSBhd2FpdCBzZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBJbnZvaWNlLmZpbmRCeVBrKGlkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIGlmICghaW52b2ljZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0ludm9pY2Ugbm90IGZvdW5kJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IGludm9pY2UudXBkYXRlKGludm9pY2VEYXRhLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG5cclxuICAgICAgICAvLyBYw7NhIGPDoWMgY2hpIHRp4bq/dCBow7NhIMSRxqFuIGPFqVxyXG4gICAgICAgIGF3YWl0IEludm9pY2VEZXRhaWwuZGVzdHJveSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IEludm9pY2VJRDogaWQgfSxcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVOG6oW8gY8OhYyBjaGkgdGnhur90IGjDs2EgxJHGoW4gbeG7m2lcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW52b2ljZURldGFpbERhdGEpIHtcclxuICAgICAgICAgICAgYXdhaXQgSW52b2ljZURldGFpbC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgSW52b2ljZUlEOiBpbnZvaWNlLkludm9pY2VJRCxcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJRDogaXRlbS5Qcm9kdWN0SUQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogaXRlbS5RdWFudGl0eSxcclxuICAgICAgICAgICAgfSwgeyB0cmFuc2FjdGlvbjogdCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxyXG4gICAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGludm9pY2UpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBu4bq/dSBjw7MgbOG7l2lcclxuICAgICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVJbnZvaWNlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHQgPSBhd2FpdCBzZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBJbnZvaWNlLmZpbmRCeVBrKGlkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIGlmICghaW52b2ljZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0ludm9pY2Ugbm90IGZvdW5kJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFjDs2EgY8OhYyBjaGkgdGnhur90IGjDs2EgxJHGoW5cclxuICAgICAgICBhd2FpdCBJbnZvaWNlRGV0YWlsLmRlc3Ryb3koe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBJbnZvaWNlSUQ6IGlkIH0sXHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFjDs2EgaMOzYSDEkcahblxyXG4gICAgICAgIGF3YWl0IGludm9pY2UuZGVzdHJveSh7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG5cclxuICAgICAgICAvLyBDb21taXQgdHJhbnNhY3Rpb25cclxuICAgICAgICBhd2FpdCB0LmNvbW1pdCgpO1xyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZvaWNlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgLy8gUm9sbGJhY2sgdHJhbnNhY3Rpb24gbuG6v3UgY8OzIGzhu5dpXHJcbiAgICAgICAgYXdhaXQgdC5yb2xsYmFjaygpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBjcmVhdGVJbnZvaWNlLFxyXG4gICAgZ2V0SW52b2ljZSxcclxuICAgIGdldEFsbEludm9pY2UsXHJcbiAgICB1cGRhdGVJbnZvaWNlLFxyXG4gICAgZGVsZXRlSW52b2ljZVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU1DLGFBQWEsR0FBR0QsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3hELE1BQU1FLFlBQVksR0FBR0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1HLGFBQWEsR0FBR0QsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25ELE1BQU07SUFBRUMsV0FBVztJQUFFQztFQUFrQixDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksSUFBSTtFQUVuRCxNQUFNQyxDQUFDLEdBQUcsTUFBTUMsU0FBUyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUN2QyxJQUFJO0lBQ0EsTUFBTUMsT0FBTyxHQUFHLE1BQU1iLE9BQU8sQ0FBQ2MsTUFBTSxDQUFDUCxXQUFXLEVBQUU7TUFBRUssV0FBVyxFQUFFRjtJQUFFLENBQUMsQ0FBQzs7SUFFckU7SUFDQSxLQUFLLE1BQU1LLElBQUksSUFBSVAsaUJBQWlCLEVBQUU7TUFDbEMsTUFBTU4sYUFBYSxDQUFDWSxNQUFNLENBQUM7UUFDdkJFLFNBQVMsRUFBRUgsT0FBTyxDQUFDRyxTQUFTO1FBQzVCQyxTQUFTLEVBQUVGLElBQUksQ0FBQ0UsU0FBUztRQUN6QkMsUUFBUSxFQUFFSCxJQUFJLENB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","map":{"version":3,"names":["Invoice","require","InvoiceDetail","asyncHandler","createInvoice","req","res","invoiceData","invoiceDetailData","body","t","sequelize","transaction","invoice","create","item","InvoiceID","ProductID","Quantity","commit","status","json","error","rollback","message","getInvoice","id","params","findByPk","include","getAllInvoice","invoices","findAll","updateInvoice","update","destroy","where","deleteInvoice","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["invoice_controller.js"],"sourcesContent":["const Invoice = require('../Models/invoice');\r\nconst InvoiceDetail = require('../Models/invoicedetail');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createInvoice = asyncHandler(async (req, res) => {\r\n    const { invoiceData, invoiceDetailData } = req.body;\r\n\r\n    const t = await sequelize.transaction();\r\n    try {\r\n        const invoice = await Invoice.create(invoiceData, { transaction: t });\r\n\r\n        // Tạo các chi tiết hóa đơn\r\n        for (const item of invoiceDetailData) {\r\n            await InvoiceDetail.create({\r\n                InvoiceID: invoice.InvoiceID,\r\n                ProductID: item.ProductID,\r\n                Quantity: item.Quantity,\r\n            }, { transaction: t });\r\n        }\r\n\r\n        await t.commit();\r\n        res.status(201).json(invoice);\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getInvoice = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    try {\r\n        const invoice = await Invoice.findByPk(id, {\r\n            include: [InvoiceDetail]\r\n        });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n        res.status(200).json(invoice);\r\n    } catch (error) {\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getAllInvoice = asyncHandler(async (req, res) => {\r\n    try {\r\n        const invoices = await Invoice.findAll({\r\n            include: [InvoiceDetail]\r\n        });\r\n        res.status(200).json(invoices);\r\n    } catch (error) {\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst updateInvoice = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    const { invoiceData, invoiceDetailData } = req.body;\r\n    const t = await sequelize.transaction();\r\n\r\n    try {\r\n        const invoice = await Invoice.findByPk(id, { transaction: t });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n\r\n        await invoice.update(invoiceData, { transaction: t });\r\n\r\n        // Xóa các chi tiết hóa đơn cũ\r\n        await InvoiceDetail.destroy({\r\n            where: { InvoiceID: id },\r\n            transaction: t\r\n        });\r\n\r\n        // Tạo các chi tiết hóa đơn mới\r\n        for (const item of invoiceDetailData) {\r\n            await InvoiceDetail.create({\r\n                InvoiceID: invoice.InvoiceID,\r\n                ProductID: item.ProductID,\r\n                Quantity: item.Quantity,\r\n            }, { transaction: t });\r\n        }\r\n\r\n        // Commit transaction\r\n        await t.commit();\r\n\r\n        res.status(200).json(invoice);\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst deleteInvoice = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    const t = await sequelize.transaction();\r\n\r\n    try {\r\n        const invoice = await Invoice.findByPk(id, { transaction: t });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n\r\n        // Xóa các chi tiết hóa đơn\r\n        await InvoiceDetail.destroy({\r\n            where: { InvoiceID: id },\r\n            transaction: t\r\n        });\r\n\r\n        // Xóa hóa đơn\r\n        await invoice.destroy({ transaction: t });\r\n\r\n        // Commit transaction\r\n        await t.commit();\r\n\r\n        res.status(200).json({ message: 'Invoice deleted successfully' });\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nmodule.exports = {\r\n    createInvoice,\r\n    getInvoice,\r\n    getAllInvoice,\r\n    updateInvoice,\r\n    deleteInvoice\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718162848000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\invoice.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Invoice extends Model {\n    static associate(models) {\n      // Define the relationship between Invoice and Order\n      Invoice.belongsTo(models.Order, {\n        foreignKey: 'OrderID',\n        as: 'Order'\n      });\n    }\n  }\n  Invoice.init({\n    InvoiceDate: DataTypes.DATE,\n    Totalcost: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Invoice',\n    tableName: 'invoices',\n    timestamps: false\n  });\n  return Invoice;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiSW52b2ljZSIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIk9yZGVyIiwiZm9yZWlnbktleSIsImFzIiwiaW5pdCIsIkludm9pY2VEYXRlIiwiREFURSIsIlRvdGFsY29zdCIsIklOVEVHRVIiLCJtb2RlbE5hbWUiLCJ0YWJsZU5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJpbnZvaWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gICAgY2xhc3MgSW52b2ljZSBleHRlbmRzIE1vZGVsIHtcclxuICAgICAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIEludm9pY2UgYW5kIE9yZGVyXHJcbiAgICAgICAgICAgIEludm9pY2UuYmVsb25nc1RvKG1vZGVscy5PcmRlciwge1xyXG4gICAgICAgICAgICAgICAgZm9yZWlnbktleTogJ09yZGVySUQnLFxyXG4gICAgICAgICAgICAgICAgYXM6ICdPcmRlcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgSW52b2ljZS5pbml0KHtcclxuICAgICAgICBJbnZvaWNlRGF0ZTogRGF0YVR5cGVzLkRBVEUsXHJcbiAgICAgICAgVG90YWxjb3N0OiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgIH0sIHtcclxuICAgICAgICBzZXF1ZWxpemUsXHJcbiAgICAgICAgbW9kZWxOYW1lOiAnSW52b2ljZScsXHJcbiAgICAgICAgdGFibGVOYW1lOiAnaW52b2ljZXMnLFxyXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gSW52b2ljZTtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsT0FBTyxTQUFTTixLQUFLLENBQUM7SUFDeEIsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3JCO01BQ0FGLE9BQU8sQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNFLEtBQUssRUFBRTtRQUM1QkMsVUFBVSxFQUFFLFNBQVM7UUFDckJDLEVBQUUsRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNOO0VBQ0o7RUFDQU4sT0FBTyxDQUFDTyxJQUFJLENBQUM7SUFDVEMsV0FBVyxFQUFFVCxTQUFTLENBQUNVLElBQUk7SUFDM0JDLFNBQVMsRUFBRVgsU0FBUyxDQUFDWTtFQUN6QixDQUFDLEVBQUU7SUFDQ2IsU0FBUztJQUNUYyxTQUFTLEVBQUUsU0FBUztJQUNwQkMsU0FBUyxFQUFFLFVBQVU7SUFDckJDLFVBQVUsRUFBRTtFQUNoQixDQUFDLENBQUM7RUFDRixPQUFPZCxPQUFPO0FBQ2xCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Invoice","associate","models","belongsTo","Order","foreignKey","as","init","InvoiceDate","DATE","Totalcost","INTEGER","modelName","tableName","timestamps"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["invoice.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Invoice extends Model {\r\n        static associate(models) {\r\n            // Define the relationship between Invoice and Order\r\n            Invoice.belongsTo(models.Order, {\r\n                foreignKey: 'OrderID',\r\n                as: 'Order'\r\n            });\r\n        }\r\n    }\r\n    Invoice.init({\r\n        InvoiceDate: DataTypes.DATE,\r\n        Totalcost: DataTypes.INTEGER,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Invoice',\r\n        tableName: 'invoices',\r\n        timestamps: false,\r\n    });\r\n    return Invoice;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,OAAO,CAACG,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAC5BC,UAAU,EAAE,SAAS;QACrBC,EAAE,EAAE;MACR,CAAC,CAAC;IACN;EACJ;EACAN,OAAO,CAACO,IAAI,CAAC;IACTC,WAAW,EAAET,SAAS,CAACU,IAAI;IAC3BC,SAAS,EAAEX,SAAS,CAACY;EACzB,CAAC,EAAE;IACCb,SAAS;IACTc,SAAS,EAAE,SAAS;IACpBC,SAAS,EAAE,UAAU;IACrBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOd,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718269855095},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Order extends Model {\n    static associate(models) {\n      // Define the relationship between Order and Invoice\n      Order.hasOne(models.Invoice, {\n        foreignKey: 'OrderID',\n        as: 'Invoice'\n      });\n\n      // Define the relationship between Order and Customer (nếu cần)\n      Order.belongsTo(models.Customer, {\n        foreignKey: 'CustomerID',\n        as: 'Customer'\n      });\n    }\n  }\n  Order.init({\n    OrderID: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      autoIncrement: true\n    },\n    CustomerID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    OrderDate: {\n      type: DataTypes.DATE,\n      allowNull: false\n    },\n    Status: {\n      type: DataTypes.BOOLEAN,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'Order'\n  });\n  return Order;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiT3JkZXIiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNPbmUiLCJJbnZvaWNlIiwiZm9yZWlnbktleSIsImFzIiwiYmVsb25nc1RvIiwiQ3VzdG9tZXIiLCJpbml0IiwiT3JkZXJJRCIsInR5cGUiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImF1dG9JbmNyZW1lbnQiLCJDdXN0b21lcklEIiwiYWxsb3dOdWxsIiwiT3JkZXJEYXRlIiwiREFURSIsIlN0YXR1cyIsIkJPT0xFQU4iLCJtb2RlbE5hbWUiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbIm9yZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gICAgY2xhc3MgT3JkZXIgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBPcmRlciBhbmQgSW52b2ljZVxyXG4gICAgICAgICAgICBPcmRlci5oYXNPbmUobW9kZWxzLkludm9pY2UsIHtcclxuICAgICAgICAgICAgICAgIGZvcmVpZ25LZXk6ICdPcmRlcklEJyxcclxuICAgICAgICAgICAgICAgIGFzOiAnSW52b2ljZSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIE9yZGVyIGFuZCBDdXN0b21lciAobuG6v3UgY+G6p24pXHJcbiAgICAgICAgICAgIE9yZGVyLmJlbG9uZ3NUbyhtb2RlbHMuQ3VzdG9tZXIsIHtcclxuICAgICAgICAgICAgICAgIGZvcmVpZ25LZXk6ICdDdXN0b21lcklEJyxcclxuICAgICAgICAgICAgICAgIGFzOiAnQ3VzdG9tZXInXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9yZGVyLmluaXQoe1xyXG4gICAgICAgIE9yZGVySUQ6IHtcclxuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBDdXN0b21lcklEOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgT3JkZXJEYXRlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU3RhdHVzOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LCB7XHJcbiAgICAgICAgc2VxdWVsaXplLFxyXG4gICAgICAgIG1vZGVsTmFtZTogJ09yZGVyJ1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gT3JkZXI7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLEtBQUssU0FBU04sS0FBSyxDQUFDO0lBQ3RCLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUNyQjtNQUNBRixLQUFLLENBQUNHLE1BQU0sQ0FBQ0QsTUFBTSxDQUFDRSxPQUFPLEVBQUU7UUFDekJDLFVBQVUsRUFBRSxTQUFTO1FBQ3JCQyxFQUFFLEVBQUU7TUFDUixDQUFDLENBQUM7O01BRUY7TUFDQU4sS0FBSyxDQUFDTyxTQUFTLENBQUNMLE1BQU0sQ0FBQ00sUUFBUSxFQUFFO1FBQzdCSCxVQUFVLEVBQUUsWUFBWTtRQUN4QkMsRUFBRSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ047RUFDSjtFQUNBTixLQUFLLENBQUNTLElBQUksQ0FBQztJQUNQQyxPQUFPLEVBQUU7TUFDTEMsSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJDLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxhQUFhLEVBQUU7SUFDbkIsQ0FBQztJQUNEQyxVQUFVLEVBQUU7TUFDUkosSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJJLFNBQVMsRUFBRTtJQUNmLENBQUM7SUFDREMsU0FBUyxFQUFFO01BQ1BOLElBQUksRUFBRVosU0FBUyxDQUFDbUIsSUFBSTtNQUNwQkYsU0FBUyxFQUFFO0lBQ2YsQ0FBQztJQUNERyxNQUFNLEVBQUU7TUFDSlIsSUFBSSxFQUFFWixTQUFTLENBQUNxQixPQUFPO01BQ3ZCSixTQUFTLEVBQUU7SUFDZjtFQUNKLENBQUMsRUFBRTtJQUNDbEIsU0FBUztJQUNUdUIsU0FBUyxFQUFFO0VBQ2YsQ0FBQyxDQUFDO0VBQ0YsT0FBT3JCLEtBQUs7QUFDaEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Order","associate","models","hasOne","Invoice","foreignKey","as","belongsTo","Customer","init","OrderID","type","INTEGER","primaryKey","autoIncrement","CustomerID","allowNull","OrderDate","DATE","Status","BOOLEAN","modelName"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["order.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Order extends Model {\r\n        static associate(models) {\r\n            // Define the relationship between Order and Invoice\r\n            Order.hasOne(models.Invoice, {\r\n                foreignKey: 'OrderID',\r\n                as: 'Invoice'\r\n            });\r\n\r\n            // Define the relationship between Order and Customer (nếu cần)\r\n            Order.belongsTo(models.Customer, {\r\n                foreignKey: 'CustomerID',\r\n                as: 'Customer'\r\n            });\r\n        }\r\n    }\r\n    Order.init({\r\n        OrderID: {\r\n            type: DataTypes.INTEGER,\r\n            primaryKey: true,\r\n            autoIncrement: true,\r\n        },\r\n        CustomerID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        OrderDate: {\r\n            type: DataTypes.DATE,\r\n            allowNull: false,\r\n        },\r\n        Status: {\r\n            type: DataTypes.BOOLEAN,\r\n            allowNull: false,\r\n        },\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Order'\r\n    });\r\n    return Order;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,KAAK,SAASN,KAAK,CAAC;IACtB,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,KAAK,CAACG,MAAM,CAACD,MAAM,CAACE,OAAO,EAAE;QACzBC,UAAU,EAAE,SAAS;QACrBC,EAAE,EAAE;MACR,CAAC,CAAC;;MAEF;MACAN,KAAK,CAACO,SAAS,CAACL,MAAM,CAACM,QAAQ,EAAE;QAC7BH,UAAU,EAAE,YAAY;QACxBC,EAAE,EAAE;MACR,CAAC,CAAC;IACN;EACJ;EACAN,KAAK,CAACS,IAAI,CAAC;IACPC,OAAO,EAAE;MACLC,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,aAAa,EAAE;IACnB,CAAC;IACDC,UAAU,EAAE;MACRJ,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBI,SAAS,EAAE;IACf,CAAC;IACDC,SAAS,EAAE;MACPN,IAAI,EAAEZ,SAAS,CAACmB,IAAI;MACpBF,SAAS,EAAE;IACf,CAAC;IACDG,MAAM,EAAE;MACJR,IAAI,EAAEZ,SAAS,CAACqB,OAAO;MACvBJ,SAAS,EAAE;IACf;EACJ,CAAC,EAAE;IACClB,SAAS;IACTuB,SAAS,EAAE;EACf,CAAC,CAAC;EACF,OAAOrB,KAAK;AAChB,CAAC","ignoreList":[]}},"mtime":1718439969231},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\customer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Customer extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Customer.hasMany(models.Order, {\n        foreignKey: 'CustomerID',\n        as: 'Orders'\n      });\n    }\n  }\n  Customer.init({\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Gender: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Customer'\n  });\n  return Customer;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ3VzdG9tZXIiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNNYW55IiwiT3JkZXIiLCJmb3JlaWduS2V5IiwiYXMiLCJpbml0IiwiTmFtZSIsIlNUUklORyIsIlBob25lIiwiR2VuZGVyIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJjdXN0b21lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHsgTW9kZWwgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gICAgY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cclxuICAgICAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAgICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxyXG4gICAgICAgICAgICBDdXN0b21lci5oYXNNYW55KG1vZGVscy5PcmRlciwgeyBmb3JlaWduS2V5OiAnQ3VzdG9tZXJJRCcsIGFzOiAnT3JkZXJzJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBDdXN0b21lci5pbml0KHtcclxuICAgICAgTmFtZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgUGhvbmU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgIEdlbmRlcjogRGF0YVR5cGVzLlNUUklOR1xyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdDdXN0b21lcicsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDdXN0b21lcjtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLFFBQVEsU0FBU04sS0FBSyxDQUFDO0lBQ3pCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsUUFBUSxDQUFDRyxPQUFPLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLFVBQVUsRUFBRSxZQUFZO1FBQUVDLEVBQUUsRUFBRTtNQUFTLENBQUMsQ0FBQztJQUM5RTtFQUNKO0VBQ0FOLFFBQVEsQ0FBQ08sSUFBSSxDQUFDO0lBQ1pDLElBQUksRUFBRVQsU0FBUyxDQUFDVSxNQUFNO0lBQ3RCQyxLQUFLLEVBQUVYLFNBQVMsQ0FBQ1UsTUFBTTtJQUN2QkUsTUFBTSxFQUFFWixTQUFTLENBQUNVO0VBQ3BCLENBQUMsRUFBRTtJQUNDWCxTQUFTO0lBQ1RjLFNBQVMsRUFBRTtFQUNmLENBQUMsQ0FBQztFQUNGLE9BQU9aLFFBQVE7QUFDbkIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Customer","associate","models","hasMany","Order","foreignKey","as","init","Name","STRING","Phone","Gender","modelName"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["customer.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Customer extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Customer.hasMany(models.Order, { foreignKey: 'CustomerID', as: 'Orders' });\r\n        }\r\n    }\r\n    Customer.init({\r\n      Name: DataTypes.STRING,\r\n      Phone: DataTypes.STRING,\r\n      Gender: DataTypes.STRING\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Customer',\r\n    });\r\n    return Customer;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,OAAO,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,UAAU,EAAE,YAAY;QAAEC,EAAE,EAAE;MAAS,CAAC,CAAC;IAC9E;EACJ;EACAN,QAAQ,CAACO,IAAI,CAAC;IACZC,IAAI,EAAET,SAAS,CAACU,MAAM;IACtBC,KAAK,EAAEX,SAAS,CAACU,MAAM;IACvBE,MAAM,EAAEZ,SAAS,CAACU;EACpB,CAAC,EAAE;IACCX,SAAS;IACTc,SAAS,EAAE;EACf,CAAC,CAAC;EACF,OAAOZ,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718418796338},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\invoicedetail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class InvoiceDetail extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // Define the relationship between InvoiceDetail and Invoice\n      InvoiceDetail.belongsTo(models.Invoice, {\n        foreignKey: 'InvoiceID',\n        as: 'invoice'\n      });\n\n      // Define the relationship between InvoiceDetail and Product\n      InvoiceDetail.belongsTo(models.Product, {\n        foreignKey: 'ProductID',\n        as: 'product'\n      });\n    }\n  }\n  InvoiceDetail.init({\n    InvoiceID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    ProductID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    Quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      validate: {\n        min: 1\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'InvoiceDetail',\n    tableName: 'Invoicedetails',\n    timestamps: false\n  });\n  return InvoiceDetail;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiSW52b2ljZURldGFpbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIkludm9pY2UiLCJmb3JlaWduS2V5IiwiYXMiLCJQcm9kdWN0IiwiaW5pdCIsIkludm9pY2VJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwiUHJvZHVjdElEIiwiUXVhbnRpdHkiLCJ2YWxpZGF0ZSIsIm1pbiIsIm1vZGVsTmFtZSIsInRhYmxlTmFtZSIsInRpbWVzdGFtcHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbImludm9pY2VkZXRhaWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBJbnZvaWNlRGV0YWlsIGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBJbnZvaWNlRGV0YWlsIGFuZCBJbnZvaWNlXHJcbiAgICAgICAgICAgIEludm9pY2VEZXRhaWwuYmVsb25nc1RvKG1vZGVscy5JbnZvaWNlLCB7XHJcbiAgICAgICAgICAgICAgICBmb3JlaWduS2V5OiAnSW52b2ljZUlEJyxcclxuICAgICAgICAgICAgICAgIGFzOiAnaW52b2ljZSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIEludm9pY2VEZXRhaWwgYW5kIFByb2R1Y3RcclxuICAgICAgICAgICAgSW52b2ljZURldGFpbC5iZWxvbmdzVG8obW9kZWxzLlByb2R1Y3QsIHtcclxuICAgICAgICAgICAgICAgIGZvcmVpZ25LZXk6ICdQcm9kdWN0SUQnLFxyXG4gICAgICAgICAgICAgICAgYXM6ICdwcm9kdWN0J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBJbnZvaWNlRGV0YWlsLmluaXQoe1xyXG4gICAgICAgIEludm9pY2VJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFByb2R1Y3RJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFF1YW50aXR5OiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWxpZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgbWluOiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdJbnZvaWNlRGV0YWlsJyxcclxuICAgICAgICB0YWJsZU5hbWU6ICdJbnZvaWNlZGV0YWlscycsXHJcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBJbnZvaWNlRGV0YWlsO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNO0VBQUVBO0FBQU0sQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXRDQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QyxNQUFNQyxhQUFhLFNBQVNOLEtBQUssQ0FBQztJQUM5QjtBQUNSO0FBQ0E7QUFDQTtBQUNBO0lBQ1EsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3JCO01BQ0FGLGFBQWEsQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNFLE9BQU8sRUFBRTtRQUNwQ0MsVUFBVSxFQUFFLFdBQVc7UUFDdkJDLEVBQUUsRUFBRTtNQUNSLENBQUMsQ0FBQzs7TUFFRjtNQUNBTixhQUFhLENBQUNHLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxPQUFPLEVBQUU7UUFDcENGLFVBQVUsRUFBRSxXQUFXO1FBQ3ZCQyxFQUFFLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDTjtFQUNKO0VBQ0FOLGFBQWEsQ0FBQ1EsSUFBSSxDQUFDO0lBQ2ZDLFNBQVMsRUFBRTtNQUNQQyxJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksT0FBTztNQUN2QkMsU0FBUyxFQUFFO0lBQ2YsQ0FBQztJQUNEQyxTQUFTLEVBQUU7TUFDUEgsSUFBSSxFQUFFWCxTQUFTLENBQUNZLE9BQU87TUFDdkJDLFNBQVMsRUFBRTtJQUNmLENBQUM7SUFDREUsUUFBUSxFQUFFO01BQ05KLElBQUksRUFBRVgsU0FBUyxDQUFDWSxPQUFPO01BQ3ZCQyxTQUFTLEVBQUUsS0FBSztNQUNoQkcsUUFBUSxFQUFFO1FBQ05DLEdBQUcsRUFBRTtNQUNUO0lBQ0o7RUFDSixDQUFDLEVBQUU7SUFDQ2xCLFNBQVM7SUFDVG1CLFNBQVMsRUFBRSxlQUFlO0lBQzFCQyxTQUFTLEVBQUUsZ0JBQWdCO0lBQzNCQyxVQUFVLEVBQUU7RUFDaEIsQ0FBQyxDQUFDO0VBQ0YsT0FBT25CLGFBQWE7QUFDeEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","InvoiceDetail","associate","models","belongsTo","Invoice","foreignKey","as","Product","init","InvoiceID","type","INTEGER","allowNull","ProductID","Quantity","validate","min","modelName","tableName","timestamps"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["invoicedetail.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class InvoiceDetail extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // Define the relationship between InvoiceDetail and Invoice\r\n            InvoiceDetail.belongsTo(models.Invoice, {\r\n                foreignKey: 'InvoiceID',\r\n                as: 'invoice'\r\n            });\r\n\r\n            // Define the relationship between InvoiceDetail and Product\r\n            InvoiceDetail.belongsTo(models.Product, {\r\n                foreignKey: 'ProductID',\r\n                as: 'product'\r\n            });\r\n        }\r\n    }\r\n    InvoiceDetail.init({\r\n        InvoiceID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        ProductID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        Quantity: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            validate: {\r\n                min: 1\r\n            }\r\n        },\r\n    }, {\r\n        sequelize,\r\n        modelName: 'InvoiceDetail',\r\n        tableName: 'Invoicedetails',\r\n        timestamps: false,\r\n    });\r\n    return InvoiceDetail;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,aAAa,SAASN,KAAK,CAAC;IAC9B;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,aAAa,CAACG,SAAS,CAACD,MAAM,CAACE,OAAO,EAAE;QACpCC,UAAU,EAAE,WAAW;QACvBC,EAAE,EAAE;MACR,CAAC,CAAC;;MAEF;MACAN,aAAa,CAACG,SAAS,CAACD,MAAM,CAACK,OAAO,EAAE;QACpCF,UAAU,EAAE,WAAW;QACvBC,EAAE,EAAE;MACR,CAAC,CAAC;IACN;EACJ;EACAN,aAAa,CAACQ,IAAI,CAAC;IACfC,SAAS,EAAE;MACPC,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE;IACf,CAAC;IACDC,SAAS,EAAE;MACPH,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE;IACf,CAAC;IACDE,QAAQ,EAAE;MACNJ,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBG,QAAQ,EAAE;QACNC,GAAG,EAAE;MACT;IACJ;EACJ,CAAC,EAAE;IACClB,SAAS;IACTmB,SAAS,EAAE,eAAe;IAC1BC,SAAS,EAAE,gBAAgB;IAC3BC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOnB,aAAa;AACxB,CAAC","ignoreList":[]}},"mtime":1718439431542},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\customer_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCustomer,\n  getAllCustomer,\n  getCustomer,\n  updateCustomer,\n  deleteCustomer\n} = require('../controllers/customer_controller');\nconst router = express.Router();\nrouter.post('/Customers', createCustomer);\nrouter.get('/Customers', getAllCustomer);\nrouter.get('/Customers/:id', getCustomer);\nrouter.put('/Customers/:id', updateCustomer);\nrouter.delete('/Customers/:id', deleteCustomer);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUN1c3RvbWVyIiwiZ2V0QWxsQ3VzdG9tZXIiLCJnZXRDdXN0b21lciIsInVwZGF0ZUN1c3RvbWVyIiwiZGVsZXRlQ3VzdG9tZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiY3VzdG9tZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ3VzdG9tZXIsIGdldEFsbEN1c3RvbWVyLCBnZXRDdXN0b21lciwgdXBkYXRlQ3VzdG9tZXIsIGRlbGV0ZUN1c3RvbWVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jdXN0b21lcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0N1c3RvbWVycycsIGNyZWF0ZUN1c3RvbWVyKTtcclxucm91dGVyLmdldCgnL0N1c3RvbWVycycsIGdldEFsbEN1c3RvbWVyKTtcclxucm91dGVyLmdldCgnL0N1c3RvbWVycy86aWQnLCBnZXRDdXN0b21lcik7XHJcbnJvdXRlci5wdXQoJy9DdXN0b21lcnMvOmlkJywgdXBkYXRlQ3VzdG9tZXIpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvQ3VzdG9tZXJzLzppZCcsIGRlbGV0ZUN1c3RvbWVyKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxjQUFjO0VBQUVDLGNBQWM7RUFBRUMsV0FBVztFQUFFQyxjQUFjO0VBQUVDO0FBQWUsQ0FBQyxHQUFHTCxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDckksTUFBTU0sTUFBTSxHQUFHUCxPQUFPLENBQUNRLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxZQUFZLEVBQUVQLGNBQWMsQ0FBQztBQUN6Q0ssTUFBTSxDQUFDRyxHQUFHLENBQUMsWUFBWSxFQUFFUCxjQUFjLENBQUM7QUFDeENJLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGdCQUFnQixFQUFFTixXQUFXLENBQUM7QUFDekNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGdCQUFnQixFQUFFTixjQUFjLENBQUM7QUFDNUNFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLGdCQUFnQixFQUFFTixjQUFjLENBQUM7QUFHL0NPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createCustomer","getAllCustomer","getCustomer","updateCustomer","deleteCustomer","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["customer_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCustomer, getAllCustomer, getCustomer, updateCustomer, deleteCustomer } = require('../controllers/customer_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Customers', createCustomer);\r\nrouter.get('/Customers', getAllCustomer);\r\nrouter.get('/Customers/:id', getCustomer);\r\nrouter.put('/Customers/:id', updateCustomer);\r\nrouter.delete('/Customers/:id', deleteCustomer);\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,WAAW,CAAC;AACzCG,MAAM,CAACI,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAG/CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718133255282},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\customer_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Customer = require('../Models/customer.js');\nconst asyncHandler = require('express-async-handler');\nconst createCustomer = asyncHandler(async (req, res) => {\n  const {\n    Name\n  } = req.body;\n  const customerExist = await Customer.findOne({\n    where: {\n      Name\n    }\n  });\n  if (customerExist) {\n    return res.status(400).json({\n      success: false,\n      message: \"Khách hàng đã tồn tại trong danh sách\"\n    });\n  }\n  const newCustomer = await Customer.create(req.body);\n  return res.status(201).json({\n    success: true,\n    newCustomer: newCustomer\n  });\n});\nconst getAllCustomer = asyncHandler(async (req, res) => {\n  try {\n    const listCustomer = await Customer.findAll();\n    return res.status(200).json({\n      success: true,\n      listCustomer: listCustomer\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await Customer.findByPk(cid);\n  if (customer) {\n    return res.status(200).json({\n      success: true,\n      Customer: customer\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không có trong danh sách\"\n    });\n  }\n});\nconst updateCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await Customer.findByPk(cid);\n  if (!customer) {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không tồn tại\"\n    });\n  }\n  await customer.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedCustomer: customer\n  });\n});\nconst deleteCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await Customer.findByPk(cid);\n\n  // Ktra xem khách hàng có tồn tại hay không\n  if (!customer) {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không tồn tại\"\n    });\n  }\n  await customer.destroy();\n  return res.status(200).json({\n    success: true,\n    message: `Đã xoá khách hàng ${customer.Name}`\n  });\n});\nmodule.exports = {\n  createCustomer,\n  getAllCustomer,\n  getCustomer,\n  updateCustomer,\n  deleteCustomer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDdXN0b21lciIsInJlcXVpcmUiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVDdXN0b21lciIsInJlcSIsInJlcyIsIk5hbWUiLCJib2R5IiwiY3VzdG9tZXJFeGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsIm5ld0N1c3RvbWVyIiwiY3JlYXRlIiwiZ2V0QWxsQ3VzdG9tZXIiLCJsaXN0Q3VzdG9tZXIiLCJmaW5kQWxsIiwiZXJyb3IiLCJnZXRDdXN0b21lciIsImNpZCIsInBhcmFtcyIsImN1c3RvbWVyIiwiZmluZEJ5UGsiLCJ1cGRhdGVDdXN0b21lciIsInVwZGF0ZSIsInVwZGF0ZWRDdXN0b21lciIsImRlbGV0ZUN1c3RvbWVyIiwiZGVzdHJveSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsiY3VzdG9tZXJfY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDdXN0b21lciA9IHJlcXVpcmUoJy4uL01vZGVscy9jdXN0b21lci5qcycpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUN1c3RvbWVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGN1c3RvbWVyRXhpc3QgPSBhd2FpdCBDdXN0b21lci5maW5kT25lKHsgd2hlcmU6IHsgTmFtZSB9IH0pO1xyXG5cclxuICAgIGlmIChjdXN0b21lckV4aXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiS2jDoWNoIGjDoG5nIMSRw6MgdOG7k24gdOG6oWkgdHJvbmcgZGFuaCBzw6FjaFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3Q3VzdG9tZXIgPSBhd2FpdCBDdXN0b21lci5jcmVhdGUocmVxLmJvZHkpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBuZXdDdXN0b21lcjogbmV3Q3VzdG9tZXJcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGdldEFsbEN1c3RvbWVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBsaXN0Q3VzdG9tZXIgPSBhd2FpdCBDdXN0b21lci5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbGlzdEN1c3RvbWVyOiBsaXN0Q3VzdG9tZXJcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBnZXRDdXN0b21lciA9IGFzeW5jSGFuZGxlcihhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBDdXN0b21lci5maW5kQnlQayhjaWQpO1xyXG5cclxuICAgIGlmIChjdXN0b21lcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIEN1c3RvbWVyOiBjdXN0b21lclxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJLaMOhY2ggaMOgbmcga2jDtG5nIGPDsyB0cm9uZyBkYW5oIHPDoWNoXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGRhdGVDdXN0b21lciA9IGFzeW5jSGFuZGxlcihhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBDdXN0b21lci5maW5kQnlQayhjaWQpO1xyXG5cclxuICAgIGlmICghY3VzdG9tZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJLaMOhY2ggaMOgbmcga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjdXN0b21lci51cGRhdGUocmVxLmJvZHkpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1cGRhdGVkQ3VzdG9tZXI6IGN1c3RvbWVyXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVDdXN0b21lciA9IGFzeW5jSGFuZGxlcihhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBDdXN0b21lci5maW5kQnlQayhjaWQpO1xyXG5cclxuICAgIC8vIEt0cmEgeGVtIGtow6FjaCBow6BuZyBjw7MgdOG7k24gdOG6oWkgaGF5IGtow7RuZ1xyXG4gICAgaWYgKCFjdXN0b21lcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIktow6FjaCBow6BuZyBraMO0bmcgdOG7k24gdOG6oWlcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjdXN0b21lci5kZXN0cm95KCk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGDEkMOjIHhvw6Ega2jDoWNoIGjDoG5nICR7Y3VzdG9tZXIuTmFtZX1gXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUN1c3RvbWVyLFxyXG4gICAgZ2V0QWxsQ3VzdG9tZXIsXHJcbiAgICBnZXRDdXN0b21lcixcclxuICAgIHVwZGF0ZUN1c3RvbWVyLFxyXG4gICAgZGVsZXRlQ3VzdG9tZXJcclxufSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDakQsTUFBTUMsWUFBWSxHQUFHRCxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFckQsTUFBTUUsY0FBYyxHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0VBQ3pCLE1BQU1DLGFBQWEsR0FBRyxNQUFNUixRQUFRLENBQUNTLE9BQU8sQ0FBQztJQUFFQyxLQUFLLEVBQUU7TUFBRUo7SUFBSztFQUFFLENBQUMsQ0FBQztFQUVq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","map":{"version":3,"names":["Customer","require","asyncHandler","createCustomer","req","res","Name","body","customerExist","findOne","where","status","json","success","message","newCustomer","create","getAllCustomer","listCustomer","findAll","error","getCustomer","cid","params","customer","findByPk","updateCustomer","update","updatedCustomer","deleteCustomer","destroy","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["customer_controller.js"],"sourcesContent":["const Customer = require('../Models/customer.js');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createCustomer = asyncHandler(async (req, res) => {\r\n    const { Name } = req.body;\r\n    const customerExist = await Customer.findOne({ where: { Name } });\r\n\r\n    if (customerExist) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Khách hàng đã tồn tại trong danh sách\"\r\n        });\r\n    }\r\n\r\n    const newCustomer = await Customer.create(req.body);\r\n\r\n    return res.status(201).json({\r\n        success: true,\r\n        newCustomer: newCustomer\r\n    });\r\n});\r\n\r\nconst getAllCustomer = asyncHandler(async (req, res) => {\r\n    try {\r\n        const listCustomer = await Customer.findAll();\r\n        return res.status(200).json({\r\n            success: true,\r\n            listCustomer: listCustomer\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await Customer.findByPk(cid);\r\n\r\n    if (customer) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            Customer: customer\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Khách hàng không có trong danh sách\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await Customer.findByPk(cid);\r\n\r\n    if (!customer) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Khách hàng không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await customer.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedCustomer: customer\r\n    });\r\n});\r\n\r\nconst deleteCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await Customer.findByPk(cid);\r\n\r\n    // Ktra xem khách hàng có tồn tại hay không\r\n    if (!customer) {\r\n        return res.status(404).json({ success: false, message: \"Khách hàng không tồn tại\" });\r\n    }\r\n\r\n    await customer.destroy();\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: `Đã xoá khách hàng ${customer.Name}`\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    createCustomer,\r\n    getAllCustomer,\r\n    getCustomer,\r\n    updateCustomer,\r\n    deleteCustomer\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718121064000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\emloyee_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createEmployee,\n  getAllEmployee,\n  getEmployee,\n  updateEmployee,\n  deleteEmployee\n} = require('../controllers/employee_controller');\nconst router = express.Router();\nrouter.post('/Employees', createEmployee);\nrouter.get('/Employees', getAllEmployee);\nrouter.get('/Employees/:id', getEmployee);\nrouter.put('/Employees/:id', updateEmployee);\nrouter.delete('/Employees/:id', deleteEmployee);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUVtcGxveWVlIiwiZ2V0QWxsRW1wbG95ZWUiLCJnZXRFbXBsb3llZSIsInVwZGF0ZUVtcGxveWVlIiwiZGVsZXRlRW1wbG95ZWUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiZW1sb3llZV9yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgeyBjcmVhdGVFbXBsb3llZSwgZ2V0QWxsRW1wbG95ZWUsIGdldEVtcGxveWVlLCB1cGRhdGVFbXBsb3llZSwgZGVsZXRlRW1wbG95ZWUgfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2VtcGxveWVlX2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvRW1wbG95ZWVzJywgY3JlYXRlRW1wbG95ZWUpO1xyXG5yb3V0ZXIuZ2V0KCcvRW1wbG95ZWVzJywgZ2V0QWxsRW1wbG95ZWUpO1xyXG5yb3V0ZXIuZ2V0KCcvRW1wbG95ZWVzLzppZCcsIGdldEVtcGxveWVlKTtcclxucm91dGVyLnB1dCgnL0VtcGxveWVlcy86aWQnLCB1cGRhdGVFbXBsb3llZSk7XHJcbnJvdXRlci5kZWxldGUoJy9FbXBsb3llZXMvOmlkJywgZGVsZXRlRW1wbG95ZWUpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsY0FBYztFQUFFQyxjQUFjO0VBQUVDLFdBQVc7RUFBRUMsY0FBYztFQUFFQztBQUFlLENBQUMsR0FBR0wsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQ3JJLE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsWUFBWSxFQUFFUCxjQUFjLENBQUM7QUFDekNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFlBQVksRUFBRVAsY0FBYyxDQUFDO0FBQ3hDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRU4sV0FBVyxDQUFDO0FBQ3pDRyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRU4sY0FBYyxDQUFDO0FBQzVDRSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRU4sY0FBYyxDQUFDO0FBRS9DTyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createEmployee","getAllEmployee","getEmployee","updateEmployee","deleteEmployee","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["emloyee_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createEmployee, getAllEmployee, getEmployee, updateEmployee, deleteEmployee } = require('../controllers/employee_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Employees', createEmployee);\r\nrouter.get('/Employees', getAllEmployee);\r\nrouter.get('/Employees/:id', getEmployee);\r\nrouter.put('/Employees/:id', updateEmployee);\r\nrouter.delete('/Employees/:id', deleteEmployee);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,WAAW,CAAC;AACzCG,MAAM,CAACI,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAE/CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121654425},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\employee_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Employee = require('../Models/employee');\nconst asyncHandler = require('express-async-handler');\nconst createEmployee = asyncHandler(async (req, res) => {\n  const {\n    Name\n  } = req.body;\n  const EmployeeExist = await Employee.findOne({\n    where: {\n      Name\n    }\n  });\n  if (EmployeeExist) {\n    return res.status(400).json({\n      success: false,\n      message: \"Nhân viên đã tồn tại trong danh sách\"\n    });\n  }\n  const newEmployee = await Employee.create(req.body);\n  return res.status(201).json({\n    success: true,\n    newEmployee: newEmployee\n  });\n});\nconst getAllEmployee = asyncHandler(async (req, res) => {\n  try {\n    const listEmployee = await Employee.findAll();\n    return res.status(200).json({\n      success: true,\n      listEmployee: listEmployee\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getEmployee = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const employee = await Employee.findByPk(cid);\n  if (Employee) {\n    return res.status(200).json({\n      success: true,\n      Employee: employee\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không có trong danh sách\"\n    });\n  }\n});\nconst updateEmployee = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const Employee = await Employee.findByPk(cid);\n  if (!Employee) {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không tồn tại\"\n    });\n  }\n  await Employee.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedEmployee: Employee\n  });\n});\nconst deleteEmployee = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const Employee = await Employee.findByPk(cid);\n\n  // Ktra xem khách hàng có tồn tại hay không\n  if (!Employee) {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không tồn tại\"\n    });\n  }\n  await Employee.destroy();\n  return res.status(200).json({\n    success: true,\n    message: `Đã xoá nhân viên ${Employee.Name}`\n  });\n});\nmodule.exports = {\n  createEmployee,\n  getAllEmployee,\n  getEmployee,\n  updateEmployee,\n  deleteEmployee\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbXBsb3llZSIsInJlcXVpcmUiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVFbXBsb3llZSIsInJlcSIsInJlcyIsIk5hbWUiLCJib2R5IiwiRW1wbG95ZWVFeGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsIm5ld0VtcGxveWVlIiwiY3JlYXRlIiwiZ2V0QWxsRW1wbG95ZWUiLCJsaXN0RW1wbG95ZWUiLCJmaW5kQWxsIiwiZXJyb3IiLCJnZXRFbXBsb3llZSIsImNpZCIsInBhcmFtcyIsImVtcGxveWVlIiwiZmluZEJ5UGsiLCJ1cGRhdGVFbXBsb3llZSIsInVwZGF0ZSIsInVwZGF0ZWRFbXBsb3llZSIsImRlbGV0ZUVtcGxveWVlIiwiZGVzdHJveSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsiZW1wbG95ZWVfY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFbXBsb3llZSA9IHJlcXVpcmUoJy4uL01vZGVscy9lbXBsb3llZScpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUVtcGxveWVlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IEVtcGxveWVlRXhpc3QgPSBhd2FpdCBFbXBsb3llZS5maW5kT25lKHsgd2hlcmU6IHsgTmFtZSB9IH0pO1xyXG5cclxuICAgIGlmIChFbXBsb3llZUV4aXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmjDom4gdmnDqm4gxJHDoyB04buTbiB04bqhaSB0cm9uZyBkYW5oIHPDoWNoXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdFbXBsb3llZSA9IGF3YWl0IEVtcGxveWVlLmNyZWF0ZShyZXEuYm9keSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG5ld0VtcGxveWVlOiBuZXdFbXBsb3llZVxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0QWxsRW1wbG95ZWUgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGxpc3RFbXBsb3llZSA9IGF3YWl0IEVtcGxveWVlLmZpbmRBbGwoKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBsaXN0RW1wbG95ZWU6IGxpc3RFbXBsb3llZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGdldEVtcGxveWVlID0gYXN5bmNIYW5kbGVyKGFzeW5jKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGNpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCBlbXBsb3llZSA9IGF3YWl0IEVtcGxveWVlLmZpbmRCeVBrKGNpZCk7XHJcblxyXG4gICAgaWYgKEVtcGxveWVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgRW1wbG95ZWU6IGVtcGxveWVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIk5ow6JuIHZpw6puIGtow7RuZyBjw7MgdHJvbmcgZGFuaCBzw6FjaFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlRW1wbG95ZWUgPSBhc3luY0hhbmRsZXIoYXN5bmMocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgY2lkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IEVtcGxveWVlID0gYXdhaXQgRW1wbG95ZWUuZmluZEJ5UGsoY2lkKTtcclxuXHJcbiAgICBpZiAoIUVtcGxveWVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmjDom4gdmnDqm4ga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBFbXBsb3llZS51cGRhdGUocmVxLmJvZHkpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1cGRhdGVkRW1wbG95ZWU6IEVtcGxveWVlXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVFbXBsb3llZSA9IGFzeW5jSGFuZGxlcihhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgRW1wbG95ZWUgPSBhd2FpdCBFbXBsb3llZS5maW5kQnlQayhjaWQpO1xyXG5cclxuICAgIC8vIEt0cmEgeGVtIGtow6FjaCBow6BuZyBjw7MgdOG7k24gdOG6oWkgaGF5IGtow7RuZ1xyXG4gICAgaWYgKCFFbXBsb3llZSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmjDom4gdmnDqm4ga2jDtG5nIHThu5NuIHThuqFpXCIgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgRW1wbG95ZWUuZGVzdHJveSgpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiBgxJDDoyB4b8OhIG5ow6JuIHZpw6puICR7RW1wbG95ZWUuTmFtZX1gXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUVtcGxveWVlLFxyXG4gICAgZ2V0QWxsRW1wbG95ZWUsXHJcbiAgICBnZXRFbXBsb3llZSxcclxuICAgIHVwZGF0ZUVtcGxveWVlLFxyXG4gICAgZGVsZXRlRW1wbG95ZWVcclxufSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDOUMsTUFBTUMsWUFBWSxHQUFHRCxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFckQsTUFBTUUsY0FBYyxHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0VBQ3pCLE1BQU1DLGFBQWEsR0FBRyxNQUFNUixRQUFRLENBQUNTLE9BQU8sQ0FBQztJQUFFQyxLQUFL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","map":{"version":3,"names":["Employee","require","asyncHandler","createEmployee","req","res","Name","body","EmployeeExist","findOne","where","status","json","success","message","newEmployee","create","getAllEmployee","listEmployee","findAll","error","getEmployee","cid","params","employee","findByPk","updateEmployee","update","updatedEmployee","deleteEmployee","destroy","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["employee_controller.js"],"sourcesContent":["const Employee = require('../Models/employee');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createEmployee = asyncHandler(async (req, res) => {\r\n    const { Name } = req.body;\r\n    const EmployeeExist = await Employee.findOne({ where: { Name } });\r\n\r\n    if (EmployeeExist) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Nhân viên đã tồn tại trong danh sách\"\r\n        });\r\n    }\r\n\r\n    const newEmployee = await Employee.create(req.body);\r\n\r\n    return res.status(201).json({\r\n        success: true,\r\n        newEmployee: newEmployee\r\n    });\r\n});\r\n\r\nconst getAllEmployee = asyncHandler(async (req, res) => {\r\n    try {\r\n        const listEmployee = await Employee.findAll();\r\n        return res.status(200).json({\r\n            success: true,\r\n            listEmployee: listEmployee\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getEmployee = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const employee = await Employee.findByPk(cid);\r\n\r\n    if (Employee) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            Employee: employee\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Nhân viên không có trong danh sách\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateEmployee = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const Employee = await Employee.findByPk(cid);\r\n\r\n    if (!Employee) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Nhân viên không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await Employee.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedEmployee: Employee\r\n    });\r\n});\r\n\r\nconst deleteEmployee = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const Employee = await Employee.findByPk(cid);\r\n\r\n    // Ktra xem khách hàng có tồn tại hay không\r\n    if (!Employee) {\r\n        return res.status(404).json({ \r\n            success: false, \r\n            message: \"Nhân viên không tồn tại\" \r\n        });\r\n    }\r\n\r\n    await Employee.destroy();\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: `Đã xoá nhân viên ${Employee.Name}`\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    createEmployee,\r\n    getAllEmployee,\r\n    getEmployee,\r\n    updateEmployee,\r\n    deleteEmployee\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718172138000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\employee.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Employee extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Employee.hasOne(models.User, {\n        foreignKey: 'Phone',\n        as: 'Users'\n      });\n    }\n  }\n  Employee.init({\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Gender: DataTypes.STRING,\n    Address: DataTypes.STRING,\n    Role: DataTypes.STRING,\n    Salary: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Employee'\n  });\n  return Employee;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiRW1wbG95ZWUiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNPbmUiLCJVc2VyIiwiZm9yZWlnbktleSIsImFzIiwiaW5pdCIsIk5hbWUiLCJTVFJJTkciLCJQaG9uZSIsIkdlbmRlciIsIkFkZHJlc3MiLCJSb2xlIiwiU2FsYXJ5IiwiSU5URUdFUiIsIm1vZGVsTmFtZSJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsiZW1wbG95ZWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7XHJcbiAgICBNb2RlbFxyXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBFbXBsb3llZSBleHRlbmRzIE1vZGVsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxyXG4gICAgICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XHJcbiAgICAgICAgICAgIC8vIGRlZmluZSBhc3NvY2lhdGlvbiBoZXJlXHJcbiAgICAgICAgICAgIEVtcGxveWVlLmhhc09uZShtb2RlbHMuVXNlciwgeyBmb3JlaWduS2V5OiAnUGhvbmUnLCBhczogJ1VzZXJzJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBFbXBsb3llZS5pbml0KHtcclxuICAgICAgTmFtZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgUGhvbmU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgIEdlbmRlcjogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgQWRkcmVzczogIERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgIFJvbGU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgIFNhbGFyeTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICB9LCB7XHJcbiAgICAgICAgc2VxdWVsaXplLFxyXG4gICAgICAgIG1vZGVsTmFtZTogJ0VtcGxveWVlJyxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEVtcGxveWVlO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUNGQTtBQUNKLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUN4QkMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsUUFBUSxTQUFTTixLQUFLLENBQUM7SUFDekI7QUFDUjtBQUNBO0FBQ0E7QUFDQTtJQUNRLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUNyQjtNQUNBRixRQUFRLENBQUNHLE1BQU0sQ0FBQ0QsTUFBTSxDQUFDRSxJQUFJLEVBQUU7UUFBRUMsVUFBVSxFQUFFLE9BQU87UUFBRUMsRUFBRSxFQUFFO01BQVEsQ0FBQyxDQUFDO0lBQ3RFO0VBQ0o7RUFDQU4sUUFBUSxDQUFDTyxJQUFJLENBQUM7SUFDWkMsSUFBSSxFQUFFVCxTQUFTLENBQUNVLE1BQU07SUFDdEJDLEtBQUssRUFBRVgsU0FBUyxDQUFDVSxNQUFNO0lBQ3ZCRSxNQUFNLEVBQUVaLFNBQVMsQ0FBQ1UsTUFBTTtJQUN4QkcsT0FBTyxFQUFHYixTQUFTLENBQUNVLE1BQU07SUFDMUJJLElBQUksRUFBRWQsU0FBUyxDQUFDVSxNQUFNO0lBQ3RCSyxNQUFNLEVBQUVmLFNBQVMsQ0FBQ2dCO0VBQ3BCLENBQUMsRUFBRTtJQUNDakIsU0FBUztJQUNUa0IsU0FBUyxFQUFFO0VBQ2YsQ0FBQyxDQUFDO0VBQ0YsT0FBT2hCLFFBQVE7QUFDbkIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Employee","associate","models","hasOne","User","foreignKey","as","init","Name","STRING","Phone","Gender","Address","Role","Salary","INTEGER","modelName"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["employee.js"],"sourcesContent":["'use strict';\r\nconst {\r\n    Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Employee extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Employee.hasOne(models.User, { foreignKey: 'Phone', as: 'Users' });\r\n        }\r\n    }\r\n    Employee.init({\r\n      Name: DataTypes.STRING,\r\n      Phone: DataTypes.STRING,\r\n      Gender: DataTypes.STRING,\r\n      Address:  DataTypes.STRING,\r\n      Role: DataTypes.STRING,\r\n      Salary: DataTypes.INTEGER,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Employee',\r\n    });\r\n    return Employee;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACFA;AACJ,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,MAAM,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE,OAAO;QAAEC,EAAE,EAAE;MAAQ,CAAC,CAAC;IACtE;EACJ;EACAN,QAAQ,CAACO,IAAI,CAAC;IACZC,IAAI,EAAET,SAAS,CAACU,MAAM;IACtBC,KAAK,EAAEX,SAAS,CAACU,MAAM;IACvBE,MAAM,EAAEZ,SAAS,CAACU,MAAM;IACxBG,OAAO,EAAGb,SAAS,CAACU,MAAM;IAC1BI,IAAI,EAAEd,SAAS,CAACU,MAAM;IACtBK,MAAM,EAAEf,SAAS,CAACgB;EACpB,CAAC,EAAE;IACCjB,SAAS;IACTkB,SAAS,EAAE;EACf,CAAC,CAAC;EACF,OAAOhB,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718418967479},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\order_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createOrder,\n  getAllOrder,\n  getOrder,\n  updateOrder,\n  deleteOrder\n} = require('../controllers/order_controller');\nconst router = express.Router();\nrouter.post('/orders', createOrder);\nrouter.get('/orders', getAllOrder);\nrouter.get('/orders/:id', getOrder);\nrouter.put('/orders/:id', updateOrder);\nrouter.delete('/orders/:id', deleteOrder);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZU9yZGVyIiwiZ2V0QWxsT3JkZXIiLCJnZXRPcmRlciIsInVwZGF0ZU9yZGVyIiwiZGVsZXRlT3JkZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsib3JkZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlT3JkZXIsIGdldEFsbE9yZGVyLCBnZXRPcmRlciwgdXBkYXRlT3JkZXIsIGRlbGV0ZU9yZGVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9vcmRlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL29yZGVycycsIGNyZWF0ZU9yZGVyKTtcclxucm91dGVyLmdldCgnL29yZGVycycsIGdldEFsbE9yZGVyKTtcclxucm91dGVyLmdldCgnL29yZGVycy86aWQnLCBnZXRPcmRlcik7XHJcbnJvdXRlci5wdXQoJy9vcmRlcnMvOmlkJywgdXBkYXRlT3JkZXIpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvb3JkZXJzLzppZCcsIGRlbGV0ZU9yZGVyKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLFdBQVc7RUFBRUMsV0FBVztFQUFFQyxRQUFRO0VBQUVDLFdBQVc7RUFBRUM7QUFBWSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztBQUNuSCxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRVAsV0FBVyxDQUFDO0FBQ25DSyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxTQUFTLEVBQUVQLFdBQVcsQ0FBQztBQUNsQ0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsYUFBYSxFQUFFTixRQUFRLENBQUM7QUFDbkNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGFBQWEsRUFBRU4sV0FBVyxDQUFDO0FBQ3RDRSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxhQUFhLEVBQUVOLFdBQVcsQ0FBQztBQUV6Q08sTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","createOrder","getAllOrder","getOrder","updateOrder","deleteOrder","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["order_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createOrder, getAllOrder, getOrder, updateOrder, deleteOrder } = require('../controllers/order_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/orders', createOrder);\r\nrouter.get('/orders', getAllOrder);\r\nrouter.get('/orders/:id', getOrder);\r\nrouter.put('/orders/:id', updateOrder);\r\nrouter.delete('/orders/:id', deleteOrder);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,WAAW;EAAEC,WAAW;EAAEC,QAAQ;EAAEC,WAAW;EAAEC;AAAY,CAAC,GAAGL,OAAO,CAAC,iCAAiC,CAAC;AACnH,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEP,WAAW,CAAC;AACnCK,MAAM,CAACG,GAAG,CAAC,SAAS,EAAEP,WAAW,CAAC;AAClCI,MAAM,CAACG,GAAG,CAAC,aAAa,EAAEN,QAAQ,CAAC;AACnCG,MAAM,CAACI,GAAG,CAAC,aAAa,EAAEN,WAAW,CAAC;AACtCE,MAAM,CAACK,MAAM,CAAC,aAAa,EAAEN,WAAW,CAAC;AAEzCO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121410060},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\order_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Order = require('../Models/order');\nconst Product = require('../Models/product');\nconst OrderDetail = require('../Models/orderdetail');\nconst asyncHandler = require('express-async-handler');\nconst createOrder = asyncHandler(async (req, res) => {\n  const t = await sequelize.transaction();\n  try {\n    const {\n      orderData,\n      orderDetailData\n    } = req.body;\n\n    // Tạo đơn hàng\n    const order = await Order.create(orderData, {\n      transaction: t\n    });\n\n    // Tạo các mục trong đơn hàng và cập nhật số lượng tồn kho\n    for (const item of orderDetailData) {\n      const product = await Product.findByPk(item.ProductID, {\n        transaction: t\n      });\n      if (!product) {\n        throw new Error(`Không tìm thấy sản phẩm`);\n      }\n      if (product.Quantity < item.Quantity) {\n        throw new Error(`Sản phẩm không đủ số lượng`);\n      }\n\n      // Tạo OrderItem\n      await OrderItem.create({\n        OrderID: order.OrderID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n\n      // Cập nhật số lượng tồn kho\n      product.Quantity -= item.Quantity;\n      await product.save({\n        transaction: t\n      });\n    }\n    await t.commit();\n    return res.status(201).json(order);\n  } catch (error) {\n    await t.rollback();\n    return res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst getAllOrder = asyncHandler(async (req, res) => {\n  try {\n    const orders = await Order.findAll({\n      include: [OrderDetail]\n    });\n    res.status(200).json(orders);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst getOrder = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const order = await Order.findByPk(id, {\n      include: [OrderDetail]\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy sản phẩm'\n      });\n    }\n    res.status(200).json(order);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst updateOrder = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    orderData,\n    orderDetailData\n  } = req.body;\n  const t = await sequelize.transaction();\n  try {\n    const order = await Order.findByPk(id, {\n      transaction: t\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy sản phẩm'\n      });\n    }\n    await order.update(orderData, {\n      transaction: t\n    });\n\n    // Xóa các mục trong đơn hàng cũ\n    await OrderItem.destroy({\n      where: {\n        OrderID: id\n      },\n      transaction: t\n    });\n\n    // Tạo các mục trong đơn hàng mới và cập nhật số lượng tồn kho\n    for (const item of orderDetailData) {\n      const product = await Product.findByPk(item.ProductID, {\n        transaction: t\n      });\n      if (!product) {\n        throw new Error(`Không tìm thấy sản phẩm`);\n      }\n      if (product.Quantity < item.Quantity) {\n        throw new Error(`Sản phẩm không đủ số lượng`);\n      }\n\n      // Tạo OrderItem\n      await OrderItem.create({\n        OrderID: order.OrderID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n\n      // Cập nhật số lượng tồn kho\n      product.Quantity -= item.Quantity;\n      await product.save({\n        transaction: t\n      });\n    }\n    await t.commit();\n    res.status(200).json(order);\n  } catch (error) {\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst deleteOrder = asyncHandler(async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const t = await sequelize.transaction();\n  try {\n    const order = await Order.findByPk(id, {\n      transaction: t\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy đơn hàng'\n      });\n    }\n\n    // Xóa các mục trong đơn hàng\n    await OrderItem.destroy({\n      where: {\n        OrderID: id\n      },\n      transaction: t\n    });\n\n    // Xóa đơn hàng\n    await order.destroy({\n      transaction: t\n    });\n    await t.commit();\n    res.status(200).json({\n      message: 'Xóa đơn hàng thành công'\n    });\n  } catch (error) {\n    await t.rollback();\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nmodule.exports = {\n  createOrder,\n  getAllOrder,\n  getOrder,\n  updateOrder,\n  deleteOrder\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmRlciIsInJlcXVpcmUiLCJQcm9kdWN0IiwiT3JkZXJEZXRhaWwiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVPcmRlciIsInJlcSIsInJlcyIsInQiLCJzZXF1ZWxpemUiLCJ0cmFuc2FjdGlvbiIsIm9yZGVyRGF0YSIsIm9yZGVyRGV0YWlsRGF0YSIsImJvZHkiLCJvcmRlciIsImNyZWF0ZSIsIml0ZW0iLCJwcm9kdWN0IiwiZmluZEJ5UGsiLCJQcm9kdWN0SUQiLCJFcnJvciIsIlF1YW50aXR5IiwiT3JkZXJJdGVtIiwiT3JkZXJJRCIsInNhdmUiLCJjb21taXQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJyb2xsYmFjayIsIm1lc3NhZ2UiLCJnZXRBbGxPcmRlciIsIm9yZGVycyIsImZpbmRBbGwiLCJpbmNsdWRlIiwiZ2V0T3JkZXIiLCJpZCIsInBhcmFtcyIsInVwZGF0ZU9yZGVyIiwidXBkYXRlIiwiZGVzdHJveSIsIndoZXJlIiwiZGVsZXRlT3JkZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbIm9yZGVyX2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgT3JkZXIgPSByZXF1aXJlKCcuLi9Nb2RlbHMvb3JkZXInKTtcclxuY29uc3QgUHJvZHVjdCA9IHJlcXVpcmUoJy4uL01vZGVscy9wcm9kdWN0Jyk7XHJcbmNvbnN0IE9yZGVyRGV0YWlsID0gcmVxdWlyZSgnLi4vTW9kZWxzL29yZGVyZGV0YWlsJyk7XHJcbmNvbnN0IGFzeW5jSGFuZGxlciA9IHJlcXVpcmUoJ2V4cHJlc3MtYXN5bmMtaGFuZGxlcicpO1xyXG5cclxuY29uc3QgY3JlYXRlT3JkZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB0ID0gYXdhaXQgc2VxdWVsaXplLnRyYW5zYWN0aW9uKCk7XHJcbiAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IG9yZGVyRGF0YSwgb3JkZXJEZXRhaWxEYXRhIH0gPSByZXEuYm9keTtcclxuICBcclxuICAgICAgLy8gVOG6oW8gxJHGoW4gaMOgbmdcclxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5jcmVhdGUob3JkZXJEYXRhLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gIFxyXG4gICAgICAvLyBU4bqhbyBjw6FjIG3hu6VjIHRyb25nIMSRxqFuIGjDoG5nIHbDoCBj4bqtcCBuaOG6rXQgc+G7kSBsxrDhu6NuZyB04buTbiBraG9cclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyRGV0YWlsRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeVBrKGl0ZW0uUHJvZHVjdElELCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9kdWN0LlF1YW50aXR5IDwgaXRlbS5RdWFudGl0eSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBT4bqjbiBwaOG6qW0ga2jDtG5nIMSR4bunIHPhu5EgbMaw4bujbmdgKTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gVOG6oW8gT3JkZXJJdGVtXHJcbiAgICAgICAgYXdhaXQgT3JkZXJJdGVtLmNyZWF0ZSh7XHJcbiAgICAgICAgICBPcmRlcklEOiBvcmRlci5PcmRlcklELFxyXG4gICAgICAgICAgUHJvZHVjdElEOiBpdGVtLlByb2R1Y3RJRCxcclxuICAgICAgICAgIFF1YW50aXR5OiBpdGVtLlF1YW50aXR5LFxyXG4gICAgICAgIH0sIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgXHJcbiAgICAgICAgLy8gQ+G6rXAgbmjhuq10IHPhu5EgbMaw4bujbmcgdOG7k24ga2hvXHJcbiAgICAgICAgcHJvZHVjdC5RdWFudGl0eSAtPSBpdGVtLlF1YW50aXR5O1xyXG4gICAgICAgIGF3YWl0IHByb2R1Y3Quc2F2ZSh7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihvcmRlcik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGdldEFsbE9yZGVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZEFsbCh7XHJcbiAgICAgICAgaW5jbHVkZTogW09yZGVyRGV0YWlsXVxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ob3JkZXJzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0T3JkZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlQayhpZCwge1xyXG4gICAgICAgIGluY2x1ZGU6IFtPcmRlckRldGFpbF1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghb3JkZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0tow7RuZyB0w6xtIHRo4bqleSBz4bqjbiBwaOG6qW0nIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG9yZGVyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlT3JkZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBvcmRlckRhdGEsIG9yZGVyRGV0YWlsRGF0YSB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB0ID0gYXdhaXQgc2VxdWVsaXplLnRyYW5zYWN0aW9uKCk7XHJcbiAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeVBrKGlkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltJyB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBhd2FpdCBvcmRlci51cGRhdGUob3JkZXJEYXRhLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gIFxyXG4gICAgICAvLyBYw7NhIGPDoWMgbeG7pWMgdHJvbmcgxJHGoW4gaMOgbmcgY8WpXHJcbiAgICAgIGF3YWl0IE9yZGVySXRlbS5kZXN0cm95KHtcclxuICAgICAgICB3aGVyZTogeyBPcmRlcklEOiBpZCB9LFxyXG4gICAgICAgIHRyYW5zYWN0aW9uOiB0XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICAvLyBU4bqhbyBjw6FjIG3hu6VjIHRyb25nIMSRxqFuIGjDoG5nIG3hu5tpIHbDoCBj4bqtcCBuaOG6rXQgc+G7kSBsxrDhu6NuZyB04buTbiBraG9cclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyRGV0YWlsRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeVBrKGl0ZW0uUHJvZHVjdElELCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9kdWN0LlF1YW50aXR5IDwgaXRlbS5RdWFudGl0eSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBT4bqjbiBwaOG6qW0ga2jDtG5nIMSR4bunIHPhu5EgbMaw4bujbmdgKTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gVOG6oW8gT3JkZXJJdGVtXHJcbiAgICAgICAgYXdhaXQgT3JkZXJJdGVtLmNyZWF0ZSh7XHJcbiAgICAgICAgICBPcmRlcklEOiBvcmRlci5PcmRlcklELFxyXG4gICAgICAgICAgUHJvZHVjdElEOiBpdGVtLlByb2R1Y3RJRCxcclxuICAgICAgICAgIFF1YW50aXR5OiBpdGVtLlF1YW50aXR5LFxyXG4gICAgICAgIH0sIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgXHJcbiAgICAgICAgLy8gQ+G6rXAgbmjhuq10IHPhu5EgbMaw4bujbmcgdOG7k24ga2hvXHJcbiAgICAgICAgcHJvZHVjdC5RdWFudGl0eSAtPSBpdGVtLlF1YW50aXR5O1xyXG4gICAgICAgIGF3YWl0IHByb2R1Y3Quc2F2ZSh7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG9yZGVyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGF3YWl0IHQucm9sbGJhY2soKTtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVPcmRlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB0ID0gYXdhaXQgc2VxdWVsaXplLnRyYW5zYWN0aW9uKCk7XHJcbiAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeVBrKGlkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdLaMO0bmcgdMOsbSB0aOG6pXkgxJHGoW4gaMOgbmcnIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIFjDs2EgY8OhYyBt4bulYyB0cm9uZyDEkcahbiBow6BuZ1xyXG4gICAgICBhd2FpdCBPcmRlckl0ZW0uZGVzdHJveSh7XHJcbiAgICAgICAgd2hlcmU6IHsgT3JkZXJJRDogaWQgfSxcclxuICAgICAgICB0cmFuc2FjdGlvbjogdFxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgLy8gWMOzYSDEkcahbiBow6BuZ1xyXG4gICAgICBhd2FpdCBvcmRlci5kZXN0cm95KHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgXHJcbiAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1jDs2EgxJHGoW4gaMOgbmcgdGjDoG5oIGPDtG5nJyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGF3YWl0IHQucm9sbGJhY2soKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlT3JkZXIsXHJcbiAgICBnZXRBbGxPcmRlcixcclxuICAgIGdldE9yZGVyLFxyXG4gICAgdXBkYXRlT3JkZXIsXHJcbiAgICBkZWxldGVPcmRlclxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3hDLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU1FLFdBQVcsR0FBR0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3BELE1BQU1HLFlBQVksR0FBR0gsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1JLFdBQVcsR0FBR0QsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2pELE1BQU1DLENBQUMsR0FBRyxNQUFNQyxTQUFTLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBRXZDLElBQUk7SUFDRixNQUFNO01BQUVDLFNBQVM7TUFBRUM7SUFBZ0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7O0lBRS9DO0lBQ0EsTUFBTUMsS0FBSyxHQUFHLE1BQU1kLEtBQUssQ0FBQ2UsTUFBTSxDQUFDSixTQUFTLEVBQUU7TUFBRUQsV0FBVyxFQUFFRjtJQUFFLENBQUMsQ0FBQzs7SUFFL0Q7SUFDQSxLQUFLLE1BQU1RLElBQUksSUFBSUosZUFBZSxFQUFFO01BQ2xDLE1BQU1LLE9BQU8sR0FBRyxNQUFNZixPQUFPLENBQUNnQixRQUFRLENBQUNGLElBQUksQ0FBQ0csU0FBUyxFQUFFO1FBQUVULFdBQVcsRUFBRUY7TUFBRSxDQUFDLENBQUM7TUFDMUUsSUFBSSxDQUFDUyxPQUFPLEVBQUU7UUFDWixNQUFNLElBQUlHLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQztNQUM1QztNQUNB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","map":{"version":3,"names":["Order","require","Product","OrderDetail","asyncHandler","createOrder","req","res","t","sequelize","transaction","orderData","orderDetailData","body","order","create","item","product","findByPk","ProductID","Error","Quantity","OrderItem","OrderID","save","commit","status","json","error","rollback","message","getAllOrder","orders","findAll","include","getOrder","id","params","updateOrder","update","destroy","where","deleteOrder","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["order_controller.js"],"sourcesContent":["const Order = require('../Models/order');\r\nconst Product = require('../Models/product');\r\nconst OrderDetail = require('../Models/orderdetail');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createOrder = asyncHandler(async (req, res) => {\r\n    const t = await sequelize.transaction();\r\n  \r\n    try {\r\n      const { orderData, orderDetailData } = req.body;\r\n  \r\n      // Tạo đơn hàng\r\n      const order = await Order.create(orderData, { transaction: t });\r\n  \r\n      // Tạo các mục trong đơn hàng và cập nhật số lượng tồn kho\r\n      for (const item of orderDetailData) {\r\n        const product = await Product.findByPk(item.ProductID, { transaction: t });\r\n        if (!product) {\r\n          throw new Error(`Không tìm thấy sản phẩm`);\r\n        }\r\n        if (product.Quantity < item.Quantity) {\r\n          throw new Error(`Sản phẩm không đủ số lượng`);\r\n        }\r\n  \r\n        // Tạo OrderItem\r\n        await OrderItem.create({\r\n          OrderID: order.OrderID,\r\n          ProductID: item.ProductID,\r\n          Quantity: item.Quantity,\r\n        }, { transaction: t });\r\n  \r\n        // Cập nhật số lượng tồn kho\r\n        product.Quantity -= item.Quantity;\r\n        await product.save({ transaction: t });\r\n      }\r\n  \r\n      await t.commit();\r\n      return res.status(201).json(order);\r\n    } catch (error) {\r\n      await t.rollback();\r\n      return res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getAllOrder = asyncHandler(async (req, res) => {\r\n    try {\r\n      const orders = await Order.findAll({\r\n        include: [OrderDetail]\r\n      });\r\n      res.status(200).json(orders);\r\n    } catch (error) {\r\n      res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getOrder = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    try {\r\n      const order = await Order.findByPk(id, {\r\n        include: [OrderDetail]\r\n      });\r\n      if (!order) {\r\n        return res.status(404).json({ error: 'Không tìm thấy sản phẩm' });\r\n      }\r\n      res.status(200).json(order);\r\n    } catch (error) {\r\n      res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst updateOrder = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    const { orderData, orderDetailData } = req.body;\r\n    const t = await sequelize.transaction();\r\n  \r\n    try {\r\n      const order = await Order.findByPk(id, { transaction: t });\r\n      if (!order) {\r\n        return res.status(404).json({ error: 'Không tìm thấy sản phẩm' });\r\n      }\r\n  \r\n      await order.update(orderData, { transaction: t });\r\n  \r\n      // Xóa các mục trong đơn hàng cũ\r\n      await OrderItem.destroy({\r\n        where: { OrderID: id },\r\n        transaction: t\r\n      });\r\n  \r\n      // Tạo các mục trong đơn hàng mới và cập nhật số lượng tồn kho\r\n      for (const item of orderDetailData) {\r\n        const product = await Product.findByPk(item.ProductID, { transaction: t });\r\n        if (!product) {\r\n          throw new Error(`Không tìm thấy sản phẩm`);\r\n        }\r\n        if (product.Quantity < item.Quantity) {\r\n          throw new Error(`Sản phẩm không đủ số lượng`);\r\n        }\r\n  \r\n        // Tạo OrderItem\r\n        await OrderItem.create({\r\n          OrderID: order.OrderID,\r\n          ProductID: item.ProductID,\r\n          Quantity: item.Quantity,\r\n        }, { transaction: t });\r\n  \r\n        // Cập nhật số lượng tồn kho\r\n        product.Quantity -= item.Quantity;\r\n        await product.save({ transaction: t });\r\n      }\r\n  \r\n      await t.commit();\r\n      res.status(200).json(order);\r\n    } catch (error) {\r\n      await t.rollback();\r\n      res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst deleteOrder = asyncHandler(async (req, res) => {\r\n    const { id } = req.params;\r\n    const t = await sequelize.transaction();\r\n  \r\n    try {\r\n      const order = await Order.findByPk(id, { transaction: t });\r\n      if (!order) {\r\n        return res.status(404).json({ error: 'Không tìm thấy đơn hàng' });\r\n      }\r\n  \r\n      // Xóa các mục trong đơn hàng\r\n      await OrderItem.destroy({\r\n        where: { OrderID: id },\r\n        transaction: t\r\n      });\r\n  \r\n      // Xóa đơn hàng\r\n      await order.destroy({ transaction: t });\r\n  \r\n      await t.commit();\r\n      res.status(200).json({ message: 'Xóa đơn hàng thành công' });\r\n    } catch (error) {\r\n      await t.rollback();\r\n      res.status(500).json({ error: error.message });\r\n    }\r\n  });\r\n\r\nmodule.exports = {\r\n    createOrder,\r\n    getAllOrder,\r\n    getOrder,\r\n    updateOrder,\r\n    deleteOrder\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718121182000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\orderdetail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class OrderDetail extends Model {\n    static associate(models) {\n      // Định nghĩa mối quan hệ với Order và Product\n      OrderDetail.belongsTo(models.Order, {\n        foreignKey: 'OrderID',\n        as: 'Order'\n      });\n      OrderDetail.belongsTo(models.Product, {\n        foreignKey: 'ProductID',\n        as: 'Product'\n      });\n    }\n  }\n  OrderDetail.init({\n    OrderID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      references: {\n        model: 'Order',\n        // Tên bảng Orders trong database\n        key: 'OrderID'\n      }\n    },\n    ProductID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      references: {\n        model: 'Product',\n        // Tên bảng Products trong database\n        key: 'ProductID'\n      }\n    },\n    Quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'OrderDetail',\n    tableName: 'OrderDetails',\n    // Tên bảng trong database\n    timestamps: false // Không sử dụng timestamps\n  });\n  return OrderDetail;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiT3JkZXJEZXRhaWwiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJiZWxvbmdzVG8iLCJPcmRlciIsImZvcmVpZ25LZXkiLCJhcyIsIlByb2R1Y3QiLCJpbml0IiwiT3JkZXJJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsIlByb2R1Y3RJRCIsIlF1YW50aXR5IiwibW9kZWxOYW1lIiwidGFibGVOYW1lIiwidGltZXN0YW1wcyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsib3JkZXJkZXRhaWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgY2xhc3MgT3JkZXJEZXRhaWwgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAvLyDEkOG7i25oIG5naMSpYSBt4buRaSBxdWFuIGjhu4cgduG7m2kgT3JkZXIgdsOgIFByb2R1Y3RcclxuICAgICAgT3JkZXJEZXRhaWwuYmVsb25nc1RvKG1vZGVscy5PcmRlciwgeyBmb3JlaWduS2V5OiAnT3JkZXJJRCcsIGFzOiAnT3JkZXInIH0pO1xyXG4gICAgICBPcmRlckRldGFpbC5iZWxvbmdzVG8obW9kZWxzLlByb2R1Y3QsIHsgZm9yZWlnbktleTogJ1Byb2R1Y3RJRCcsIGFzOiAnUHJvZHVjdCcgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBPcmRlckRldGFpbC5pbml0KHtcclxuICAgIE9yZGVySUQ6IHtcclxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXHJcbiAgICAgIHJlZmVyZW5jZXM6IHtcclxuICAgICAgICBtb2RlbDogJ09yZGVyJywgLy8gVMOqbiBi4bqjbmcgT3JkZXJzIHRyb25nIGRhdGFiYXNlXHJcbiAgICAgICAga2V5OiAnT3JkZXJJRCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFByb2R1Y3RJRDoge1xyXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcclxuICAgICAgcmVmZXJlbmNlczoge1xyXG4gICAgICAgIG1vZGVsOiAnUHJvZHVjdCcsIC8vIFTDqm4gYuG6o25nIFByb2R1Y3RzIHRyb25nIGRhdGFiYXNlXHJcbiAgICAgICAga2V5OiAnUHJvZHVjdElEJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgUXVhbnRpdHk6IHtcclxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICB9LFxyXG4gIH0sIHtcclxuICAgIHNlcXVlbGl6ZSxcclxuICAgIG1vZGVsTmFtZTogJ09yZGVyRGV0YWlsJyxcclxuICAgIHRhYmxlTmFtZTogJ09yZGVyRGV0YWlscycsIC8vIFTDqm4gYuG6o25nIHRyb25nIGRhdGFiYXNlXHJcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSwgLy8gS2jDtG5nIHPhu60gZOG7pW5nIHRpbWVzdGFtcHNcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIE9yZGVyRGV0YWlsO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDekMsTUFBTUMsV0FBVyxTQUFTTixLQUFLLENBQUM7SUFDOUIsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCO01BQ0FGLFdBQVcsQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNFLEtBQUssRUFBRTtRQUFFQyxVQUFVLEVBQUUsU0FBUztRQUFFQyxFQUFFLEVBQUU7TUFBUSxDQUFDLENBQUM7TUFDM0VOLFdBQVcsQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNLLE9BQU8sRUFBRTtRQUFFRixVQUFVLEVBQUUsV0FBVztRQUFFQyxFQUFFLEVBQUU7TUFBVSxDQUFDLENBQUM7SUFDbkY7RUFDRjtFQUVBTixXQUFXLENBQUNRLElBQUksQ0FBQztJQUNmQyxPQUFPLEVBQUU7TUFDUEMsSUFBSSxFQUFFWCxTQUFTLENBQUNZLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxPQUFPO1FBQUU7UUFDaEJDLEdBQUcsRUFBRTtNQUNQO0lBQ0YsQ0FBQztJQUNEQyxTQUFTLEVBQUU7TUFDVFAsSUFBSSxFQUFFWCxTQUFTLENBQUNZLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxTQUFTO1FBQUU7UUFDbEJDLEdBQUcsRUFBRTtNQUNQO0lBQ0YsQ0FBQztJQUNERSxRQUFRLEVBQUU7TUFDUlIsSUFBSSxFQUFFWCxTQUFTLENBQUNZLE9BQU87TUFDdkJDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQyxFQUFFO0lBQ0RkLFNBQVM7SUFDVHFCLFNBQVMsRUFBRSxhQUFhO0lBQ3hCQyxTQUFTLEVBQUUsY0FBYztJQUFFO0lBQzNCQyxVQUFVLEVBQUUsS0FBSyxDQUFFO0VBQ3JCLENBQUMsQ0FBQztFQUVGLE9BQU9yQixXQUFXO0FBQ3BCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","OrderDetail","associate","models","belongsTo","Order","foreignKey","as","Product","init","OrderID","type","INTEGER","allowNull","primaryKey","references","model","key","ProductID","Quantity","modelName","tableName","timestamps"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["orderdetail.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class OrderDetail extends Model {\r\n    static associate(models) {\r\n      // Định nghĩa mối quan hệ với Order và Product\r\n      OrderDetail.belongsTo(models.Order, { foreignKey: 'OrderID', as: 'Order' });\r\n      OrderDetail.belongsTo(models.Product, { foreignKey: 'ProductID', as: 'Product' });\r\n    }\r\n  }\r\n\r\n  OrderDetail.init({\r\n    OrderID: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n      primaryKey: true,\r\n      references: {\r\n        model: 'Order', // Tên bảng Orders trong database\r\n        key: 'OrderID'\r\n      }\r\n    },\r\n    ProductID: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n      primaryKey: true,\r\n      references: {\r\n        model: 'Product', // Tên bảng Products trong database\r\n        key: 'ProductID'\r\n      }\r\n    },\r\n    Quantity: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n    },\r\n  }, {\r\n    sequelize,\r\n    modelName: 'OrderDetail',\r\n    tableName: 'OrderDetails', // Tên bảng trong database\r\n    timestamps: false, // Không sử dụng timestamps\r\n  });\r\n\r\n  return OrderDetail;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,WAAW,SAASN,KAAK,CAAC;IAC9B,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,WAAW,CAACG,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,UAAU,EAAE,SAAS;QAAEC,EAAE,EAAE;MAAQ,CAAC,CAAC;MAC3EN,WAAW,CAACG,SAAS,CAACD,MAAM,CAACK,OAAO,EAAE;QAAEF,UAAU,EAAE,WAAW;QAAEC,EAAE,EAAE;MAAU,CAAC,CAAC;IACnF;EACF;EAEAN,WAAW,CAACQ,IAAI,CAAC;IACfC,OAAO,EAAE;MACPC,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QAAE;QAChBC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,SAAS,EAAE;MACTP,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE;QACVC,KAAK,EAAE,SAAS;QAAE;QAClBC,GAAG,EAAE;MACP;IACF,CAAC;IACDE,QAAQ,EAAE;MACRR,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE;IACb;EACF,CAAC,EAAE;IACDd,SAAS;IACTqB,SAAS,EAAE,aAAa;IACxBC,SAAS,EAAE,cAAc;IAAE;IAC3BC,UAAU,EAAE,KAAK,CAAE;EACrB,CAAC,CAAC;EAEF,OAAOrB,WAAW;AACpB,CAAC","ignoreList":[]}},"mtime":1718439433383},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require(__dirname + '/../config/config.json')[env];\nconst db = {};\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\nfs.readdirSync(__dirname).filter(file => {\n  return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js' && file.indexOf('.test.js') === -1;\n}).forEach(file => {\n  const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n  db[model.name] = model;\n});\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImJhc2VuYW1lIiwiX19maWxlbmFtZSIsImVudiIsIk5PREVfRU5WIiwiY29uZmlnIiwiX19kaXJuYW1lIiwiZGIiLCJzZXF1ZWxpemUiLCJ1c2VfZW52X3ZhcmlhYmxlIiwiZGF0YWJhc2UiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicmVhZGRpclN5bmMiLCJmaWx0ZXIiLCJmaWxlIiwiaW5kZXhPZiIsInNsaWNlIiwiZm9yRWFjaCIsIm1vZGVsIiwiam9pbiIsIkRhdGFUeXBlcyIsIm5hbWUiLCJPYmplY3QiLCJrZXlzIiwibW9kZWxOYW1lIiwiYXNzb2NpYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgU2VxdWVsaXplID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5jb25zdCBwcm9jZXNzID0gcmVxdWlyZSgncHJvY2VzcycpO1xuY29uc3QgYmFzZW5hbWUgPSBwYXRoLmJhc2VuYW1lKF9fZmlsZW5hbWUpO1xuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JztcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoX19kaXJuYW1lICsgJy8uLi9jb25maWcvY29uZmlnLmpzb24nKVtlbnZdO1xuY29uc3QgZGIgPSB7fTtcblxubGV0IHNlcXVlbGl6ZTtcbmlmIChjb25maWcudXNlX2Vudl92YXJpYWJsZSkge1xuICBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52W2NvbmZpZy51c2VfZW52X3ZhcmlhYmxlXSwgY29uZmlnKTtcbn0gZWxzZSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlLCBjb25maWcudXNlcm5hbWUsIGNvbmZpZy5wYXNzd29yZCwgY29uZmlnKTtcbn1cblxuZnNcbiAgLnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcihmaWxlID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgZmlsZS5pbmRleE9mKCcuJykgIT09IDAgJiZcbiAgICAgIGZpbGUgIT09IGJhc2VuYW1lICYmXG4gICAgICBmaWxlLnNsaWNlKC0zKSA9PT0gJy5qcycgJiZcbiAgICAgIGZpbGUuaW5kZXhPZignLnRlc3QuanMnKSA9PT0gLTFcbiAgICApO1xuICB9KVxuICAuZm9yRWFjaChmaWxlID0+IHtcbiAgICBjb25zdCBtb2RlbCA9IHJlcXVpcmUocGF0aC5qb2luKF9fZGlybmFtZSwgZmlsZSkpKHNlcXVlbGl6ZSwgU2VxdWVsaXplLkRhdGFUeXBlcyk7XG4gICAgZGJbbW9kZWwubmFtZV0gPSBtb2RlbDtcbiAgfSk7XG5cbk9iamVjdC5rZXlzKGRiKS5mb3JFYWNoKG1vZGVsTmFtZSA9PiB7XG4gIGlmIChkYlttb2RlbE5hbWVdLmFzc29jaWF0ZSkge1xuICAgIGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKGRiKTtcbiAgfVxufSk7XG5cbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcbmRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBkYjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWixNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1FLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUN0QyxNQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUksUUFBUSxHQUFHSCxJQUFJLENBQUNHLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDO0FBQzFDLE1BQU1DLEdBQUcsR0FBR0gsT0FBTyxDQUFDRyxHQUFHLENBQUNDLFFBQVEsSUFBSSxhQUFhO0FBQ2pELE1BQU1DLE1BQU0sR0FBR1IsT0FBTyxDQUFDUyxTQUFTLEdBQUcsd0JBQXdCLENBQUMsQ0FBQ0gsR0FBRyxDQUFDO0FBQ2pFLE1BQU1JLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFYixJQUFJQyxTQUFTO0FBQ2IsSUFBSUgsTUFBTSxDQUFDSSxnQkFBZ0IsRUFBRTtFQUMzQkQsU0FBUyxHQUFHLElBQUlULFNBQVMsQ0FBQ0MsT0FBTyxDQUFDRyxHQUFHLENBQUNFLE1BQU0sQ0FBQ0ksZ0JBQWdCLENBQUMsRUFBRUosTUFBTSxDQUFDO0FBQ3pFLENBQUMsTUFBTTtFQUNMRyxTQUFTLEdBQUcsSUFBSVQsU0FBUyxDQUFDTSxNQUFNLENBQUNLLFFBQVEsRUFBRUwsTUFBTSxDQUFDTSxRQUFRLEVBQUVOLE1BQU0sQ0FBQ08sUUFBUSxFQUFFUCxNQUFNLENBQUM7QUFDdEY7QUFFQVQsRUFBRSxDQUNDaUIsV0FBVyxDQUFDUCxTQUFTLENBQUMsQ0FDdEJRLE1BQU0sQ0FBQ0MsSUFBSSxJQUFJO0VBQ2QsT0FDRUEsSUFBSSxDQUFDQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUN2QkQsSUFBSSxLQUFLZCxRQUFRLElBQ2pCYyxJQUFJLENBQUNFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssSUFDeEJGLElBQUksQ0FBQ0MsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUVuQyxDQUFDLENBQUMsQ0FDREUsT0FBTyxDQUFDSCxJQUFJLElBQUk7RUFDZixNQUFNSSxLQUFLLEdBQUd0QixPQUFPLENBQUNDLElBQUksQ0FBQ3NCLElBQUksQ0FBQ2QsU0FBUyxFQUFFUyxJQUFJLENBQUMsQ0FBQyxDQUFDUCxTQUFTLEVBQUVULFNBQVMsQ0FBQ3NCLFNBQVMsQ0FBQztFQUNqRmQsRUFBRSxDQUFDWSxLQUFLLENBQUNHLElBQUksQ0FBQyxHQUFHSCxLQUFLO0FBQ3hCLENBQUMsQ0FBQztBQUVKSSxNQUFNLENBQUNDLElBQUksQ0FBQ2pCLEVBQUUsQ0FBQyxDQUFDVyxPQUFPLENBQUNPLFNBQVMsSUFBSTtFQUNuQyxJQUFJbEIsRUFBRSxDQUFDa0IsU0FBUyxDQUFDLENBQUNDLFNBQVMsRUFBRTtJQUMzQm5CLEVBQUUsQ0FBQ2tCLFNBQVMsQ0FBQyxDQUFDQyxTQUFTLENBQUNuQixFQUFFLENBQUM7RUFDN0I7QUFDRixDQUFDLENBQUM7QUFFRkEsRUFBRSxDQUFDQyxTQUFTLEdBQUdBLFNBQVM7QUFDeEJELEVBQUUsQ0FBQ1IsU0FBUyxHQUFHQSxTQUFTO0FBRXhCNEIsTUFBTSxDQUFDQyxPQUFPLEdBQUdyQixFQUFFIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","config","__dirname","db","sequelize","use_env_variable","database","username","password","readdirSync","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["index.js"],"sourcesContent":["'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require(__dirname + '/../config/config.json')[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter(file => {\n    return (\n      file.indexOf('.') !== 0 &&\n      file !== basename &&\n      file.slice(-3) === '.js' &&\n      file.indexOf('.test.js') === -1\n    );\n  })\n  .forEach(file => {\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMI,QAAQ,GAAGH,IAAI,CAACG,QAAQ,CAACC,UAAU,CAAC;AAC1C,MAAMC,GAAG,GAAGH,OAAO,CAACG,GAAG,CAACC,QAAQ,IAAI,aAAa;AACjD,MAAMC,MAAM,GAAGR,OAAO,CAACS,SAAS,GAAG,wBAAwB,CAAC,CAACH,GAAG,CAAC;AACjE,MAAMI,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIH,MAAM,CAACI,gBAAgB,EAAE;EAC3BD,SAAS,GAAG,IAAIT,SAAS,CAACC,OAAO,CAACG,GAAG,CAACE,MAAM,CAACI,gBAAgB,CAAC,EAAEJ,MAAM,CAAC;AACzE,CAAC,MAAM;EACLG,SAAS,GAAG,IAAIT,SAAS,CAACM,MAAM,CAACK,QAAQ,EAAEL,MAAM,CAACM,QAAQ,EAAEN,MAAM,CAACO,QAAQ,EAAEP,MAAM,CAAC;AACtF;AAEAT,EAAE,CACCiB,WAAW,CAACP,SAAS,CAAC,CACtBQ,MAAM,CAACC,IAAI,IAAI;EACd,OACEA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IACvBD,IAAI,KAAKd,QAAQ,IACjBc,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAEnC,CAAC,CAAC,CACDE,OAAO,CAACH,IAAI,IAAI;EACf,MAAMI,KAAK,GAAGtB,OAAO,CAACC,IAAI,CAACsB,IAAI,CAACd,SAAS,EAAES,IAAI,CAAC,CAAC,CAACP,SAAS,EAAET,SAAS,CAACsB,SAAS,CAAC;EACjFd,EAAE,CAACY,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACjB,EAAE,CAAC,CAACW,OAAO,CAACO,SAAS,IAAI;EACnC,IAAIlB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BnB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,CAACnB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACR,SAAS,GAAGA,SAAS;AAExB4B,MAAM,CAACC,OAAO,GAAGrB,EAAE","ignoreList":[]}},"mtime":1718423998676},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nconst bcrypt = require('bcrypt');\nmodule.exports = (sequelize, DataTypes) => {\n  class User extends Model {\n    static associate(models) {\n      // Define associations here\n      User.hasMany(models.Employee, {\n        foreignKey: 'Phone',\n        as: 'Employees'\n      });\n      // Example of association with another model (Post)\n      // This assumes there is a Post model with a userId foreign key\n    }\n    isCorrectPassword(password) {\n      return password = this.Password;\n    }\n  }\n  User.init({\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Password: DataTypes.STRING,\n    Role: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'User',\n    timestamps: false\n  });\n  return User;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJiY3J5cHQiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiVXNlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJFbXBsb3llZSIsImZvcmVpZ25LZXkiLCJhcyIsImlzQ29ycmVjdFBhc3N3b3JkIiwicGFzc3dvcmQiLCJQYXNzd29yZCIsImluaXQiLCJOYW1lIiwiU1RSSU5HIiwiUGhvbmUiLCJSb2xlIiwiSU5URUdFUiIsIm1vZGVsTmFtZSIsInRpbWVzdGFtcHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgY2xhc3MgVXNlciBleHRlbmRzIE1vZGVsIHtcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gRGVmaW5lIGFzc29jaWF0aW9ucyBoZXJlXG4gICAgICBVc2VyLmhhc01hbnkobW9kZWxzLkVtcGxveWVlLCB7IGZvcmVpZ25LZXk6ICdQaG9uZScsIGFzOiAnRW1wbG95ZWVzJ30pO1xuICAgICAgLy8gRXhhbXBsZSBvZiBhc3NvY2lhdGlvbiB3aXRoIGFub3RoZXIgbW9kZWwgKFBvc3QpXG4gICAgICAvLyBUaGlzIGFzc3VtZXMgdGhlcmUgaXMgYSBQb3N0IG1vZGVsIHdpdGggYSB1c2VySWQgZm9yZWlnbiBrZXlcbiAgICB9XG4gICAgaXNDb3JyZWN0UGFzc3dvcmQocGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBwYXNzd29yZCA9IHRoaXMuUGFzc3dvcmQ7XG4gICAgfVxuICB9XG4gIFxuICBVc2VyLmluaXQoe1xuICAgIE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsICAgICAgXG4gICAgUGhvbmU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgUGFzc3dvcmQ6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgUm9sZTogRGF0YVR5cGVzLklOVEVHRVJcbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdVc2VyJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSwgICAgICAgICBcbiAgfSk7XG4gIHJldHVybiBVc2VyO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNO0VBQUVBO0FBQU0sQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3RDLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQ0UsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDekMsTUFBTUMsSUFBSSxTQUFTUCxLQUFLLENBQUM7SUFDdkIsT0FBT1EsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCO01BQ0FGLElBQUksQ0FBQ0csT0FBTyxDQUFDRCxNQUFNLENBQUNFLFFBQVEsRUFBRTtRQUFFQyxVQUFVLEVBQUUsT0FBTztRQUFFQyxFQUFFLEVBQUU7TUFBVyxDQUFDLENBQUM7TUFDdEU7TUFDQTtJQUNGO0lBQ0FDLGlCQUFpQkEsQ0FBQ0MsUUFBUSxFQUFFO01BQzFCLE9BQU9BLFFBQVEsR0FBRyxJQUFJLENBQUNDLFFBQVE7SUFDakM7RUFDRjtFQUVBVCxJQUFJLENBQUNVLElBQUksQ0FBQztJQUNSQyxJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsTUFBTTtJQUN0QkMsS0FBSyxFQUFFZCxTQUFTLENBQUNhLE1BQU07SUFDdkJILFFBQVEsRUFBRVYsU0FBUyxDQUFDYSxNQUFNO0lBQzFCRSxJQUFJLEVBQUVmLFNBQVMsQ0FBQ2dCO0VBQ2xCLENBQUMsRUFBRTtJQUNEakIsU0FBUztJQUNUa0IsU0FBUyxFQUFFLE1BQU07SUFDakJDLFVBQVUsRUFBRTtFQUNkLENBQUMsQ0FBQztFQUNGLE9BQU9qQixJQUFJO0FBQ2IsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","bcrypt","module","exports","sequelize","DataTypes","User","associate","models","hasMany","Employee","foreignKey","as","isCorrectPassword","password","Password","init","Name","STRING","Phone","Role","INTEGER","modelName","timestamps"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["user.js"],"sourcesContent":["'use strict';\nconst { Model } = require('sequelize');\nconst bcrypt = require('bcrypt');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class User extends Model {\n    static associate(models) {\n      // Define associations here\n      User.hasMany(models.Employee, { foreignKey: 'Phone', as: 'Employees'});\n      // Example of association with another model (Post)\n      // This assumes there is a Post model with a userId foreign key\n    }\n    isCorrectPassword(password) {\n      return password = this.Password;\n    }\n  }\n  \n  User.init({\n    Name: DataTypes.STRING,      \n    Phone: DataTypes.STRING,\n    Password: DataTypes.STRING,\n    Role: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'User',\n    timestamps: false,         \n  });\n  return User;\n};\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhCE,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASP,KAAK,CAAC;IACvB,OAAOQ,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,IAAI,CAACG,OAAO,CAACD,MAAM,CAACE,QAAQ,EAAE;QAAEC,UAAU,EAAE,OAAO;QAAEC,EAAE,EAAE;MAAW,CAAC,CAAC;MACtE;MACA;IACF;IACAC,iBAAiBA,CAACC,QAAQ,EAAE;MAC1B,OAAOA,QAAQ,GAAG,IAAI,CAACC,QAAQ;IACjC;EACF;EAEAT,IAAI,CAACU,IAAI,CAAC;IACRC,IAAI,EAAEZ,SAAS,CAACa,MAAM;IACtBC,KAAK,EAAEd,SAAS,CAACa,MAAM;IACvBH,QAAQ,EAAEV,SAAS,CAACa,MAAM;IAC1BE,IAAI,EAAEf,SAAS,CAACgB;EAClB,CAAC,EAAE;IACDjB,SAAS;IACTkB,SAAS,EAAE,MAAM;IACjBC,UAAU,EAAE;EACd,CAAC,CAAC;EACF,OAAOjB,IAAI;AACb,CAAC","ignoreList":[]}},"mtime":1718429740126},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Models\\\\voucher.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Voucher extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {}\n  }\n  Voucher.init({\n    Name: DataTypes.STRING,\n    Describes: DataTypes.STRING,\n    Percent: DataTypes.INTEGER,\n    Mincost: DataTypes.INTEGER,\n    Maxcost: DataTypes.INTEGER,\n    EXDate: DataTypes.DATE\n  }, {\n    sequelize,\n    modelName: 'Voucher'\n  });\n  return Voucher;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiVm91Y2hlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImluaXQiLCJOYW1lIiwiU1RSSU5HIiwiRGVzY3JpYmVzIiwiUGVyY2VudCIsIklOVEVHRVIiLCJNaW5jb3N0IiwiTWF4Y29zdCIsIkVYRGF0ZSIsIkRBVEUiLCJtb2RlbE5hbWUiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbInZvdWNoZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcclxuICAgIGNsYXNzIFZvdWNoZXIgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cclxuICAgICAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBWb3VjaGVyLmluaXQoe1xyXG4gICAgICAgIE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgICAgRGVzY3JpYmVzOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICAgIFBlcmNlbnQ6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgIE1pbmNvc3Q6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgIE1heGNvc3Q6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgIEVYRGF0ZTogRGF0YVR5cGVzLkRBVEUsXHJcbiAgICB9LCB7XHJcbiAgICAgICAgc2VxdWVsaXplLFxyXG4gICAgICAgIG1vZGVsTmFtZTogJ1ZvdWNoZXInLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVm91Y2hlcjtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUN0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsT0FBTyxTQUFTTixLQUFLLENBQUM7SUFDeEI7QUFDUjtBQUNBO0FBQ0E7QUFDQTtJQUNRLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRSxDQUV6QjtFQUNKO0VBQ0FGLE9BQU8sQ0FBQ0csSUFBSSxDQUFDO0lBQ1RDLElBQUksRUFBRUwsU0FBUyxDQUFDTSxNQUFNO0lBQ3RCQyxTQUFTLEVBQUVQLFNBQVMsQ0FBQ00sTUFBTTtJQUMzQkUsT0FBTyxFQUFFUixTQUFTLENBQUNTLE9BQU87SUFDMUJDLE9BQU8sRUFBRVYsU0FBUyxDQUFDUyxPQUFPO0lBQzFCRSxPQUFPLEVBQUVYLFNBQVMsQ0FBQ1MsT0FBTztJQUMxQkcsTUFBTSxFQUFFWixTQUFTLENBQUNhO0VBQ3RCLENBQUMsRUFBRTtJQUNDZCxTQUFTO0lBQ1RlLFNBQVMsRUFBRTtFQUNmLENBQUMsQ0FBQztFQUNGLE9BQU9iLE9BQU87QUFDbEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Voucher","associate","models","init","Name","STRING","Describes","Percent","INTEGER","Mincost","Maxcost","EXDate","DATE","modelName"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Models\\","sources":["voucher.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Voucher extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n\r\n        }\r\n    }\r\n    Voucher.init({\r\n        Name: DataTypes.STRING,\r\n        Describes: DataTypes.STRING,\r\n        Percent: DataTypes.INTEGER,\r\n        Mincost: DataTypes.INTEGER,\r\n        Maxcost: DataTypes.INTEGER,\r\n        EXDate: DataTypes.DATE,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Voucher',\r\n    });\r\n    return Voucher;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE,CAEzB;EACJ;EACAF,OAAO,CAACG,IAAI,CAAC;IACTC,IAAI,EAAEL,SAAS,CAACM,MAAM;IACtBC,SAAS,EAAEP,SAAS,CAACM,MAAM;IAC3BE,OAAO,EAAER,SAAS,CAACS,OAAO;IAC1BC,OAAO,EAAEV,SAAS,CAACS,OAAO;IAC1BE,OAAO,EAAEX,SAAS,CAACS,OAAO;IAC1BG,MAAM,EAAEZ,SAAS,CAACa;EACtB,CAAC,EAAE;IACCd,SAAS;IACTe,SAAS,EAAE;EACf,CAAC,CAAC;EACF,OAAOb,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718439428975},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\routes\\\\user_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst usercontroller = require('../controllers/user_controller');\nconst router = express.Router();\nrouter.post('/addUser', usercontroller.addUserByAdmin);\nrouter.post('/login', usercontroller.login);\nrouter.get('/Users/:id', usercontroller.logout);\nrouter.get('/getallUser', usercontroller.getAlluser);\nrouter.get('/Users/:id', usercontroller.getUsers);\nrouter.delete('/Users/:id', usercontroller.deleteUser);\nrouter.put('/Users/:id', usercontroller.updateUser);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJjb250cm9sbGVyIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImFkZFVzZXJCeUFkbWluIiwibG9naW4iLCJnZXQiLCJsb2dvdXQiLCJnZXRBbGx1c2VyIiwiZ2V0VXNlcnMiLCJkZWxldGUiLCJkZWxldGVVc2VyIiwicHV0IiwidXBkYXRlVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbInVzZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHVzZXJjb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdXNlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FkZFVzZXInLHVzZXJjb250cm9sbGVyLmFkZFVzZXJCeUFkbWluKTtcclxucm91dGVyLnBvc3QoJy9sb2dpbicsdXNlcmNvbnRyb2xsZXIubG9naW4pO1xyXG5yb3V0ZXIuZ2V0KCcvVXNlcnMvOmlkJyx1c2VyY29udHJvbGxlci5sb2dvdXQpO1xyXG5yb3V0ZXIuZ2V0KCcvZ2V0YWxsVXNlcicsdXNlcmNvbnRyb2xsZXIuZ2V0QWxsdXNlcik7XHJcbnJvdXRlci5nZXQoJy9Vc2Vycy86aWQnLHVzZXJjb250cm9sbGVyLmdldFVzZXJzKTtcclxucm91dGVyLmRlbGV0ZSgnL1VzZXJzLzppZCcsdXNlcmNvbnRyb2xsZXIuZGVsZXRlVXNlcik7XHJcbnJvdXRlci5wdXQoJy9Vc2Vycy86aWQnLHVzZXJjb250cm9sbGVyLnVwZGF0ZVVzZXIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsY0FBYyxHQUFHRCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFDaEUsTUFBTUUsTUFBTSxHQUFHSCxPQUFPLENBQUNJLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxVQUFVLEVBQUNILGNBQWMsQ0FBQ0ksY0FBYyxDQUFDO0FBQ3JESCxNQUFNLENBQUNFLElBQUksQ0FBQyxRQUFRLEVBQUNILGNBQWMsQ0FBQ0ssS0FBSyxDQUFDO0FBQzFDSixNQUFNLENBQUNLLEdBQUcsQ0FBQyxZQUFZLEVBQUNOLGNBQWMsQ0FBQ08sTUFBTSxDQUFDO0FBQzlDTixNQUFNLENBQUNLLEdBQUcsQ0FBQyxhQUFhLEVBQUNOLGNBQWMsQ0FBQ1EsVUFBVSxDQUFDO0FBQ25EUCxNQUFNLENBQUNLLEdBQUcsQ0FBQyxZQUFZLEVBQUNOLGNBQWMsQ0FBQ1MsUUFBUSxDQUFDO0FBQ2hEUixNQUFNLENBQUNTLE1BQU0sQ0FBQyxZQUFZLEVBQUNWLGNBQWMsQ0FBQ1csVUFBVSxDQUFDO0FBQ3JEVixNQUFNLENBQUNXLEdBQUcsQ0FBQyxZQUFZLEVBQUNaLGNBQWMsQ0FBQ2EsVUFBVSxDQUFDO0FBRWxEQyxNQUFNLENBQUNDLE9BQU8sR0FBR2QsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","usercontroller","router","Router","post","addUserByAdmin","login","get","logout","getAlluser","getUsers","delete","deleteUser","put","updateUser","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\routes\\","sources":["user_routes.js"],"sourcesContent":["const express = require('express');\r\nconst usercontroller = require('../controllers/user_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/addUser',usercontroller.addUserByAdmin);\r\nrouter.post('/login',usercontroller.login);\r\nrouter.get('/Users/:id',usercontroller.logout);\r\nrouter.get('/getallUser',usercontroller.getAlluser);\r\nrouter.get('/Users/:id',usercontroller.getUsers);\r\nrouter.delete('/Users/:id',usercontroller.deleteUser);\r\nrouter.put('/Users/:id',usercontroller.updateUser);\r\n\r\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,cAAc,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAChE,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,UAAU,EAACH,cAAc,CAACI,cAAc,CAAC;AACrDH,MAAM,CAACE,IAAI,CAAC,QAAQ,EAACH,cAAc,CAACK,KAAK,CAAC;AAC1CJ,MAAM,CAACK,GAAG,CAAC,YAAY,EAACN,cAAc,CAACO,MAAM,CAAC;AAC9CN,MAAM,CAACK,GAAG,CAAC,aAAa,EAACN,cAAc,CAACQ,UAAU,CAAC;AACnDP,MAAM,CAACK,GAAG,CAAC,YAAY,EAACN,cAAc,CAACS,QAAQ,CAAC;AAChDR,MAAM,CAACS,MAAM,CAAC,YAAY,EAACV,cAAc,CAACW,UAAU,CAAC;AACrDV,MAAM,CAACW,GAAG,CAAC,YAAY,EAACZ,cAAc,CAACa,UAAU,CAAC;AAElDC,MAAM,CAACC,OAAO,GAAGd,MAAM","ignoreList":[]}},"mtime":1718410671602},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\controllers\\\\user_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const db = require('../Models');\nconst User = require('../Models/user');\nconst Order = require('../Models/order');\nconst jwt = require('jsonwebtoken');\nconst asyncHandler = require('express-async-handler');\nconst {\n  generateAccessToken,\n  generateRefreshToken\n} = require('../middleware/jwt');\nconst addUserByAdmin = asyncHandler(async (req, res) => {\n  const {\n    Name,\n    Phone,\n    Password,\n    Role\n  } = req.body;\n  if (!Name || !Phone || !Password || !Role) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  const newUser = await db.User.create({\n    Name,\n    Phone,\n    Password,\n    Role\n  });\n  return res.status(200).json({\n    success: true,\n    mes: 'Thêm tài khoản thành công',\n    user: newUser\n  });\n});\nconst login = asyncHandler(async (req, res) => {\n  const {\n    Phone,\n    Password\n  } = req.body;\n  if (!Phone || !Password) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  const user = await db.User.findOne({\n    where: {\n      Phone: Phone\n    }\n  });\n  if (user && (await user.isCorrectPassword(Password))) {\n    const {\n      Password,\n      Role,\n      ...userData\n    } = user.toJSON();\n\n    // Create access token\n    const accessToken = generateAccessToken(user.id, Role);\n    // Create refresh token\n    const newRefreshToken = generateRefreshToken(user.id);\n\n    // Save refresh token in db\n    await user.update({\n      refreshToken: newRefreshToken\n    });\n\n    // Save refresh token in cookie\n    res.cookie('refreshToken', newRefreshToken, {\n      httpOnly: true,\n      maxAge: 7 * 24 * 60 * 60 * 1000\n    });\n    // Save access token in cookie\n    res.cookie('accessToken', accessToken, {\n      httpOnly: true,\n      maxAge: 30 * 60 * 1000\n    }); // 30 phút\n\n    return res.status(200).json({\n      success: true,\n      accessToken,\n      userData\n    });\n  } else {\n    return res.status(401).json({\n      success: false,\n      mes: \"Thông tin đăng nhập không chính xác\"\n    });\n  }\n});\nconst logout = asyncHandler(async (req, res) => {\n  const cookie = req.cookies;\n  if (!cookie || !cookie.refreshToken) {\n    return res.status(500).json({\n      success: false,\n      mes: \"Không có refresh token trong cookies\"\n    });\n  }\n  await db.User.findOneAndUpdate({\n    refreshToken: cookie.refreshToken\n  }, {\n    $unset: {\n      refreshToken: \"\"\n    }\n  });\n  res.clearCookie('refreshToken', {\n    httpOnly: true,\n    secure: true\n  });\n  return res.status(200).json({\n    success: true,\n    mes: 'Đăng xuất thành công'\n  });\n});\nconst getUsers = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    throw new Error(\"Đã có lỗi xảy ra, vui lòng thử lại\");\n  }\n  const user = await db.User.findByPk(uid, {\n    attributes: {\n      exclude: ['Password', 'refreshToken']\n    }\n  });\n  if (!user) {\n    return res.status(404).json({\n      success: false,\n      mes: \"Người dùng không được tìm thấy\"\n    });\n  }\n  return res.status(200).json({\n    success: true,\n    user: user\n  });\n});\n\n//lấy tất cả người dùng\nconst getAlluser = asyncHandler(async (req, res) => {\n  const response = await db.User.findAll({\n    attributes: {\n      exclude: ['Password', 'Role']\n    } // Loại bỏ trường 'Password'\n  });\n  return res.status(200).json({\n    success: response.length > 0,\n    users: response\n  });\n});\nconst deleteUser = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    return res.status(400).json({\n      success: false,\n      message: \"Thiếu thông tin người dùng cần xoá\"\n    });\n  }\n  try {\n    // Kiểm tra người dùng có tồn tại không\n    const user = await db.User.findByPk(uid);\n    if (!user) {\n      return res.status(404).json({\n        success: false,\n        message: \"Người dùng không tồn tại\"\n      });\n    }\n\n    // Xoá người dùng\n    await db.User.destroy({\n      where: {\n        id: uid\n      }\n    });\n    return res.status(200).json({\n      success: true,\n      message: `Người dùng với ID ${uid} đã được xoá`\n    });\n  } catch (error) {\n    // Xử lý lỗi\n    console.error(\"Lỗi khi xoá người dùng:\", error.message);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\n    });\n  }\n});\nconst updateUser = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    return res.status(400).json({\n      success: false,\n      message: \"Thiếu thông tin người dùng cần cập nhật\"\n    });\n  }\n  try {\n    const [updatedRowsCount, updatedUsers] = await db.User.update(req.body, {\n      where: {\n        id: uid\n      },\n      returning: true // Trả về các bản ghi đã được cập nhật\n    });\n    if (updatedRowsCount === 0 || !updatedUsers || updatedUsers.length === 0) {\n      return res.status(404).json({\n        success: false,\n        message: \"Người dùng không được tìm thấy hoặc không thể cập nhật\"\n      });\n    }\n    const updatedUser = updatedUsers[0].toJSON(); // Chuyển đổi thành đối tượng JSON\n\n    // Loại bỏ các trường nhạy cảm từ phản hồi\n    delete updatedUser.Password;\n    delete updatedUser.refreshToken;\n    return res.status(200).json({\n      success: true,\n      message: \"Cập nhật thành công\",\n      user: updatedUser\n    });\n  } catch (error) {\n    console.error(\"Lỗi khi cập nhật người dùng:\", error.message);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\n    });\n  }\n});\nmodule.exports = {\n  addUserByAdmin,\n  login,\n  logout,\n  getAlluser,\n  getUsers,\n  deleteUser,\n  updateUser\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJVc2VyIiwiT3JkZXIiLCJqd3QiLCJhc3luY0hhbmRsZXIiLCJnZW5lcmF0ZUFjY2Vzc1Rva2VuIiwiZ2VuZXJhdGVSZWZyZXNoVG9rZW4iLCJhZGRVc2VyQnlBZG1pbiIsInJlcSIsInJlcyIsIk5hbWUiLCJQaG9uZSIsIlBhc3N3b3JkIiwiUm9sZSIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lcyIsIm5ld1VzZXIiLCJjcmVhdGUiLCJ1c2VyIiwibG9naW4iLCJmaW5kT25lIiwid2hlcmUiLCJpc0NvcnJlY3RQYXNzd29yZCIsInVzZXJEYXRhIiwidG9KU09OIiwiYWNjZXNzVG9rZW4iLCJpZCIsIm5ld1JlZnJlc2hUb2tlbiIsInVwZGF0ZSIsInJlZnJlc2hUb2tlbiIsImNvb2tpZSIsImh0dHBPbmx5IiwibWF4QWdlIiwibG9nb3V0IiwiY29va2llcyIsImZpbmRPbmVBbmRVcGRhdGUiLCIkdW5zZXQiLCJjbGVhckNvb2tpZSIsInNlY3VyZSIsImdldFVzZXJzIiwidWlkIiwicGFyYW1zIiwiRXJyb3IiLCJmaW5kQnlQayIsImF0dHJpYnV0ZXMiLCJleGNsdWRlIiwiZ2V0QWxsdXNlciIsInJlc3BvbnNlIiwiZmluZEFsbCIsImxlbmd0aCIsInVzZXJzIiwiZGVsZXRlVXNlciIsIm1lc3NhZ2UiLCJkZXN0cm95IiwiZXJyb3IiLCJjb25zb2xlIiwidXBkYXRlVXNlciIsInVwZGF0ZWRSb3dzQ291bnQiLCJ1cGRhdGVkVXNlcnMiLCJyZXR1cm5pbmciLCJ1cGRhdGVkVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsidXNlcl9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9Nb2RlbHMvdXNlcicpO1xyXG5jb25zdCBPcmRlciA9IHJlcXVpcmUoJy4uL01vZGVscy9vcmRlcicpXHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuY29uc3QgeyBnZW5lcmF0ZUFjY2Vzc1Rva2VuLCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9qd3QnKTtcclxuXHJcbmNvbnN0IGFkZFVzZXJCeUFkbWluID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lLCBQaG9uZSwgUGFzc3dvcmQsIFJvbGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghTmFtZSB8fCAhUGhvbmUgfHwgIVBhc3N3b3JkIHx8ICFSb2xlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgZGIuVXNlci5jcmVhdGUoe1xyXG4gICAgICAgIE5hbWUsXHJcbiAgICAgICAgUGhvbmUsXHJcbiAgICAgICAgUGFzc3dvcmQsXHJcbiAgICAgICAgUm9sZVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lczogJ1Row6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmcnLFxyXG4gICAgICAgIHVzZXI6IG5ld1VzZXJcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGxvZ2luID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBQaG9uZSwgUGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghUGhvbmUgfHwgIVBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuVXNlci5maW5kT25lKHsgd2hlcmU6IHsgUGhvbmU6IFBob25lIH0gfSk7XHJcblxyXG4gICAgaWYgKHVzZXIgJiYgYXdhaXQgdXNlci5pc0NvcnJlY3RQYXNzd29yZChQYXNzd29yZCkpIHtcclxuICAgICAgICBjb25zdCB7IFBhc3N3b3JkLCBSb2xlLCAuLi51c2VyRGF0YSB9ID0gdXNlci50b0pTT04oKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGFjY2VzcyB0b2tlblxyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2VuZXJhdGVBY2Nlc3NUb2tlbih1c2VyLmlkLCBSb2xlKTtcclxuICAgICAgICAvLyBDcmVhdGUgcmVmcmVzaCB0b2tlblxyXG4gICAgICAgIGNvbnN0IG5ld1JlZnJlc2hUb2tlbiA9IGdlbmVyYXRlUmVmcmVzaFRva2VuKHVzZXIuaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNhdmUgcmVmcmVzaCB0b2tlbiBpbiBkYlxyXG4gICAgICAgIGF3YWl0IHVzZXIudXBkYXRlKHsgcmVmcmVzaFRva2VuOiBuZXdSZWZyZXNoVG9rZW4gfSk7XHJcblxyXG4gICAgICAgIC8vIFNhdmUgcmVmcmVzaCB0b2tlbiBpbiBjb29raWVcclxuICAgICAgICByZXMuY29va2llKCdyZWZyZXNoVG9rZW4nLCBuZXdSZWZyZXNoVG9rZW4sIHsgaHR0cE9ubHk6IHRydWUsIG1heEFnZTogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgfSk7XHJcbiAgICAgICAgLy8gU2F2ZSBhY2Nlc3MgdG9rZW4gaW4gY29va2llXHJcbiAgICAgICAgcmVzLmNvb2tpZSgnYWNjZXNzVG9rZW4nLCBhY2Nlc3NUb2tlbiwgeyBodHRwT25seTogdHJ1ZSwgbWF4QWdlOiAzMCAqIDYwICogMTAwMCB9KTsgLy8gMzAgcGjDunRcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIHVzZXJEYXRhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXM6IFwiVGjDtG5nIHRpbiDEkcSDbmcgbmjhuq1wIGtow7RuZyBjaMOtbmggeMOhY1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgbG9nb3V0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgY29va2llID0gcmVxLmNvb2tpZXM7XHJcblxyXG4gICAgaWYgKCFjb29raWUgfHwgIWNvb2tpZS5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzOiBcIktow7RuZyBjw7MgcmVmcmVzaCB0b2tlbiB0cm9uZyBjb29raWVzXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBkYi5Vc2VyLmZpbmRPbmVBbmRVcGRhdGUoeyByZWZyZXNoVG9rZW46IGNvb2tpZS5yZWZyZXNoVG9rZW4gfSwgeyAkdW5zZXQ6IHsgcmVmcmVzaFRva2VuOiBcIlwiIH0gfSk7XHJcblxyXG4gICAgcmVzLmNsZWFyQ29va2llKCdyZWZyZXNoVG9rZW4nLCB7XHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgc2VjdXJlOiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzOiAnxJDEg25nIHh14bqldCB0aMOgbmggY8O0bmcnXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuY29uc3QgZ2V0VXNlcnMgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIXVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIsSQw6MgY8OzIGzhu5dpIHjhuqN5IHJhLCB2dWkgbMOybmcgdGjhu60gbOG6oWlcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLlVzZXIuZmluZEJ5UGsodWlkLCB7XHJcbiAgICAgICAgYXR0cmlidXRlczogeyBleGNsdWRlOiBbJ1Bhc3N3b3JkJywgJ3JlZnJlc2hUb2tlbiddIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXM6IFwiTmfGsOG7nWkgZMO5bmcga2jDtG5nIMSRxrDhu6NjIHTDrG0gdGjhuqV5XCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdXNlcjogdXNlclxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy9s4bqleSB04bqldCBj4bqjIG5nxrDhu51pIGTDuW5nXHJcbmNvbnN0IGdldEFsbHVzZXI9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGIuVXNlci5maW5kQWxsKHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7IGV4Y2x1ZGU6IFsnUGFzc3dvcmQnLCAnUm9sZSddIH0gLy8gTG/huqFpIGLhu48gdHLGsOG7nW5nICdQYXNzd29yZCdcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogcmVzcG9uc2UubGVuZ3RoID4gMCxcclxuICAgICAgICB1c2VyczogcmVzcG9uc2VcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIXVpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoaeG6v3UgdGjDtG5nIHRpbiBuZ8aw4budaSBkw7luZyBj4bqnbiB4b8OhXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEtp4buDbSB0cmEgbmfGsOG7nWkgZMO5bmcgY8OzIHThu5NuIHThuqFpIGtow7RuZ1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5Vc2VyLmZpbmRCeVBrKHVpZCk7XHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmfGsOG7nWkgZMO5bmcga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBYb8OhIG5nxrDhu51pIGTDuW5nXHJcbiAgICAgICAgYXdhaXQgZGIuVXNlci5kZXN0cm95KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHVpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBOZ8aw4budaSBkw7luZyB24bubaSBJRCAke3VpZH0gxJHDoyDEkcaw4bujYyB4b8OhYFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBY4butIGzDvSBs4buXaVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgeG/DoSBuZ8aw4budaSBkw7luZzpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwixJDDoyBjw7MgbOG7l2kgeOG6o3kgcmEsIHZ1aSBsw7JuZyB0aOG7rSBs4bqhaVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdWlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGlmICghdWlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhp4bq/dSB0aMO0bmcgdGluIG5nxrDhu51pIGTDuW5nIGPhuqduIGPhuq1wIG5o4bqtdFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBbdXBkYXRlZFJvd3NDb3VudCwgdXBkYXRlZFVzZXJzXSA9IGF3YWl0IGRiLlVzZXIudXBkYXRlKHJlcS5ib2R5LCB7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiB1aWQgfSxcclxuICAgICAgICAgICAgcmV0dXJuaW5nOiB0cnVlIC8vIFRy4bqjIHbhu4EgY8OhYyBi4bqjbiBnaGkgxJHDoyDEkcaw4bujYyBj4bqtcCBuaOG6rXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZWRSb3dzQ291bnQgPT09IDAgfHwgIXVwZGF0ZWRVc2VycyB8fCB1cGRhdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmfGsOG7nWkgZMO5bmcga2jDtG5nIMSRxrDhu6NjIHTDrG0gdGjhuqV5IGhv4bq3YyBraMO0bmcgdGjhu4MgY+G6rXAgbmjhuq10XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHVwZGF0ZWRVc2Vyc1swXS50b0pTT04oKTsgLy8gQ2h1eeG7g24gxJHhu5VpIHRow6BuaCDEkeG7kWkgdMaw4bujbmcgSlNPTlxyXG5cclxuICAgICAgICAvLyBMb+G6oWkgYuG7jyBjw6FjIHRyxrDhu51uZyBuaOG6oXkgY+G6o20gdOG7qyBwaOG6o24gaOG7k2lcclxuICAgICAgICBkZWxldGUgdXBkYXRlZFVzZXIuUGFzc3dvcmQ7XHJcbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRVc2VyLnJlZnJlc2hUb2tlbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJD4bqtcCBuaOG6rXQgdGjDoG5oIGPDtG5nXCIsXHJcbiAgICAgICAgICAgIHVzZXI6IHVwZGF0ZWRVc2VyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgY+G6rXAgbmjhuq10IG5nxrDhu51pIGTDuW5nOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCLEkMOjIGPDsyBs4buXaSB44bqjeSByYSwgdnVpIGzDsm5nIHRo4butIGzhuqFpXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgYWRkVXNlckJ5QWRtaW4sXHJcbiAgICBsb2dpbixcclxuICAgIGxvZ291dCxcclxuICAgIGdldEFsbHVzZXIsXHJcbiAgICBnZXRVc2VycyxcclxuICAgIGRlbGV0ZVVzZXIsXHJcbiAgICB1cGRhdGVVc2VyLFxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDL0IsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDdEMsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDeEMsTUFBTUcsR0FBRyxHQUFHSCxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1JLFlBQVksR0FBR0os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","map":{"version":3,"names":["db","require","User","Order","jwt","asyncHandler","generateAccessToken","generateRefreshToken","addUserByAdmin","req","res","Name","Phone","Password","Role","body","status","json","success","mes","newUser","create","user","login","findOne","where","isCorrectPassword","userData","toJSON","accessToken","id","newRefreshToken","update","refreshToken","cookie","httpOnly","maxAge","logout","cookies","findOneAndUpdate","$unset","clearCookie","secure","getUsers","uid","params","Error","findByPk","attributes","exclude","getAlluser","response","findAll","length","users","deleteUser","message","destroy","error","console","updateUser","updatedRowsCount","updatedUsers","returning","updatedUser","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\controllers\\","sources":["user_controller.js"],"sourcesContent":["const db = require('../Models');\r\nconst User = require('../Models/user');\r\nconst Order = require('../Models/order')\r\nconst jwt = require('jsonwebtoken');\r\nconst asyncHandler = require('express-async-handler');\r\nconst { generateAccessToken, generateRefreshToken } = require('../middleware/jwt');\r\n\r\nconst addUserByAdmin = asyncHandler(async (req, res) => {\r\n    const { Name, Phone, Password, Role } = req.body;\r\n\r\n    if (!Name || !Phone || !Password || !Role) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n\r\n    const newUser = await db.User.create({\r\n        Name,\r\n        Phone,\r\n        Password,\r\n        Role\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        mes: 'Thêm tài khoản thành công',\r\n        user: newUser\r\n    });\r\n});\r\n\r\nconst login = asyncHandler(async (req, res) => {\r\n    const { Phone, Password } = req.body;\r\n\r\n    if (!Phone || !Password) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n\r\n    const user = await db.User.findOne({ where: { Phone: Phone } });\r\n\r\n    if (user && await user.isCorrectPassword(Password)) {\r\n        const { Password, Role, ...userData } = user.toJSON();\r\n\r\n        // Create access token\r\n        const accessToken = generateAccessToken(user.id, Role);\r\n        // Create refresh token\r\n        const newRefreshToken = generateRefreshToken(user.id);\r\n        \r\n        // Save refresh token in db\r\n        await user.update({ refreshToken: newRefreshToken });\r\n\r\n        // Save refresh token in cookie\r\n        res.cookie('refreshToken', newRefreshToken, { httpOnly: true, maxAge: 7 * 24 * 60 * 60 * 1000 });\r\n        // Save access token in cookie\r\n        res.cookie('accessToken', accessToken, { httpOnly: true, maxAge: 30 * 60 * 1000 }); // 30 phút\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            accessToken,\r\n            userData\r\n        });\r\n    } else {\r\n        return res.status(401).json({\r\n            success: false,\r\n            mes: \"Thông tin đăng nhập không chính xác\"\r\n        });\r\n    }\r\n});\r\n\r\nconst logout = asyncHandler(async (req, res) => {\r\n    const cookie = req.cookies;\r\n\r\n    if (!cookie || !cookie.refreshToken) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            mes: \"Không có refresh token trong cookies\"\r\n        });\r\n    }\r\n\r\n    await db.User.findOneAndUpdate({ refreshToken: cookie.refreshToken }, { $unset: { refreshToken: \"\" } });\r\n\r\n    res.clearCookie('refreshToken', {\r\n        httpOnly: true,\r\n        secure: true\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        mes: 'Đăng xuất thành công'\r\n    });\r\n});\r\n\r\n\r\nconst getUsers = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        throw new Error(\"Đã có lỗi xảy ra, vui lòng thử lại\");\r\n    }\r\n\r\n    const user = await db.User.findByPk(uid, {\r\n        attributes: { exclude: ['Password', 'refreshToken'] }\r\n    });\r\n\r\n    if (!user) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            mes: \"Người dùng không được tìm thấy\"\r\n        });\r\n    }\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        user: user\r\n    });\r\n});\r\n\r\n//lấy tất cả người dùng\r\nconst getAlluser= asyncHandler(async (req, res) => {\r\n    const response = await db.User.findAll({\r\n        attributes: { exclude: ['Password', 'Role'] } // Loại bỏ trường 'Password'\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: response.length > 0,\r\n        users: response\r\n    });\r\n});\r\n\r\nconst deleteUser = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Thiếu thông tin người dùng cần xoá\"\r\n        });\r\n    }\r\n\r\n    try {\r\n        // Kiểm tra người dùng có tồn tại không\r\n        const user = await db.User.findByPk(uid);\r\n        if (!user) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                message: \"Người dùng không tồn tại\"\r\n            });\r\n        }\r\n\r\n        // Xoá người dùng\r\n        await db.User.destroy({\r\n            where: { id: uid }\r\n        });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Người dùng với ID ${uid} đã được xoá`\r\n        });\r\n    } catch (error) {\r\n        // Xử lý lỗi\r\n        console.error(\"Lỗi khi xoá người dùng:\", error.message);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateUser = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Thiếu thông tin người dùng cần cập nhật\"\r\n        });\r\n    }\r\n\r\n    try {\r\n        const [updatedRowsCount, updatedUsers] = await db.User.update(req.body, {\r\n            where: { id: uid },\r\n            returning: true // Trả về các bản ghi đã được cập nhật\r\n        });\r\n\r\n        if (updatedRowsCount === 0 || !updatedUsers || updatedUsers.length === 0) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                message: \"Người dùng không được tìm thấy hoặc không thể cập nhật\"\r\n            });\r\n        }\r\n\r\n        const updatedUser = updatedUsers[0].toJSON(); // Chuyển đổi thành đối tượng JSON\r\n\r\n        // Loại bỏ các trường nhạy cảm từ phản hồi\r\n        delete updatedUser.Password;\r\n        delete updatedUser.refreshToken;\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: \"Cập nhật thành công\",\r\n            user: updatedUser\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Lỗi khi cập nhật người dùng:\", error.message);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n        });\r\n    }\r\n});\r\n\r\n\r\n\r\nmodule.exports = {\r\n    addUserByAdmin,\r\n    login,\r\n    logout,\r\n    getAlluser,\r\n    getUsers,\r\n    deleteUser,\r\n    updateUser,\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718437478336},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\middleware\\\\jwt.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const jwt = require('jsonwebtoken');\nrequire('dotenv').config(); // Load environment variables\n\nconst generateAccessToken = (uid, role) => {\n  console.log('Secret Key:', process.env.SECRET_KEY); // Log khóa bí mật\n  const currentTime = Math.floor(Date.now() / 1000);\n  const expirationTime = currentTime + 5 * 60; // 5 phút\n\n  const token = jwt.sign({\n    _id: uid,\n    role: role,\n    exp: expirationTime\n  }, process.env.SECRET_KEY);\n  return token;\n};\nconst generateRefreshToken = uid => {\n  return jwt.sign({\n    _id: uid\n  }, process.env.SECRET_KEY, {\n    expiresIn: '7d'\n  });\n};\nmodule.exports = {\n  generateAccessToken,\n  generateRefreshToken\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiZ2VuZXJhdGVBY2Nlc3NUb2tlbiIsInVpZCIsInJvbGUiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVF9LRVkiLCJjdXJyZW50VGltZSIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJleHBpcmF0aW9uVGltZSIsInRva2VuIiwic2lnbiIsIl9pZCIsImV4cCIsImdlbmVyYXRlUmVmcmVzaFRva2VuIiwiZXhwaXJlc0luIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxtaWRkbGV3YXJlXFwiLCJzb3VyY2VzIjpbImp3dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcclxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7IC8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcblxyXG5jb25zdCBnZW5lcmF0ZUFjY2Vzc1Rva2VuID0gKHVpZCwgcm9sZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ1NlY3JldCBLZXk6JywgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSk7IC8vIExvZyBraMOzYSBiw60gbeG6rXRcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XHJcbiAgICBjb25zdCBleHBpcmF0aW9uVGltZSA9IGN1cnJlbnRUaW1lICsgKDUgKiA2MCk7IC8vIDUgcGjDunRcclxuICAgIFxyXG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7XHJcbiAgICAgICAgX2lkOiB1aWQsXHJcbiAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICBleHA6IGV4cGlyYXRpb25UaW1lXHJcbiAgICB9LCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZKTtcclxuXHJcbiAgICByZXR1cm4gdG9rZW47XHJcbn1cclxuXHJcblxyXG5jb25zdCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiA9ICh1aWQpID0+IHtcclxuICAgIHJldHVybiBqd3Quc2lnbih7XHJcbiAgICAgICAgX2lkOiB1aWQsXHJcbiAgICB9LCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZLCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiAnN2QnXHJcbiAgICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBnZW5lcmF0ZUFjY2Vzc1Rva2VuLFxyXG4gICAgZ2VuZXJhdGVSZWZyZXNoVG9rZW5cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQ0EsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTVCLE1BQU1DLG1CQUFtQixHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2Q0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUMsQ0FBQztFQUNwRCxNQUFNQyxXQUFXLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0VBQ2pELE1BQU1DLGNBQWMsR0FBR0wsV0FBVyxHQUFJLENBQUMsR0FBRyxFQUFHLENBQUMsQ0FBQzs7RUFFL0MsTUFBTU0sS0FBSyxHQUFHakIsR0FBRyxDQUFDa0IsSUFBSSxDQUFDO0lBQ25CQyxHQUFHLEVBQUVmLEdBQUc7SUFDUkMsSUFBSSxFQUFFQSxJQUFJO0lBQ1ZlLEdBQUcsRUFBRUo7RUFDVCxDQUFDLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLENBQUM7RUFFMUIsT0FBT08sS0FBSztBQUNoQixDQUFDO0FBR0QsTUFBTUksb0JBQW9CLEdBQUlqQixHQUFHLElBQUs7RUFDbEMsT0FBT0osR0FBRyxDQUFDa0IsSUFBSSxDQUFDO0lBQ1pDLEdBQUcsRUFBRWY7RUFDVCxDQUFDLEVBQUVJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQUU7SUFDdkJZLFNBQVMsRUFBRTtFQUNmLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYnJCLG1CQUFtQjtFQUNuQmtCO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["jwt","require","config","generateAccessToken","uid","role","console","log","process","env","SECRET_KEY","currentTime","Math","floor","Date","now","expirationTime","token","sign","_id","exp","generateRefreshToken","expiresIn","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\middleware\\","sources":["jwt.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\nrequire('dotenv').config(); // Load environment variables\r\n\r\nconst generateAccessToken = (uid, role) => {\r\n    console.log('Secret Key:', process.env.SECRET_KEY); // Log khóa bí mật\r\n    const currentTime = Math.floor(Date.now() / 1000);\r\n    const expirationTime = currentTime + (5 * 60); // 5 phút\r\n    \r\n    const token = jwt.sign({\r\n        _id: uid,\r\n        role: role,\r\n        exp: expirationTime\r\n    }, process.env.SECRET_KEY);\r\n\r\n    return token;\r\n}\r\n\r\n\r\nconst generateRefreshToken = (uid) => {\r\n    return jwt.sign({\r\n        _id: uid,\r\n    }, process.env.SECRET_KEY, {\r\n        expiresIn: '7d'\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n    generateAccessToken,\r\n    generateRefreshToken\r\n}\r\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;;AAE5B,MAAMC,mBAAmB,GAAGA,CAACC,GAAG,EAAEC,IAAI,KAAK;EACvCC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;EACpD,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;EACjD,MAAMC,cAAc,GAAGL,WAAW,GAAI,CAAC,GAAG,EAAG,CAAC,CAAC;;EAE/C,MAAMM,KAAK,GAAGjB,GAAG,CAACkB,IAAI,CAAC;IACnBC,GAAG,EAAEf,GAAG;IACRC,IAAI,EAAEA,IAAI;IACVe,GAAG,EAAEJ;EACT,CAAC,EAAER,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;EAE1B,OAAOO,KAAK;AAChB,CAAC;AAGD,MAAMI,oBAAoB,GAAIjB,GAAG,IAAK;EAClC,OAAOJ,GAAG,CAACkB,IAAI,CAAC;IACZC,GAAG,EAAEf;EACT,CAAC,EAAEI,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;IACvBY,SAAS,EAAE;EACf,CAAC,CAAC;AACN,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EACbrB,mBAAmB;EACnBkB;AACJ,CAAC","ignoreList":[]}},"mtime":1718431253614},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const productRouter = require('./product_routes');\nconst categoryRouter = require('./category_routes');\nconst invoiceRouter = require('./invoice_routes');\nconst customerRouter = require('./customer_routes');\nconst employeeRouter = require('./emloyee_routes');\nconst orderRouter = require('./order_routes');\nconst userRouter = require('./user_routes');\nconst initRoute = app => {\n  app.use('/api/product', productRouter);\n  app.use('/api/category', categoryRouter);\n  app.use('/api/invoice', invoiceRouter);\n  app.use('/api/customer', customerRouter);\n  app.use('/api/employee', employeeRouter);\n  app.use('/api/order', orderRouter);\n  app.use('/api/user', userRouter);\n};\nmodule.exports = initRoute;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwicmVxdWlyZSIsImNhdGVnb3J5Um91dGVyIiwiaW52b2ljZVJvdXRlciIsImN1c3RvbWVyUm91dGVyIiwiZW1wbG95ZWVSb3V0ZXIiLCJvcmRlclJvdXRlciIsInVzZXJSb3V0ZXIiLCJpbml0Um91dGUiLCJhcHAiLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxceGFtcHBcXGh0ZG9jc1xcUGVyZnVtZVN0b3JlXFxTZXJ2ZXJcXFJvdXRlc1xcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm9kdWN0Um91dGVyID0gcmVxdWlyZSgnLi9wcm9kdWN0X3JvdXRlcycpO1xyXG5jb25zdCBjYXRlZ29yeVJvdXRlciA9IHJlcXVpcmUoJy4vY2F0ZWdvcnlfcm91dGVzJyk7XHJcbmNvbnN0IGludm9pY2VSb3V0ZXIgPSByZXF1aXJlKCcuL2ludm9pY2Vfcm91dGVzJyk7XHJcbmNvbnN0IGN1c3RvbWVyUm91dGVyID0gcmVxdWlyZSgnLi9jdXN0b21lcl9yb3V0ZXMnKTtcclxuY29uc3QgZW1wbG95ZWVSb3V0ZXIgPSByZXF1aXJlKCcuL2VtbG95ZWVfcm91dGVzJyk7XHJcbmNvbnN0IG9yZGVyUm91dGVyID0gcmVxdWlyZSgnLi9vcmRlcl9yb3V0ZXMnKTtcclxuY29uc3QgdXNlclJvdXRlciA9IHJlcXVpcmUoJy4vdXNlcl9yb3V0ZXMnKVxyXG5cclxuY29uc3QgaW5pdFJvdXRlID0gKGFwcCkgPT4ge1xyXG4gICAgYXBwLnVzZSgnL2FwaS9wcm9kdWN0JywgcHJvZHVjdFJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2NhdGVnb3J5JywgY2F0ZWdvcnlSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS9pbnZvaWNlJywgaW52b2ljZVJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2N1c3RvbWVyJywgY3VzdG9tZXJSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS9lbXBsb3llZScsIGVtcGxveWVlUm91dGVyKTtcclxuICAgIGFwcC51c2UoJy9hcGkvb3JkZXInLCBvcmRlclJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL3VzZXInLCB1c2VyUm91dGVyKVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRSb3V0ZTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGFBQWEsR0FBR0MsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELE1BQU1DLGNBQWMsR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ25ELE1BQU1FLGFBQWEsR0FBR0YsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELE1BQU1HLGNBQWMsR0FBR0gsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ25ELE1BQU1JLGNBQWMsR0FBR0osT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ2xELE1BQU1LLFdBQVcsR0FBR0wsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQzdDLE1BQU1NLFVBQVUsR0FBR04sT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUUzQyxNQUFNTyxTQUFTLEdBQUlDLEdBQUcsSUFBSztFQUN2QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsY0FBYyxFQUFFVixhQUFhLENBQUM7RUFDdENTLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRVIsY0FBYyxDQUFDO0VBQ3hDTyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxjQUFjLEVBQUVQLGFBQWEsQ0FBQztFQUN0Q00sR0FBRyxDQUFDQyxHQUFHLENBQUMsZUFBZSxFQUFFTixjQUFjLENBQUM7RUFDeENLLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRUwsY0FBYyxDQUFDO0VBQ3hDSSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVKLFdBQVcsQ0FBQztFQUNsQ0csR0FBRyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFSCxVQUFVLENBQUM7QUFDcEMsQ0FBQztBQUVESSxNQUFNLENBQUNDLE9BQU8sR0FBR0osU0FBUyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["productRouter","require","categoryRouter","invoiceRouter","customerRouter","employeeRouter","orderRouter","userRouter","initRoute","app","use","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["index.js"],"sourcesContent":["const productRouter = require('./product_routes');\r\nconst categoryRouter = require('./category_routes');\r\nconst invoiceRouter = require('./invoice_routes');\r\nconst customerRouter = require('./customer_routes');\r\nconst employeeRouter = require('./emloyee_routes');\r\nconst orderRouter = require('./order_routes');\r\nconst userRouter = require('./user_routes')\r\n\r\nconst initRoute = (app) => {\r\n    app.use('/api/product', productRouter);\r\n    app.use('/api/category', categoryRouter);\r\n    app.use('/api/invoice', invoiceRouter);\r\n    app.use('/api/customer', customerRouter);\r\n    app.use('/api/employee', employeeRouter);\r\n    app.use('/api/order', orderRouter);\r\n    app.use('/api/user', userRouter)\r\n}\r\n\r\nmodule.exports = initRoute;"],"mappings":"AAAA,MAAMA,aAAa,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMC,cAAc,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAME,aAAa,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMG,cAAc,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAMI,cAAc,GAAGJ,OAAO,CAAC,kBAAkB,CAAC;AAClD,MAAMK,WAAW,GAAGL,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAMM,UAAU,GAAGN,OAAO,CAAC,eAAe,CAAC;AAE3C,MAAMO,SAAS,GAAIC,GAAG,IAAK;EACvBA,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEV,aAAa,CAAC;EACtCS,GAAG,CAACC,GAAG,CAAC,eAAe,EAAER,cAAc,CAAC;EACxCO,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEP,aAAa,CAAC;EACtCM,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEN,cAAc,CAAC;EACxCK,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEL,cAAc,CAAC;EACxCI,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEJ,WAAW,CAAC;EAClCG,GAAG,CAACC,GAAG,CAAC,WAAW,EAAEH,UAAU,CAAC;AACpC,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGJ,SAAS","ignoreList":[]}},"mtime":1718425950734},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\product_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createProduct,\n  getAllProduct,\n  getProduct,\n  updateProduct,\n  deleteProduct,\n  uploadImageProduct\n} = require('../controllers/product_controller');\nconst router = express.Router();\nrouter.post('/Products', createProduct);\nrouter.get('/Products', getAllProduct);\nrouter.get('/Products/:id', getProduct);\nrouter.put('/Products/:id', updateProduct);\nrouter.delete('/Products/:id', deleteProduct);\nrouter.put('/Products/:id', uploadImageProduct);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZVByb2R1Y3QiLCJnZXRBbGxQcm9kdWN0IiwiZ2V0UHJvZHVjdCIsInVwZGF0ZVByb2R1Y3QiLCJkZWxldGVQcm9kdWN0IiwidXBsb2FkSW1hZ2VQcm9kdWN0Iiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbInByb2R1Y3Rfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlUHJvZHVjdCwgZ2V0QWxsUHJvZHVjdCwgZ2V0UHJvZHVjdCwgdXBkYXRlUHJvZHVjdCwgZGVsZXRlUHJvZHVjdCwgdXBsb2FkSW1hZ2VQcm9kdWN0IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9wcm9kdWN0X2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvUHJvZHVjdHMnLCBjcmVhdGVQcm9kdWN0KTtcclxucm91dGVyLmdldCgnL1Byb2R1Y3RzJywgZ2V0QWxsUHJvZHVjdCk7XHJcbnJvdXRlci5nZXQoJy9Qcm9kdWN0cy86aWQnLCBnZXRQcm9kdWN0KTtcclxucm91dGVyLnB1dCgnL1Byb2R1Y3RzLzppZCcsIHVwZGF0ZVByb2R1Y3QpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvUHJvZHVjdHMvOmlkJywgZGVsZXRlUHJvZHVjdCk7XHJcbnJvdXRlci5wdXQoJy9Qcm9kdWN0cy86aWQnLHVwbG9hZEltYWdlUHJvZHVjdCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxhQUFhO0VBQUVDLGFBQWE7RUFBRUMsVUFBVTtFQUFFQyxhQUFhO0VBQUVDLGFBQWE7RUFBRUM7QUFBbUIsQ0FBQyxHQUFHTixPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDbkosTUFBTU8sTUFBTSxHQUFHUixPQUFPLENBQUNTLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxXQUFXLEVBQUVSLGFBQWEsQ0FBQztBQUN2Q00sTUFBTSxDQUFDRyxHQUFHLENBQUMsV0FBVyxFQUFFUixhQUFhLENBQUM7QUFDdENLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGVBQWUsRUFBRVAsVUFBVSxDQUFDO0FBQ3ZDSSxNQUFNLENBQUNJLEdBQUcsQ0FBQyxlQUFlLEVBQUVQLGFBQWEsQ0FBQztBQUMxQ0csTUFBTSxDQUFDSyxNQUFNLENBQUMsZUFBZSxFQUFFUCxhQUFhLENBQUM7QUFDN0NFLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGVBQWUsRUFBQ0wsa0JBQWtCLENBQUM7QUFFOUNPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createProduct","getAllProduct","getProduct","updateProduct","deleteProduct","uploadImageProduct","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["product_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createProduct, getAllProduct, getProduct, updateProduct, deleteProduct, uploadImageProduct } = require('../controllers/product_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Products', createProduct);\r\nrouter.get('/Products', getAllProduct);\r\nrouter.get('/Products/:id', getProduct);\r\nrouter.put('/Products/:id', updateProduct);\r\nrouter.delete('/Products/:id', deleteProduct);\r\nrouter.put('/Products/:id',uploadImageProduct);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC,aAAa;EAAEC;AAAmB,CAAC,GAAGN,OAAO,CAAC,mCAAmC,CAAC;AACnJ,MAAMO,MAAM,GAAGR,OAAO,CAACS,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,WAAW,EAAER,aAAa,CAAC;AACvCM,MAAM,CAACG,GAAG,CAAC,WAAW,EAAER,aAAa,CAAC;AACtCK,MAAM,CAACG,GAAG,CAAC,eAAe,EAAEP,UAAU,CAAC;AACvCI,MAAM,CAACI,GAAG,CAAC,eAAe,EAAEP,aAAa,CAAC;AAC1CG,MAAM,CAACK,MAAM,CAAC,eAAe,EAAEP,aAAa,CAAC;AAC7CE,MAAM,CAACI,GAAG,CAAC,eAAe,EAACL,kBAAkB,CAAC;AAE9CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121543862},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\category_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCategory,\n  getAllCategory,\n  getCategory,\n  updateCategory,\n  deleteCategory\n} = require('../controllers/category_controller');\nconst router = express.Router();\nrouter.post('/Categorys', createCategory);\nrouter.get('/Categorys', getAllCategory);\nrouter.get('/Categorys/:uid', getCategory);\nrouter.put('/Categorys/:uid', updateCategory);\nrouter.delete('/Categorys/:uid', deleteCategory);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUNhdGVnb3J5IiwiZ2V0QWxsQ2F0ZWdvcnkiLCJnZXRDYXRlZ29yeSIsInVwZGF0ZUNhdGVnb3J5IiwiZGVsZXRlQ2F0ZWdvcnkiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiY2F0ZWdvcnlfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ2F0ZWdvcnksIGdldEFsbENhdGVnb3J5LCBnZXRDYXRlZ29yeSwgdXBkYXRlQ2F0ZWdvcnksIGRlbGV0ZUNhdGVnb3J5IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jYXRlZ29yeV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0NhdGVnb3J5cycsIGNyZWF0ZUNhdGVnb3J5KTtcclxucm91dGVyLmdldCgnL0NhdGVnb3J5cycsIGdldEFsbENhdGVnb3J5KTtcclxucm91dGVyLmdldCgnL0NhdGVnb3J5cy86dWlkJywgZ2V0Q2F0ZWdvcnkpO1xyXG5yb3V0ZXIucHV0KCcvQ2F0ZWdvcnlzLzp1aWQnLCB1cGRhdGVDYXRlZ29yeSk7XHJcbnJvdXRlci5kZWxldGUoJy9DYXRlZ29yeXMvOnVpZCcsIGRlbGV0ZUNhdGVnb3J5KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLGNBQWM7RUFBRUMsY0FBYztFQUFFQyxXQUFXO0VBQUVDLGNBQWM7RUFBRUM7QUFBZSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUNySSxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFlBQVksRUFBRVAsY0FBYyxDQUFDO0FBQ3pDSyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxZQUFZLEVBQUVQLGNBQWMsQ0FBQztBQUN4Q0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsaUJBQWlCLEVBQUVOLFdBQVcsQ0FBQztBQUMxQ0csTUFBTSxDQUFDSSxHQUFHLENBQUMsaUJBQWlCLEVBQUVOLGNBQWMsQ0FBQztBQUM3Q0UsTUFBTSxDQUFDSyxNQUFNLENBQUMsaUJBQWlCLEVBQUVOLGNBQWMsQ0FBQztBQUVoRE8sTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","createCategory","getAllCategory","getCategory","updateCategory","deleteCategory","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["category_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCategory, getAllCategory, getCategory, updateCategory, deleteCategory } = require('../controllers/category_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Categorys', createCategory);\r\nrouter.get('/Categorys', getAllCategory);\r\nrouter.get('/Categorys/:uid', getCategory);\r\nrouter.put('/Categorys/:uid', updateCategory);\r\nrouter.delete('/Categorys/:uid', deleteCategory);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,iBAAiB,EAAEN,WAAW,CAAC;AAC1CG,MAAM,CAACI,GAAG,CAAC,iBAAiB,EAAEN,cAAc,CAAC;AAC7CE,MAAM,CAACK,MAAM,CAAC,iBAAiB,EAAEN,cAAc,CAAC;AAEhDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718440592110},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\invoice_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createInvoice,\n  getAllInvoice,\n  getInvoice,\n  updateInvoice,\n  deleteInvoice\n} = require('../controllers/invoice_controller');\nconst router = express.Router();\nrouter.post('/Invoices', createInvoice);\nrouter.get('/Invoices', getAllInvoice);\nrouter.get('/Invoices/:id', getInvoice);\nrouter.put('/Invoices/:id', updateInvoice);\nrouter.delete('/Invoices/:id', deleteInvoice);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUludm9pY2UiLCJnZXRBbGxJbnZvaWNlIiwiZ2V0SW52b2ljZSIsInVwZGF0ZUludm9pY2UiLCJkZWxldGVJbnZvaWNlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbImludm9pY2Vfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlSW52b2ljZSwgZ2V0QWxsSW52b2ljZSwgZ2V0SW52b2ljZSwgdXBkYXRlSW52b2ljZSwgZGVsZXRlSW52b2ljZSB9ID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvaW52b2ljZV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0ludm9pY2VzJywgY3JlYXRlSW52b2ljZSk7XHJcbnJvdXRlci5nZXQoJy9JbnZvaWNlcycsIGdldEFsbEludm9pY2UpO1xyXG5yb3V0ZXIuZ2V0KCcvSW52b2ljZXMvOmlkJywgZ2V0SW52b2ljZSk7XHJcbnJvdXRlci5wdXQoJy9JbnZvaWNlcy86aWQnLCB1cGRhdGVJbnZvaWNlKTtcclxucm91dGVyLmRlbGV0ZSgnL0ludm9pY2VzLzppZCcsIGRlbGV0ZUludm9pY2UpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsYUFBYTtFQUFFQyxhQUFhO0VBQUVDLFVBQVU7RUFBRUMsYUFBYTtFQUFFQztBQUFjLENBQUMsR0FBR0wsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQy9ILE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsV0FBVyxFQUFFUCxhQUFhLENBQUM7QUFDdkNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFdBQVcsRUFBRVAsYUFBYSxDQUFDO0FBQ3RDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxlQUFlLEVBQUVOLFVBQVUsQ0FBQztBQUN2Q0csTUFBTSxDQUFDSSxHQUFHLENBQUMsZUFBZSxFQUFFTixhQUFhLENBQUM7QUFDMUNFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLGVBQWUsRUFBRU4sYUFBYSxDQUFDO0FBRTdDTyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createInvoice","getAllInvoice","getInvoice","updateInvoice","deleteInvoice","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["invoice_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createInvoice, getAllInvoice, getInvoice, updateInvoice, deleteInvoice } = require('../controllers/invoice_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Invoices', createInvoice);\r\nrouter.get('/Invoices', getAllInvoice);\r\nrouter.get('/Invoices/:id', getInvoice);\r\nrouter.put('/Invoices/:id', updateInvoice);\r\nrouter.delete('/Invoices/:id', deleteInvoice);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,mCAAmC,CAAC;AAC/H,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,WAAW,EAAEP,aAAa,CAAC;AACvCK,MAAM,CAACG,GAAG,CAAC,WAAW,EAAEP,aAAa,CAAC;AACtCI,MAAM,CAACG,GAAG,CAAC,eAAe,EAAEN,UAAU,CAAC;AACvCG,MAAM,CAACI,GAAG,CAAC,eAAe,EAAEN,aAAa,CAAC;AAC1CE,MAAM,CAACK,MAAM,CAAC,eAAe,EAAEN,aAAa,CAAC;AAE7CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718162934968},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\customer_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCustomer,\n  getAllCustomer,\n  getCustomer,\n  updateCustomer,\n  deleteCustomer\n} = require('../controllers/customer_controller');\nconst router = express.Router();\nrouter.post('/Customers', createCustomer);\nrouter.get('/Customers', getAllCustomer);\nrouter.get('/Customers/:id', getCustomer);\nrouter.put('/Customers/:id', updateCustomer);\nrouter.delete('/Customers/:id', deleteCustomer);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUN1c3RvbWVyIiwiZ2V0QWxsQ3VzdG9tZXIiLCJnZXRDdXN0b21lciIsInVwZGF0ZUN1c3RvbWVyIiwiZGVsZXRlQ3VzdG9tZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiY3VzdG9tZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ3VzdG9tZXIsIGdldEFsbEN1c3RvbWVyLCBnZXRDdXN0b21lciwgdXBkYXRlQ3VzdG9tZXIsIGRlbGV0ZUN1c3RvbWVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jdXN0b21lcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL0N1c3RvbWVycycsIGNyZWF0ZUN1c3RvbWVyKTtcclxucm91dGVyLmdldCgnL0N1c3RvbWVycycsIGdldEFsbEN1c3RvbWVyKTtcclxucm91dGVyLmdldCgnL0N1c3RvbWVycy86aWQnLCBnZXRDdXN0b21lcik7XHJcbnJvdXRlci5wdXQoJy9DdXN0b21lcnMvOmlkJywgdXBkYXRlQ3VzdG9tZXIpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvQ3VzdG9tZXJzLzppZCcsIGRlbGV0ZUN1c3RvbWVyKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxjQUFjO0VBQUVDLGNBQWM7RUFBRUMsV0FBVztFQUFFQyxjQUFjO0VBQUVDO0FBQWUsQ0FBQyxHQUFHTCxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDckksTUFBTU0sTUFBTSxHQUFHUCxPQUFPLENBQUNRLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxZQUFZLEVBQUVQLGNBQWMsQ0FBQztBQUN6Q0ssTUFBTSxDQUFDRyxHQUFHLENBQUMsWUFBWSxFQUFFUCxjQUFjLENBQUM7QUFDeENJLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGdCQUFnQixFQUFFTixXQUFXLENBQUM7QUFDekNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGdCQUFnQixFQUFFTixjQUFjLENBQUM7QUFDNUNFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLGdCQUFnQixFQUFFTixjQUFjLENBQUM7QUFHL0NPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createCustomer","getAllCustomer","getCustomer","updateCustomer","deleteCustomer","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["customer_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCustomer, getAllCustomer, getCustomer, updateCustomer, deleteCustomer } = require('../controllers/customer_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Customers', createCustomer);\r\nrouter.get('/Customers', getAllCustomer);\r\nrouter.get('/Customers/:id', getCustomer);\r\nrouter.put('/Customers/:id', updateCustomer);\r\nrouter.delete('/Customers/:id', deleteCustomer);\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,WAAW,CAAC;AACzCG,MAAM,CAACI,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAG/CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718133255282},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\emloyee_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createEmployee,\n  getAllEmployee,\n  getEmployee,\n  updateEmployee,\n  deleteEmployee\n} = require('../controllers/employee_controller');\nconst router = express.Router();\nrouter.post('/Employees', createEmployee);\nrouter.get('/Employees', getAllEmployee);\nrouter.get('/Employees/:id', getEmployee);\nrouter.put('/Employees/:id', updateEmployee);\nrouter.delete('/Employees/:id', deleteEmployee);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUVtcGxveWVlIiwiZ2V0QWxsRW1wbG95ZWUiLCJnZXRFbXBsb3llZSIsInVwZGF0ZUVtcGxveWVlIiwiZGVsZXRlRW1wbG95ZWUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiZW1sb3llZV9yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgeyBjcmVhdGVFbXBsb3llZSwgZ2V0QWxsRW1wbG95ZWUsIGdldEVtcGxveWVlLCB1cGRhdGVFbXBsb3llZSwgZGVsZXRlRW1wbG95ZWUgfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2VtcGxveWVlX2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvRW1wbG95ZWVzJywgY3JlYXRlRW1wbG95ZWUpO1xyXG5yb3V0ZXIuZ2V0KCcvRW1wbG95ZWVzJywgZ2V0QWxsRW1wbG95ZWUpO1xyXG5yb3V0ZXIuZ2V0KCcvRW1wbG95ZWVzLzppZCcsIGdldEVtcGxveWVlKTtcclxucm91dGVyLnB1dCgnL0VtcGxveWVlcy86aWQnLCB1cGRhdGVFbXBsb3llZSk7XHJcbnJvdXRlci5kZWxldGUoJy9FbXBsb3llZXMvOmlkJywgZGVsZXRlRW1wbG95ZWUpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsY0FBYztFQUFFQyxjQUFjO0VBQUVDLFdBQVc7RUFBRUMsY0FBYztFQUFFQztBQUFlLENBQUMsR0FBR0wsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQ3JJLE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsWUFBWSxFQUFFUCxjQUFjLENBQUM7QUFDekNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFlBQVksRUFBRVAsY0FBYyxDQUFDO0FBQ3hDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRU4sV0FBVyxDQUFDO0FBQ3pDRyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRU4sY0FBYyxDQUFDO0FBQzVDRSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRU4sY0FBYyxDQUFDO0FBRS9DTyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createEmployee","getAllEmployee","getEmployee","updateEmployee","deleteEmployee","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["emloyee_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createEmployee, getAllEmployee, getEmployee, updateEmployee, deleteEmployee } = require('../controllers/employee_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/Employees', createEmployee);\r\nrouter.get('/Employees', getAllEmployee);\r\nrouter.get('/Employees/:id', getEmployee);\r\nrouter.put('/Employees/:id', updateEmployee);\r\nrouter.delete('/Employees/:id', deleteEmployee);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,YAAY,EAAEP,cAAc,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEP,cAAc,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,WAAW,CAAC;AACzCG,MAAM,CAACI,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;AAE/CO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121654425},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\order_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createOrder,\n  getAllOrder,\n  getOrder,\n  updateOrder,\n  deleteOrder\n} = require('../controllers/order_controller');\nconst router = express.Router();\nrouter.post('/orders', createOrder);\nrouter.get('/orders', getAllOrder);\nrouter.get('/orders/:id', getOrder);\nrouter.put('/orders/:id', updateOrder);\nrouter.delete('/orders/:id', deleteOrder);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZU9yZGVyIiwiZ2V0QWxsT3JkZXIiLCJnZXRPcmRlciIsInVwZGF0ZU9yZGVyIiwiZGVsZXRlT3JkZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXHhhbXBwXFxodGRvY3NcXFBlcmZ1bWVTdG9yZVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsib3JkZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlT3JkZXIsIGdldEFsbE9yZGVyLCBnZXRPcmRlciwgdXBkYXRlT3JkZXIsIGRlbGV0ZU9yZGVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9vcmRlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL29yZGVycycsIGNyZWF0ZU9yZGVyKTtcclxucm91dGVyLmdldCgnL29yZGVycycsIGdldEFsbE9yZGVyKTtcclxucm91dGVyLmdldCgnL29yZGVycy86aWQnLCBnZXRPcmRlcik7XHJcbnJvdXRlci5wdXQoJy9vcmRlcnMvOmlkJywgdXBkYXRlT3JkZXIpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvb3JkZXJzLzppZCcsIGRlbGV0ZU9yZGVyKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLFdBQVc7RUFBRUMsV0FBVztFQUFFQyxRQUFRO0VBQUVDLFdBQVc7RUFBRUM7QUFBWSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztBQUNuSCxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRVAsV0FBVyxDQUFDO0FBQ25DSyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxTQUFTLEVBQUVQLFdBQVcsQ0FBQztBQUNsQ0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsYUFBYSxFQUFFTixRQUFRLENBQUM7QUFDbkNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLGFBQWEsRUFBRU4sV0FBVyxDQUFDO0FBQ3RDRSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxhQUFhLEVBQUVOLFdBQVcsQ0FBQztBQUV6Q08sTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","createOrder","getAllOrder","getOrder","updateOrder","deleteOrder","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["order_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createOrder, getAllOrder, getOrder, updateOrder, deleteOrder } = require('../controllers/order_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/orders', createOrder);\r\nrouter.get('/orders', getAllOrder);\r\nrouter.get('/orders/:id', getOrder);\r\nrouter.put('/orders/:id', updateOrder);\r\nrouter.delete('/orders/:id', deleteOrder);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,WAAW;EAAEC,WAAW;EAAEC,QAAQ;EAAEC,WAAW;EAAEC;AAAY,CAAC,GAAGL,OAAO,CAAC,iCAAiC,CAAC;AACnH,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEP,WAAW,CAAC;AACnCK,MAAM,CAACG,GAAG,CAAC,SAAS,EAAEP,WAAW,CAAC;AAClCI,MAAM,CAACG,GAAG,CAAC,aAAa,EAAEN,QAAQ,CAAC;AACnCG,MAAM,CAACI,GAAG,CAAC,aAAa,EAAEN,WAAW,CAAC;AACtCE,MAAM,CAACK,MAAM,CAAC,aAAa,EAAEN,WAAW,CAAC;AAEzCO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718121410060},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"filename\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\\\\Routes\\\\user_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\xampp\\\\htdocs\\\\PerfumeStore\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst usercontroller = require('../controllers/user_controller');\nconst router = express.Router();\nrouter.post('/addUser', usercontroller.addUserByAdmin);\nrouter.post('/login', usercontroller.login);\nrouter.get('/logout/:uid', usercontroller.logout);\nrouter.get('/getallUser', usercontroller.getAlluser);\nrouter.get('/getUser/:uid', usercontroller.getUsers);\nrouter.delete('/deleteUser/:uid', usercontroller.deleteUser);\nrouter.put('/updateUser/:uid', usercontroller.updateUser);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJjb250cm9sbGVyIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImFkZFVzZXJCeUFkbWluIiwibG9naW4iLCJnZXQiLCJsb2dvdXQiLCJnZXRBbGx1c2VyIiwiZ2V0VXNlcnMiLCJkZWxldGUiLCJkZWxldGVVc2VyIiwicHV0IiwidXBkYXRlVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFx4YW1wcFxcaHRkb2NzXFxQZXJmdW1lU3RvcmVcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbInVzZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHVzZXJjb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdXNlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FkZFVzZXInLHVzZXJjb250cm9sbGVyLmFkZFVzZXJCeUFkbWluKTtcclxucm91dGVyLnBvc3QoJy9sb2dpbicsdXNlcmNvbnRyb2xsZXIubG9naW4pO1xyXG5yb3V0ZXIuZ2V0KCcvbG9nb3V0Lzp1aWQnLHVzZXJjb250cm9sbGVyLmxvZ291dCk7XHJcbnJvdXRlci5nZXQoJy9nZXRhbGxVc2VyJyx1c2VyY29udHJvbGxlci5nZXRBbGx1c2VyKTtcclxucm91dGVyLmdldCgnL2dldFVzZXIvOnVpZCcsdXNlcmNvbnRyb2xsZXIuZ2V0VXNlcnMpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvZGVsZXRlVXNlci86dWlkJyx1c2VyY29udHJvbGxlci5kZWxldGVVc2VyKTtcclxucm91dGVyLnB1dCgnL3VwZGF0ZVVzZXIvOnVpZCcsdXNlcmNvbnRyb2xsZXIudXBkYXRlVXNlcik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUNoRSxNQUFNRSxNQUFNLEdBQUdILE9BQU8sQ0FBQ0ksTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFVBQVUsRUFBQ0gsY0FBYyxDQUFDSSxjQUFjLENBQUM7QUFDckRILE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFFBQVEsRUFBQ0gsY0FBYyxDQUFDSyxLQUFLLENBQUM7QUFDMUNKLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGNBQWMsRUFBQ04sY0FBYyxDQUFDTyxNQUFNLENBQUM7QUFDaEROLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGFBQWEsRUFBQ04sY0FBYyxDQUFDUSxVQUFVLENBQUM7QUFDbkRQLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGVBQWUsRUFBQ04sY0FBYyxDQUFDUyxRQUFRLENBQUM7QUFDbkRSLE1BQU0sQ0FBQ1MsTUFBTSxDQUFDLGtCQUFrQixFQUFDVixjQUFjLENBQUNXLFVBQVUsQ0FBQztBQUMzRFYsTUFBTSxDQUFDVyxHQUFHLENBQUMsa0JBQWtCLEVBQUNaLGNBQWMsQ0FBQ2EsVUFBVSxDQUFDO0FBRXhEQyxNQUFNLENBQUNDLE9BQU8sR0FBR2QsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","usercontroller","router","Router","post","addUserByAdmin","login","get","logout","getAlluser","getUsers","delete","deleteUser","put","updateUser","module","exports"],"sourceRoot":"D:\\xampp\\htdocs\\PerfumeStore\\Server\\Routes\\","sources":["user_routes.js"],"sourcesContent":["const express = require('express');\r\nconst usercontroller = require('../controllers/user_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/addUser',usercontroller.addUserByAdmin);\r\nrouter.post('/login',usercontroller.login);\r\nrouter.get('/logout/:uid',usercontroller.logout);\r\nrouter.get('/getallUser',usercontroller.getAlluser);\r\nrouter.get('/getUser/:uid',usercontroller.getUsers);\r\nrouter.delete('/deleteUser/:uid',usercontroller.deleteUser);\r\nrouter.put('/updateUser/:uid',usercontroller.updateUser);\r\n\r\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,cAAc,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAChE,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,UAAU,EAACH,cAAc,CAACI,cAAc,CAAC;AACrDH,MAAM,CAACE,IAAI,CAAC,QAAQ,EAACH,cAAc,CAACK,KAAK,CAAC;AAC1CJ,MAAM,CAACK,GAAG,CAAC,cAAc,EAACN,cAAc,CAACO,MAAM,CAAC;AAChDN,MAAM,CAACK,GAAG,CAAC,aAAa,EAACN,cAAc,CAACQ,UAAU,CAAC;AACnDP,MAAM,CAACK,GAAG,CAAC,eAAe,EAACN,cAAc,CAACS,QAAQ,CAAC;AACnDR,MAAM,CAACS,MAAM,CAAC,kBAAkB,EAACV,cAAc,CAACW,UAAU,CAAC;AAC3DV,MAAM,CAACW,GAAG,CAAC,kBAAkB,EAACZ,cAAc,CAACa,UAAU,CAAC;AAExDC,MAAM,CAACC,OAAO,GAAGd,MAAM","ignoreList":[]}},"mtime":1718434247218},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst app = express();\nconst {\n  connectDB\n} = require('./config/db');\nconst initRoute = require('./Routes/index');\nconst cors = require('cors');\nrequire('dotenv').config();\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: true\n}));\napp.use(cors());\nconnectDB();\ninitRoute(app);\napp.listen(process.env.PORT || 8080, () => {\n  console.log('Server running on port', process.env.PORT || 8080);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImNvbm5lY3REQiIsImluaXRSb3V0ZSIsImNvcnMiLCJjb25maWciLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuY29uc3QgeyBjb25uZWN0REIgfSA9IHJlcXVpcmUoJy4vY29uZmlnL2RiJyk7XHJcbmNvbnN0IGluaXRSb3V0ZSA9IHJlcXVpcmUoJy4vUm91dGVzL2luZGV4Jyk7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XHJcblxyXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcclxuXHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcclxuXHJcbmFwcC51c2UoY29ycygpKTtcclxuXHJcbmNvbm5lY3REQigpO1xyXG5cclxuaW5pdFJvdXRlKGFwcCk7XHJcblxyXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQgfHwgODA4MCwgKCkgPT4ge1xyXG5jb25zb2xlLmxvZygnU2VydmVyIHJ1bm5pbmcgb24gcG9ydCcsIHByb2Nlc3MuZW52LlBPUlQgfHwgODA4MCk7XHJcbn0pIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsR0FBRyxHQUFHRixPQUFPLENBQUMsQ0FBQztBQUNyQixNQUFNO0VBQUVHO0FBQVUsQ0FBQyxHQUFHRixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQzVDLE1BQU1HLFNBQVMsR0FBR0gsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQzNDLE1BQU1JLElBQUksR0FBR0osT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QkEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDSyxNQUFNLENBQUMsQ0FBQztBQUUxQkosR0FBRyxDQUFDSyxHQUFHLENBQUNQLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN2Qk4sR0FBRyxDQUFDSyxHQUFHLENBQUNQLE9BQU8sQ0FBQ1MsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDO0FBRS9DUixHQUFHLENBQUNLLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUVmRixTQUFTLENBQUMsQ0FBQztBQUVYQyxTQUFTLENBQUNGLEdBQUcsQ0FBQztBQUVkQSxHQUFHLENBQUNTLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksSUFBSSxJQUFJLEVBQUUsTUFBTTtFQUMzQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0JBQXdCLEVBQUVKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLElBQUksSUFBSSxDQUFDO0FBQy9ELENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","app","connectDB","initRoute","cors","config","use","json","urlencoded","extended","listen","process","env","PORT","console","log"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst app = express();\r\nconst { connectDB } = require('./config/db');\r\nconst initRoute = require('./Routes/index');\r\nconst cors = require('cors');\r\n\r\nrequire('dotenv').config();\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\n\r\napp.use(cors());\r\n\r\nconnectDB();\r\n\r\ninitRoute(app);\r\n\r\napp.listen(process.env.PORT || 8080, () => {\r\nconsole.log('Server running on port', process.env.PORT || 8080);\r\n})"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGF,OAAO,CAAC,CAAC;AACrB,MAAM;EAAEG;AAAU,CAAC,GAAGF,OAAO,CAAC,aAAa,CAAC;AAC5C,MAAMG,SAAS,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AAC3C,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAE5BA,OAAO,CAAC,QAAQ,CAAC,CAACK,MAAM,CAAC,CAAC;AAE1BJ,GAAG,CAACK,GAAG,CAACP,OAAO,CAACQ,IAAI,CAAC,CAAC,CAAC;AACvBN,GAAG,CAACK,GAAG,CAACP,OAAO,CAACS,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAE/CR,GAAG,CAACK,GAAG,CAACF,IAAI,CAAC,CAAC,CAAC;AAEfF,SAAS,CAAC,CAAC;AAEXC,SAAS,CAACF,GAAG,CAAC;AAEdA,GAAG,CAACS,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI,EAAE,MAAM;EAC3CC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEJ,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI,CAAC;AAC/D,CAAC,CAAC","ignoreList":[]}},"mtime":1718445993630},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\config\\\\db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const {\n  Sequelize\n} = require('sequelize');\nconst sequelize = new Sequelize('db_perfume', 'root', null, {\n  host: 'localhost',\n  dialect: 'mysql'\n});\nconst connectDB = async () => {\n  try {\n    await sequelize.authenticate();\n    console.log('MySQL connected...');\n  } catch (err) {\n    console.error('Unable to connect to the database:', err);\n    process.exit(1);\n  }\n};\nmodule.exports = {\n  sequelize,\n  connectDB\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiaG9zdCIsImRpYWxlY3QiLCJjb25uZWN0REIiLCJhdXRoZW50aWNhdGUiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3IiLCJwcm9jZXNzIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcY29uZmlnXFwiLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbmNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoJ2RiX3BlcmZ1bWUnLCAncm9vdCcsIG51bGwsIHtcclxuICBob3N0OiAnbG9jYWxob3N0JyxcclxuICBkaWFsZWN0OiAnbXlzcWwnLFxyXG59KTtcclxuXHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpO1xyXG4gICAgY29uc29sZS5sb2coJ015U1FMIGNvbm5lY3RlZC4uLicpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOicsIGVycik7XHJcbiAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHNlcXVlbGl6ZSwgY29ubmVjdERCIH07Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVUsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRTFDLE1BQU1DLFNBQVMsR0FBRyxJQUFJRixTQUFTLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7RUFDMURHLElBQUksRUFBRSxXQUFXO0VBQ2pCQyxPQUFPLEVBQUU7QUFDWCxDQUFDLENBQUM7QUFFRixNQUFNQyxTQUFTLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzVCLElBQUk7SUFDRixNQUFNSCxTQUFTLENBQUNJLFlBQVksQ0FBQyxDQUFDO0lBQzlCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztFQUNuQyxDQUFDLENBQUMsT0FBT0MsR0FBRyxFQUFFO0lBQ1pGLE9BQU8sQ0FBQ0csS0FBSyxDQUFDLG9DQUFvQyxFQUFFRCxHQUFHLENBQUM7SUFDeERFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQjtBQUNGLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRVosU0FBUztFQUFFRztBQUFVLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Sequelize","require","sequelize","host","dialect","connectDB","authenticate","console","log","err","error","process","exit","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\config\\","sources":["db.js"],"sourcesContent":["const { Sequelize } = require('sequelize');\r\n\r\nconst sequelize = new Sequelize('db_perfume', 'root', null, {\r\n  host: 'localhost',\r\n  dialect: 'mysql',\r\n});\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    await sequelize.authenticate();\r\n    console.log('MySQL connected...');\r\n  } catch (err) {\r\n    console.error('Unable to connect to the database:', err);\r\n    process.exit(1);\r\n  }\r\n};\r\n\r\nmodule.exports = { sequelize, connectDB };"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAE1C,MAAMC,SAAS,GAAG,IAAIF,SAAS,CAAC,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE;EAC1DG,IAAI,EAAE,WAAW;EACjBC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMH,SAAS,CAACI,YAAY,CAAC,CAAC;IAC9BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACnC,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZF,OAAO,CAACG,KAAK,CAAC,oCAAoC,EAAED,GAAG,CAAC;IACxDE,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;EACjB;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEZ,SAAS;EAAEG;AAAU,CAAC","ignoreList":[]}},"mtime":1718445986386},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const productRouter = require('./product_routes');\nconst categoryRouter = require('./category_routes');\nconst invoiceRouter = require('./invoice_routes');\nconst customerRouter = require('./customer_routes');\nconst employeeRouter = require('./emloyee_routes');\nconst orderRouter = require('./order_routes');\nconst userRouter = require('./user_routes');\nconst voucherRouter = require('./voucher_routes');\nconst initRoute = app => {\n  app.use('/api/product', productRouter);\n  app.use('/api/category', categoryRouter);\n  app.use('/api/invoice', invoiceRouter);\n  app.use('/api/customer', customerRouter);\n  app.use('/api/employee', employeeRouter);\n  app.use('/api/order', orderRouter);\n  app.use('/api/user', userRouter);\n  app.use('/api/voucher', voucherRouter);\n};\nmodule.exports = initRoute;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwicmVxdWlyZSIsImNhdGVnb3J5Um91dGVyIiwiaW52b2ljZVJvdXRlciIsImN1c3RvbWVyUm91dGVyIiwiZW1wbG95ZWVSb3V0ZXIiLCJvcmRlclJvdXRlciIsInVzZXJSb3V0ZXIiLCJ2b3VjaGVyUm91dGVyIiwiaW5pdFJvdXRlIiwiYXBwIiwidXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJvZHVjdFJvdXRlciA9IHJlcXVpcmUoJy4vcHJvZHVjdF9yb3V0ZXMnKTtcclxuY29uc3QgY2F0ZWdvcnlSb3V0ZXIgPSByZXF1aXJlKCcuL2NhdGVnb3J5X3JvdXRlcycpO1xyXG5jb25zdCBpbnZvaWNlUm91dGVyID0gcmVxdWlyZSgnLi9pbnZvaWNlX3JvdXRlcycpO1xyXG5jb25zdCBjdXN0b21lclJvdXRlciA9IHJlcXVpcmUoJy4vY3VzdG9tZXJfcm91dGVzJyk7XHJcbmNvbnN0IGVtcGxveWVlUm91dGVyID0gcmVxdWlyZSgnLi9lbWxveWVlX3JvdXRlcycpO1xyXG5jb25zdCBvcmRlclJvdXRlciA9IHJlcXVpcmUoJy4vb3JkZXJfcm91dGVzJyk7XHJcbmNvbnN0IHVzZXJSb3V0ZXIgPSByZXF1aXJlKCcuL3VzZXJfcm91dGVzJyk7XHJcbmNvbnN0IHZvdWNoZXJSb3V0ZXIgPSByZXF1aXJlKCcuL3ZvdWNoZXJfcm91dGVzJyk7XHJcblxyXG5jb25zdCBpbml0Um91dGUgPSAoYXBwKSA9PiB7XHJcbiAgICBhcHAudXNlKCcvYXBpL3Byb2R1Y3QnLCBwcm9kdWN0Um91dGVyKTtcclxuICAgIGFwcC51c2UoJy9hcGkvY2F0ZWdvcnknLCBjYXRlZ29yeVJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2ludm9pY2UnLCBpbnZvaWNlUm91dGVyKTtcclxuICAgIGFwcC51c2UoJy9hcGkvY3VzdG9tZXInLCBjdXN0b21lclJvdXRlcik7XHJcbiAgICBhcHAudXNlKCcvYXBpL2VtcGxveWVlJywgZW1wbG95ZWVSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS9vcmRlcicsIG9yZGVyUm91dGVyKTtcclxuICAgIGFwcC51c2UoJy9hcGkvdXNlcicsIHVzZXJSb3V0ZXIpO1xyXG4gICAgYXBwLnVzZSgnL2FwaS92b3VjaGVyJyx2b3VjaGVyUm91dGVyKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBpbml0Um91dGU7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxhQUFhLEdBQUdDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUNqRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNuRCxNQUFNRSxhQUFhLEdBQUdGLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUNqRCxNQUFNRyxjQUFjLEdBQUdILE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNuRCxNQUFNSSxjQUFjLEdBQUdKLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUNsRCxNQUFNSyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUM3QyxNQUFNTSxVQUFVLEdBQUdOLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDM0MsTUFBTU8sYUFBYSxHQUFHUCxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFFakQsTUFBTVEsU0FBUyxHQUFJQyxHQUFHLElBQUs7RUFDdkJBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGNBQWMsRUFBRVgsYUFBYSxDQUFDO0VBQ3RDVSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxlQUFlLEVBQUVULGNBQWMsQ0FBQztFQUN4Q1EsR0FBRyxDQUFDQyxHQUFHLENBQUMsY0FBYyxFQUFFUixhQUFhLENBQUM7RUFDdENPLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRVAsY0FBYyxDQUFDO0VBQ3hDTSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxlQUFlLEVBQUVOLGNBQWMsQ0FBQztFQUN4Q0ssR0FBRyxDQUFDQyxHQUFHLENBQUMsWUFBWSxFQUFFTCxXQUFXLENBQUM7RUFDbENJLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFdBQVcsRUFBRUosVUFBVSxDQUFDO0VBQ2hDRyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxjQUFjLEVBQUNILGFBQWEsQ0FBQztBQUN6QyxDQUFDO0FBRURJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSixTQUFTIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["productRouter","require","categoryRouter","invoiceRouter","customerRouter","employeeRouter","orderRouter","userRouter","voucherRouter","initRoute","app","use","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["index.js"],"sourcesContent":["const productRouter = require('./product_routes');\r\nconst categoryRouter = require('./category_routes');\r\nconst invoiceRouter = require('./invoice_routes');\r\nconst customerRouter = require('./customer_routes');\r\nconst employeeRouter = require('./emloyee_routes');\r\nconst orderRouter = require('./order_routes');\r\nconst userRouter = require('./user_routes');\r\nconst voucherRouter = require('./voucher_routes');\r\n\r\nconst initRoute = (app) => {\r\n    app.use('/api/product', productRouter);\r\n    app.use('/api/category', categoryRouter);\r\n    app.use('/api/invoice', invoiceRouter);\r\n    app.use('/api/customer', customerRouter);\r\n    app.use('/api/employee', employeeRouter);\r\n    app.use('/api/order', orderRouter);\r\n    app.use('/api/user', userRouter);\r\n    app.use('/api/voucher',voucherRouter);\r\n}\r\n\r\nmodule.exports = initRoute;"],"mappings":"AAAA,MAAMA,aAAa,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMC,cAAc,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAME,aAAa,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AACjD,MAAMG,cAAc,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAMI,cAAc,GAAGJ,OAAO,CAAC,kBAAkB,CAAC;AAClD,MAAMK,WAAW,GAAGL,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAMM,UAAU,GAAGN,OAAO,CAAC,eAAe,CAAC;AAC3C,MAAMO,aAAa,GAAGP,OAAO,CAAC,kBAAkB,CAAC;AAEjD,MAAMQ,SAAS,GAAIC,GAAG,IAAK;EACvBA,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEX,aAAa,CAAC;EACtCU,GAAG,CAACC,GAAG,CAAC,eAAe,EAAET,cAAc,CAAC;EACxCQ,GAAG,CAACC,GAAG,CAAC,cAAc,EAAER,aAAa,CAAC;EACtCO,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEP,cAAc,CAAC;EACxCM,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEN,cAAc,CAAC;EACxCK,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEL,WAAW,CAAC;EAClCI,GAAG,CAACC,GAAG,CAAC,WAAW,EAAEJ,UAAU,CAAC;EAChCG,GAAG,CAACC,GAAG,CAAC,cAAc,EAACH,aAAa,CAAC;AACzC,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGJ,SAAS","ignoreList":[]}},"mtime":1718462668991},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\product_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createProduct,\n  getAllProduct,\n  getProduct,\n  updateProduct,\n  deleteProduct,\n  uploadImageProduct\n} = require('../controllers/product_controller');\nconst router = express.Router();\nrouter.post('/createProduct', createProduct); //ok\nrouter.get('/getAllProduct', getAllProduct); //ok\nrouter.get('/getProduct/:pid', getProduct); //ok\nrouter.put('/updateProduct/:pid', updateProduct);\nrouter.delete('/deleteProduct/:pid', deleteProduct); //ok\nrouter.put('/uploadImageProduct/:pid', uploadImageProduct);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZVByb2R1Y3QiLCJnZXRBbGxQcm9kdWN0IiwiZ2V0UHJvZHVjdCIsInVwZGF0ZVByb2R1Y3QiLCJkZWxldGVQcm9kdWN0IiwidXBsb2FkSW1hZ2VQcm9kdWN0Iiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbInByb2R1Y3Rfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlUHJvZHVjdCwgZ2V0QWxsUHJvZHVjdCwgZ2V0UHJvZHVjdCwgdXBkYXRlUHJvZHVjdCwgZGVsZXRlUHJvZHVjdCwgdXBsb2FkSW1hZ2VQcm9kdWN0IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9wcm9kdWN0X2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvY3JlYXRlUHJvZHVjdCcsIGNyZWF0ZVByb2R1Y3QpOy8vb2tcclxucm91dGVyLmdldCgnL2dldEFsbFByb2R1Y3QnLCBnZXRBbGxQcm9kdWN0KTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRQcm9kdWN0LzpwaWQnLCBnZXRQcm9kdWN0KTsvL29rXHJcbnJvdXRlci5wdXQoJy91cGRhdGVQcm9kdWN0LzpwaWQnLCB1cGRhdGVQcm9kdWN0KTtcclxucm91dGVyLmRlbGV0ZSgnL2RlbGV0ZVByb2R1Y3QvOnBpZCcsIGRlbGV0ZVByb2R1Y3QpOy8vb2tcclxucm91dGVyLnB1dCgnL3VwbG9hZEltYWdlUHJvZHVjdC86cGlkJyx1cGxvYWRJbWFnZVByb2R1Y3QpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsYUFBYTtFQUFFQyxhQUFhO0VBQUVDLFVBQVU7RUFBRUMsYUFBYTtFQUFFQyxhQUFhO0VBQUVDO0FBQW1CLENBQUMsR0FBR04sT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQ25KLE1BQU1PLE1BQU0sR0FBR1IsT0FBTyxDQUFDUyxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUVSLGFBQWEsQ0FBQyxDQUFDO0FBQzdDTSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRVIsYUFBYSxDQUFDLENBQUM7QUFDNUNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGtCQUFrQixFQUFFUCxVQUFVLENBQUMsQ0FBQztBQUMzQ0ksTUFBTSxDQUFDSSxHQUFHLENBQUMscUJBQXFCLEVBQUVQLGFBQWEsQ0FBQztBQUNoREcsTUFBTSxDQUFDSyxNQUFNLENBQUMscUJBQXFCLEVBQUVQLGFBQWEsQ0FBQyxDQUFDO0FBQ3BERSxNQUFNLENBQUNJLEdBQUcsQ0FBQywwQkFBMEIsRUFBQ0wsa0JBQWtCLENBQUM7QUFFekRPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createProduct","getAllProduct","getProduct","updateProduct","deleteProduct","uploadImageProduct","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["product_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createProduct, getAllProduct, getProduct, updateProduct, deleteProduct, uploadImageProduct } = require('../controllers/product_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createProduct', createProduct);//ok\r\nrouter.get('/getAllProduct', getAllProduct);//ok\r\nrouter.get('/getProduct/:pid', getProduct);//ok\r\nrouter.put('/updateProduct/:pid', updateProduct);\r\nrouter.delete('/deleteProduct/:pid', deleteProduct);//ok\r\nrouter.put('/uploadImageProduct/:pid',uploadImageProduct);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC,aAAa;EAAEC;AAAmB,CAAC,GAAGN,OAAO,CAAC,mCAAmC,CAAC;AACnJ,MAAMO,MAAM,GAAGR,OAAO,CAACS,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,gBAAgB,EAAER,aAAa,CAAC,CAAC;AAC7CM,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAER,aAAa,CAAC,CAAC;AAC5CK,MAAM,CAACG,GAAG,CAAC,kBAAkB,EAAEP,UAAU,CAAC,CAAC;AAC3CI,MAAM,CAACI,GAAG,CAAC,qBAAqB,EAAEP,aAAa,CAAC;AAChDG,MAAM,CAACK,MAAM,CAAC,qBAAqB,EAAEP,aAAa,CAAC,CAAC;AACpDE,MAAM,CAACI,GAAG,CAAC,0BAA0B,EAACL,kBAAkB,CAAC;AAEzDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498090715},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\product_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const {\n  Op\n} = require('sequelize');\nconst db = require('../Models');\nconst Product = require('../Models/product');\nconst Category = require('../Models/category');\nconst asyncHandler = require('express-async-handler');\nconst createProduct = asyncHandler(async (req, res) => {\n  const {\n    CategoryID,\n    Name,\n    Brand,\n    Description,\n    Volume,\n    Price,\n    image,\n    Inventory\n  } = req.body;\n\n  // Kiểm tra xem các trường bắt buộc có đầy đủ không\n  if (!CategoryID || !Name || !Brand || !Description || !Volume || !Price || !Inventory) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  try {\n    // Tạo sản phẩm mới\n    const newProduct = await db.Product.create({\n      CategoryID,\n      Name,\n      Brand,\n      Description,\n      Volume,\n      Price,\n      image,\n      Inventory\n    });\n\n    // Trả về phản hồi thành công với sản phẩm vừa tạo\n    return res.status(201).json({\n      success: true,\n      mes: 'Thêm sản phẩm thành công',\n      createdProduct: newProduct\n    });\n  } catch (error) {\n    // Trả về phản hồi lỗi nếu có lỗi xảy ra\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    // Tìm sản phẩm theo ID và bao gồm danh mục\n    const product = await db.Product.findOne({\n      where: {\n        ProductID: pid\n      },\n      include: [{\n        model: db.Category,\n        as: 'Category'\n      }] // Sử dụng alias 'category'\n    });\n    if (product) {\n      res.status(200).json({\n        success: true,\n        productData: product\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        productData: \"Không tìm thấy sản phẩm này\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst updateProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    const [updated] = await db.Product.update(req.body, {\n      where: {\n        ProductID: pid\n      }\n    });\n    if (updated) {\n      const updatedProduct = await db.Product.findByPk(pid);\n      res.status(200).json({\n        success: true,\n        updatedProduct: updatedProduct\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        message: \"Không tìm thấy sản phẩm hoặc không có gì được cập nhật\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error.message\n    });\n  }\n});\nconst deleteProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    const deleted = await db.Product.destroy({\n      where: {\n        ProductID: pid\n      }\n    });\n    if (deleted) {\n      res.status(200).json({\n        success: true,\n        message: \"Sản phẩm đã được xoá\"\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        message: \"Không tìm thấy sản phẩm hoặc không có gì được xoá\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error.message\n    });\n  }\n});\nconst getAllProduct = asyncHandler(async (req, res) => {\n  try {\n    // Tìm sản phẩm theo ID và bao gồm danh mục\n    const product = await db.Product.findAll({\n      include: [{\n        model: db.Category,\n        as: 'Category'\n      }] // Sử dụng alias 'category'\n    });\n    if (product) {\n      res.status(200).json({\n        success: true,\n        productData: product\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        productData: \"Không tìm thấy sản phẩm này\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst uploadImageProduct = asyncHandler(async (req, res) => {\n  const {\n    pid\n  } = req.params;\n  try {\n    if (!req.files || req.files.length === 0) {\n      throw new Error(\"Không có ảnh được tải lên\");\n    }\n    const product = await db.Product.findByPk(pid);\n    if (!product) {\n      throw new Error(\"Không tìm thấy sản phẩm\");\n    }\n    const imagePaths = req.files.map(el => el.path);\n    await db.product.update({\n      Image: [...product.Image, ...imagePaths]\n    });\n    return res.status(200).json({\n      success: true,\n      message: \"Ảnh đã được tải lên thành công\",\n      product\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nmodule.exports = {\n  createProduct,\n  getProduct,\n  updateProduct,\n  deleteProduct,\n  getAllProduct,\n  uploadImageProduct\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcCIsInJlcXVpcmUiLCJkYiIsIlByb2R1Y3QiLCJDYXRlZ29yeSIsImFzeW5jSGFuZGxlciIsImNyZWF0ZVByb2R1Y3QiLCJyZXEiLCJyZXMiLCJDYXRlZ29yeUlEIiwiTmFtZSIsIkJyYW5kIiwiRGVzY3JpcHRpb24iLCJWb2x1bWUiLCJQcmljZSIsImltYWdlIiwiSW52ZW50b3J5IiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzIiwibmV3UHJvZHVjdCIsImNyZWF0ZSIsImNyZWF0ZWRQcm9kdWN0IiwiZXJyb3IiLCJtZXNzYWdlIiwiZ2V0UHJvZHVjdCIsInBpZCIsInBhcmFtcyIsInByb2R1Y3QiLCJmaW5kT25lIiwid2hlcmUiLCJQcm9kdWN0SUQiLCJpbmNsdWRlIiwibW9kZWwiLCJhcyIsInByb2R1Y3REYXRhIiwidXBkYXRlUHJvZHVjdCIsInVwZGF0ZWQiLCJ1cGRhdGUiLCJ1cGRhdGVkUHJvZHVjdCIsImZpbmRCeVBrIiwiZGVsZXRlUHJvZHVjdCIsImRlbGV0ZWQiLCJkZXN0cm95IiwiZ2V0QWxsUHJvZHVjdCIsImZpbmRBbGwiLCJ1cGxvYWRJbWFnZVByb2R1Y3QiLCJmaWxlcyIsImxlbmd0aCIsIkVycm9yIiwiaW1hZ2VQYXRocyIsIm1hcCIsImVsIiwicGF0aCIsIkltYWdlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJwcm9kdWN0X2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBPcCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IFByb2R1Y3QgPSByZXF1aXJlKCcuLi9Nb2RlbHMvcHJvZHVjdCcpO1xyXG5jb25zdCBDYXRlZ29yeSA9IHJlcXVpcmUoJy4uL01vZGVscy9jYXRlZ29yeScpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3QgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IENhdGVnb3J5SUQsIE5hbWUsIEJyYW5kLCBEZXNjcmlwdGlvbiwgVm9sdW1lLCBQcmljZSwgaW1hZ2UsIEludmVudG9yeSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gS2nhu4NtIHRyYSB4ZW0gY8OhYyB0csaw4budbmcgYuG6r3QgYnXhu5ljIGPDsyDEkeG6p3kgxJHhu6cga2jDtG5nXHJcbiAgICBpZiAoIUNhdGVnb3J5SUQgfHwgIU5hbWUgfHwgIUJyYW5kIHx8ICFEZXNjcmlwdGlvbiB8fCAhVm9sdW1lIHx8ICFQcmljZSB8fCAhSW52ZW50b3J5KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFThuqFvIHPhuqNuIHBo4bqpbSBt4bubaVxyXG4gICAgICAgIGNvbnN0IG5ld1Byb2R1Y3QgPSBhd2FpdCBkYi5Qcm9kdWN0LmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIENhdGVnb3J5SUQsXHJcbiAgICAgICAgICAgIE5hbWUsXHJcbiAgICAgICAgICAgIEJyYW5kLFxyXG4gICAgICAgICAgICBEZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgVm9sdW1lLFxyXG4gICAgICAgICAgICBQcmljZSxcclxuICAgICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICAgIEludmVudG9yeVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBUcuG6oyB24buBIHBo4bqjbiBo4buTaSB0aMOgbmggY8O0bmcgduG7m2kgc+G6o24gcGjhuqltIHbhu6thIHThuqFvXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzOiAnVGjDqm0gc+G6o24gcGjhuqltIHRow6BuaCBjw7RuZycsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRQcm9kdWN0OiBuZXdQcm9kdWN0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIFRy4bqjIHbhu4EgcGjhuqNuIGjhu5NpIGzhu5dpIG7hur91IGPDsyBs4buXaSB44bqjeSByYVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0UHJvZHVjdCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgcGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBUw6xtIHPhuqNuIHBo4bqpbSB0aGVvIElEIHbDoCBiYW8gZ+G7k20gZGFuaCBt4bulY1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYi5Qcm9kdWN0LmZpbmRPbmUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBQcm9kdWN0SUQ6IHBpZCB9LFxyXG4gICAgICAgICAgICBpbmNsdWRlOiBbeyBtb2RlbDogZGIuQ2F0ZWdvcnksIGFzOiAnQ2F0ZWdvcnknIH1dIC8vIFPhu60gZOG7pW5nIGFsaWFzICdjYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvZHVjdCkge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdERhdGE6IHByb2R1Y3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0RGF0YTogXCJLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltIG7DoHlcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGRhdGVQcm9kdWN0ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBwaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IFt1cGRhdGVkXSA9IGF3YWl0IGRiLlByb2R1Y3QudXBkYXRlKHJlcS5ib2R5LCB7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IFByb2R1Y3RJRDogcGlkIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodXBkYXRlZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IGRiLlByb2R1Y3QuZmluZEJ5UGsocGlkKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRQcm9kdWN0OiB1cGRhdGVkUHJvZHVjdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IHPhuqNuIHBo4bqpbSBob+G6t2Mga2jDtG5nIGPDsyBnw6wgxJHGsOG7o2MgY+G6rXAgbmjhuq10XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZVByb2R1Y3QgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZCA9IGF3YWl0IGRiLlByb2R1Y3QuZGVzdHJveSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IFByb2R1Y3RJRDogcGlkIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJT4bqjbiBwaOG6qW0gxJHDoyDEkcaw4bujYyB4b8OhXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIktow7RuZyB0w6xtIHRo4bqleSBz4bqjbiBwaOG6qW0gaG/hurdjIGtow7RuZyBjw7MgZ8OsIMSRxrDhu6NjIHhvw6FcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0QWxsUHJvZHVjdCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVMOsbSBz4bqjbiBwaOG6qW0gdGhlbyBJRCB2w6AgYmFvIGfhu5NtIGRhbmggbeG7pWNcclxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZGIuUHJvZHVjdC5maW5kQWxsKHtcclxuICAgICAgICAgICAgaW5jbHVkZTogW3sgbW9kZWw6IGRiLkNhdGVnb3J5LCBhczogJ0NhdGVnb3J5JyB9XSAvLyBT4butIGThu6VuZyBhbGlhcyAnY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByb2R1Y3QpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3REYXRhOiBwcm9kdWN0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdERhdGE6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IHPhuqNuIHBo4bqpbSBuw6B5XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHVwbG9hZEltYWdlUHJvZHVjdCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgcGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFyZXEuZmlsZXMgfHwgcmVxLmZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLaMO0bmcgY8OzIOG6o25oIMSRxrDhu6NjIHThuqNpIGzDqm5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZGIuUHJvZHVjdC5maW5kQnlQayhwaWQpO1xyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3QpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiS2jDtG5nIHTDrG0gdGjhuqV5IHPhuqNuIHBo4bqpbVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlUGF0aHMgPSByZXEuZmlsZXMubWFwKGVsID0+IGVsLnBhdGgpO1xyXG5cclxuICAgICAgICBhd2FpdCBkYi5wcm9kdWN0LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgIEltYWdlOiBbLi4ucHJvZHVjdC5JbWFnZSwgLi4uaW1hZ2VQYXRoc11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCLhuqJuaCDEkcOjIMSRxrDhu6NjIHThuqNpIGzDqm4gdGjDoG5oIGPDtG5nXCIsXHJcbiAgICAgICAgICAgIHByb2R1Y3RcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZVByb2R1Y3QsXHJcbiAgICBnZXRQcm9kdWN0LFxyXG4gICAgdXBkYXRlUHJvZHVjdCxcclxuICAgIGRlbGV0ZVByb2R1Y3QsXHJcbiAgICBnZXRBbGxQcm9kdWN0LFxyXG4gICAgdXBsb2FkSW1hZ2VQcm9kdWN0XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFHLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNuQyxNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDL0IsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDNUMsTUFBTUcsUUFBUSxHQUFHSCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDOUMsTUFBTUksWUFBWSxHQUFHSixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFckQsTUFBTUssYUFBYSxHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbkQsTUFBTTtJQUFFQyxVQUFVO0lBQUVDLElBQUk7SUFBRUMsS0FBSztJQUFFQyxXQUFXO0lBQUVDLE1BQU07SUFBRUMsS0FBSztJQUFFQyxLQUFLO0lBQUVDO0VBQVUsQ0FBQyxHQUFHVCxHQUFHLENBQUNVLElBQUk7O0VBRTFGO0VBQ0EsSUFBSSxDQUFDUixVQUFVLElBQUksQ0FBQ0MsSUFBSSxJQUFJLENBQUNDLEtBQUssSUFBSSxDQUFDQyxXQUFXLElBQUksQ0FBQ0MsTUFBTSxJQUFJLENBQUNDLEtBQUssSUFBSSxDQUFDRSxTQUFTLEVBQUU7SUFDbkYsT0FBT1IsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLEtBQUs7TUFDZEMsR0FBRyxFQUFFO0lBQ1QsQ0FBQyxDQUFDO0VBQ047RUFFQSxJQUFJO0lBQ0E7SUFDQSxNQUFNQyxVQUFVLEdBQUcsTUFBTXBCLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDb0IsTUFBTSxDQUFDO01BQ3ZDZCxVQUFVO01BQ1ZDLElBQUk7TUFDSkMsS0FBSztNQUNMQyxXQUFXO01BQ1hDLE1BQU07TUFDTkMsS0FBSztNQUNMQyxLQUFLO01BQ0xDO0lBQ0osQ0FBQyxDQUFDOztJQUVGO0lBQ0EsT0FBT1IsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLElBQUk7TUFDYkMsR0FBRyxFQUFFLDBCQUEwQjtNQUMvQkcsY0FBYyxFQUFFRjtJQUNwQixDQUFDLENBQUM7RUFDTixDQUFDLENBQUMsT0FBT0csS0FBSyxFQUFFO0lBQ1o7SUFDQSxPQUFPakIsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLEtBQUs7TUFDZE0sT0FBTyxFQUFFRCxLQUFLLENBQUNDO0lBQ25CLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTUMsVUFBVSxHQUFHdEIsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2hELE1BQU07SUFBRW9CO0VBQUksQ0FBQyxHQUFHckIsR0FBRyxDQUFDc0IsTUFBTTtFQUMxQixJQUFJO0lBQ0E7SUFDQSxNQUFNQyxPQUFPLEdBQUcsTUFBTTVCLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDNEIsT0FBTyxDQUFDO01BQ3JDQyxLQUFLLEVBQUU7UUFBRUMsU0FBUyxFQUFFTDtNQUFJLENBQUM7TUFDekJNLE9BQU8sRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRWpDLEVBQUUsQ0FBQ0UsUUFBUTtRQUFFZ0MsRUFBRSxFQUFFO01BQVcsQ0FBQyxDQUFDLENBQUM7SUFDdEQsQ0FBQyxDQUFDO0lBQ0YsSUFBSU4sT0FBTyxFQUFFO01BQ1R0QixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ2pCQyxPQUFPLEVBQUUsSUFBSTtRQUNiaUIsV0FBVyxFQUFFUDtNQUNqQixDQUFDLENBQUM7SUFDTixDQUFDLE1BQU07TUFDSHRCLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDakJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RpQixXQUFXLEVBQUU7TUFDakIsQ0FBQyxDQUFDO0lBQ047RUFDSixDQUFDLENBQUMsT0FBT1osS0FBSyxFQUFFO0lBQ1pqQixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ2pCQyxPQUFPLEVBQUUsS0FBSztNQUNkTSxPQUFPLEVBQUVELEtBQUssQ0FBQ0M7SUFDbkIsQ0FBQyxDQUFDO0VBQ047QUFDSixDQUFDLENBQUM7QUFFRixNQUFNWSxhQUFhLEdBQUdqQyxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbkQsTUFBTTtJQUFFb0I7RUFBSSxDQUFDLEdBQUdyQixHQUFHLENBQUNzQixNQUFNO0VBQzFCLElBQUk7SUFDQSxNQUFNLENBQUNVLE9BQU8sQ0FBQyxHQUFHLE1BQU1yQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ3FDLE1BQU0sQ0FBQ2pDLEdBQUcsQ0FBQ1UsSUFBSSxFQUFFO01BQ2hEZSxLQUFLLEVBQUU7UUFBRUMsU0FBUyxFQUFFTDtNQUFJO0lBQzVCLENBQUMsQ0FBQztJQUNGLElBQUlXLE9BQU8sRUFBRTtNQUNULE1BQU1FLGNBQWMsR0FBRyxNQUFNdkMsRUFBRSxDQUFDQyxPQUFPLENBQUN1QyxRQUFRLENBQUNkLEdBQUcsQ0FBQztNQUNyRHBCLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDakJDLE9BQU8sRUFBRSxJQUFJO1FBQ2JxQixjQUFjLEVBQUVBO01BQ3BCLENBQUMsQ0FBQztJQUNOLENBQUMsTUFBTTtNQUNIakMsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUNqQkMsT0FBTyxFQUFFLEtBQUs7UUFDZE0sT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ047RUFDSixDQUFDLENBQUMsT0FBT0QsS0FBSyxFQUFFO0lBQ1pqQixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ2pCQyxPQUFPLEVBQUUsS0FBSztNQUNkSyxLQUFLLEVBQUVBLEtBQUssQ0FBQ0M7SUFDakIsQ0FBQyxDQUFDO0VBQ047QUFDSixDQUFDLENBQUM7QUFFRixNQUFNaUIsYUFBYSxHQUFHdEMsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25ELE1BQU07SUFBRW9CO0VBQUksQ0FBQyxHQUFHckIsR0FBRyxDQUFDc0IsTUFBTTtFQUMxQixJQUFJO0lBQ0EsTUFBTWUsT0FBTyxHQUFHLE1BQU0xQyxFQUFFLENBQUNDLE9BQU8sQ0FBQzBDLE9BQU8sQ0FBQztNQUNyQ2IsS0FBSyxFQUFFO1FBQUVDLFNBQVMsRUFBRUw7TUFBSTtJQUM1QixDQUFDLENBQUM7SUFDRixJQUFJZ0IsT0FBTyxFQUFFO01BQ1RwQyxHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ2pCQyxPQUFPLEVBQUUsSUFBSTtRQUNiTSxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTixDQUFDLE1BQU07TUFDSGxCLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDakJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RNLE9BQU8sRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNOO0VBQ0osQ0FBQyxDQUFDLE9BQU9ELEtBQUssRUFBRTtJQUNaakIsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNqQkMsT0FBTyxFQUFFLEtBQUs7TUFDZEssS0FBSyxFQUFFQSxLQUFLLENBQUNDO0lBQ2pCLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTW9CLGFBQWEsR0FBR3pDLFlBQVksQ0FBQyxPQUFPRSxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNuRCxJQUFJO0lBQ0E7SUFDQSxNQUFNc0IsT0FBTyxHQUFHLE1BQU01QixFQUFFLENBQUNDLE9BQU8sQ0FBQzRDLE9BQU8sQ0FBQztNQUNyQ2IsT0FBTyxFQUFFLENBQUM7UUFBRUMsS0FBSyxFQUFFakMsRUFBRSxDQUFDRSxRQUFRO1FBQUVnQyxFQUFFLEVBQUU7TUFBVyxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDLENBQUM7SUFDRixJQUFJTixPQUFPLEVBQUU7TUFDVHRCLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDakJDLE9BQU8sRUFBRSxJQUFJO1FBQ2JpQixXQUFXLEVBQUVQO01BQ2pCLENBQUMsQ0FBQztJQUNOLENBQUMsTUFBTTtNQUNIdEIsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUNqQkMsT0FBTyxFQUFFLEtBQUs7UUFDZGlCLFdBQVcsRUFBRTtNQUNqQixDQUFDLENBQUM7SUFDTjtFQUNKLENBQUMsQ0FBQyxPQUFPWixLQUFLLEVBQUU7SUFDWmpCLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDakJDLE9BQU8sRUFBRSxLQUFLO01BQ2RNLE9BQU8sRUFBRUQsS0FBSyxDQUFDQztJQUNuQixDQUFDLENBQUM7RUFDTjtBQUNKLENBQUMsQ0FBQztBQUdGLE1BQU1zQixrQkFBa0IsR0FBRzNDLFlBQVksQ0FBQyxPQUFPRSxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4RCxNQUFNO0lBQUVvQjtFQUFJLENBQUMsR0FBR3JCLEdBQUcsQ0FBQ3NCLE1BQU07RUFFMUIsSUFBSTtJQUNBLElBQUksQ0FBQ3RCLEdBQUcsQ0FBQzBDLEtBQUssSUFBSTFDLEdBQUcsQ0FBQzBDLEtBQUssQ0FBQ0MsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN0QyxNQUFNLElBQUlDLEtBQUssQ0FBQywyQkFBMkIsQ0FBQztJQUNoRDtJQUVBLE1BQU1yQixPQUFPLEdBQUcsTUFBTTVCLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDdUMsUUFBUSxDQUFDZCxHQUFHLENBQUM7SUFFOUMsSUFBSSxDQUFDRSxPQUFPLEVBQUU7TUFDVixNQUFNLElBQUlxQixLQUFLLENBQUMseUJBQXlCLENBQUM7SUFDOUM7SUFFQSxNQUFNQyxVQUFVLEdBQUc3QyxHQUFHLENBQUMwQyxLQUFLLENBQUNJLEdBQUcsQ0FBQ0MsRUFBRSxJQUFJQSxFQUFFLENBQUNDLElBQUksQ0FBQztJQUUvQyxNQUFNckQsRUFBRSxDQUFDNEIsT0FBTyxDQUFDVSxNQUFNLENBQUM7TUFDcEJnQixLQUFLLEVBQUUsQ0FBQyxHQUFHMUIsT0FBTyxDQUFDMEIsS0FBSyxFQUFFLEdBQUdKLFVBQVU7SUFDM0MsQ0FBQyxDQUFDO0lBRUYsT0FBTzVDLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxJQUFJO01BQ2JNLE9BQU8sRUFBRSxnQ0FBZ0M7TUFDekNJO0lBQ0osQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDLE9BQU9MLEtBQUssRUFBRTtJQUNaLE9BQU9qQixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxPQUFPLEVBQUUsS0FBSztNQUNkTSxPQUFPLEVBQUVELEtBQUssQ0FBQ0M7SUFDbkIsQ0FBQyxDQUFDO0VBQ047QUFDSixDQUFDLENBQUM7QUFFRitCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2JwRCxhQUFhO0VBQ2JxQixVQUFVO0VBQ1ZXLGFBQWE7RUFDYkssYUFBYTtFQUNiRyxhQUFhO0VBQ2JFO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Op","require","db","Product","Category","asyncHandler","createProduct","req","res","CategoryID","Name","Brand","Description","Volume","Price","image","Inventory","body","status","json","success","mes","newProduct","create","createdProduct","error","message","getProduct","pid","params","product","findOne","where","ProductID","include","model","as","productData","updateProduct","updated","update","updatedProduct","findByPk","deleteProduct","deleted","destroy","getAllProduct","findAll","uploadImageProduct","files","length","Error","imagePaths","map","el","path","Image","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["product_controller.js"],"sourcesContent":["const { Op } = require('sequelize');\r\nconst db = require('../Models');\r\nconst Product = require('../Models/product');\r\nconst Category = require('../Models/category');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createProduct = asyncHandler(async (req, res) => {\r\n    const { CategoryID, Name, Brand, Description, Volume, Price, image, Inventory } = req.body;\r\n\r\n    // Kiểm tra xem các trường bắt buộc có đầy đủ không\r\n    if (!CategoryID || !Name || !Brand || !Description || !Volume || !Price || !Inventory) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n\r\n    try {\r\n        // Tạo sản phẩm mới\r\n        const newProduct = await db.Product.create({\r\n            CategoryID,\r\n            Name,\r\n            Brand,\r\n            Description,\r\n            Volume,\r\n            Price,\r\n            image,\r\n            Inventory\r\n        });\r\n\r\n        // Trả về phản hồi thành công với sản phẩm vừa tạo\r\n        return res.status(201).json({\r\n            success: true,\r\n            mes: 'Thêm sản phẩm thành công',\r\n            createdProduct: newProduct\r\n        });\r\n    } catch (error) {\r\n        // Trả về phản hồi lỗi nếu có lỗi xảy ra\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        // Tìm sản phẩm theo ID và bao gồm danh mục\r\n        const product = await db.Product.findOne({\r\n            where: { ProductID: pid },\r\n            include: [{ model: db.Category, as: 'Category' }] // Sử dụng alias 'category'\r\n        });\r\n        if (product) {\r\n            res.status(200).json({\r\n                success: true,\r\n                productData: product\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                productData: \"Không tìm thấy sản phẩm này\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst updateProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        const [updated] = await db.Product.update(req.body, {\r\n            where: { ProductID: pid }\r\n        });\r\n        if (updated) {\r\n            const updatedProduct = await db.Product.findByPk(pid);\r\n            res.status(200).json({\r\n                success: true,\r\n                updatedProduct: updatedProduct\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                message: \"Không tìm thấy sản phẩm hoặc không có gì được cập nhật\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst deleteProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n    try {\r\n        const deleted = await db.Product.destroy({\r\n            where: { ProductID: pid }\r\n        });\r\n        if (deleted) {\r\n            res.status(200).json({\r\n                success: true,\r\n                message: \"Sản phẩm đã được xoá\"\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                message: \"Không tìm thấy sản phẩm hoặc không có gì được xoá\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getAllProduct = asyncHandler(async (req, res) => {\r\n    try {\r\n        // Tìm sản phẩm theo ID và bao gồm danh mục\r\n        const product = await db.Product.findAll({\r\n            include: [{ model: db.Category, as: 'Category' }] // Sử dụng alias 'category'\r\n        });\r\n        if (product) {\r\n            res.status(200).json({\r\n                success: true,\r\n                productData: product\r\n            });\r\n        } else {\r\n            res.status(404).json({\r\n                success: false,\r\n                productData: \"Không tìm thấy sản phẩm này\"\r\n            });\r\n        }\r\n    } catch (error) {\r\n        res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\n\r\nconst uploadImageProduct = asyncHandler(async (req, res) => {\r\n    const { pid } = req.params;\r\n\r\n    try {\r\n        if (!req.files || req.files.length === 0) {\r\n            throw new Error(\"Không có ảnh được tải lên\");\r\n        }\r\n\r\n        const product = await db.Product.findByPk(pid);\r\n\r\n        if (!product) {\r\n            throw new Error(\"Không tìm thấy sản phẩm\");\r\n        }\r\n\r\n        const imagePaths = req.files.map(el => el.path);\r\n\r\n        await db.product.update({\r\n            Image: [...product.Image, ...imagePaths]\r\n        });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: \"Ảnh đã được tải lên thành công\",\r\n            product\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nmodule.exports = {\r\n    createProduct,\r\n    getProduct,\r\n    updateProduct,\r\n    deleteProduct,\r\n    getAllProduct,\r\n    uploadImageProduct\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718498121548},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\product.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Product extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Product.belongsTo(models.Category, {\n        foreignKey: 'CategoryID'\n      });\n    }\n  }\n  Product.init({\n    ProductID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    CategoryID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      references: {\n        model: 'Categories',\n        key: 'CategoryID'\n      }\n    },\n    Name: DataTypes.STRING,\n    Brand: DataTypes.STRING,\n    Description: DataTypes.STRING,\n    Volume: DataTypes.INTEGER,\n    Price: DataTypes.INTEGER,\n    image: DataTypes.TEXT,\n    Inventory: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Product',\n    timestamps: false\n  });\n  return Product;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiUHJvZHVjdCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIkNhdGVnb3J5IiwiZm9yZWlnbktleSIsImluaXQiLCJQcm9kdWN0SUQiLCJ0eXBlIiwiSU5URUdFUiIsImFsbG93TnVsbCIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiQ2F0ZWdvcnlJRCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsIk5hbWUiLCJTVFJJTkciLCJCcmFuZCIsIkRlc2NyaXB0aW9uIiwiVm9sdW1lIiwiUHJpY2UiLCJpbWFnZSIsIlRFWFQiLCJJbnZlbnRvcnkiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJwcm9kdWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBQcm9kdWN0IGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcclxuICAgICAgICAgICAgUHJvZHVjdC5iZWxvbmdzVG8obW9kZWxzLkNhdGVnb3J5LCB7IGZvcmVpZ25LZXk6ICdDYXRlZ29yeUlEJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBQcm9kdWN0LmluaXQoe1xyXG4gICAgICAgIFByb2R1Y3RJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcclxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQ2F0ZWdvcnlJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6ICdDYXRlZ29yaWVzJyxcclxuICAgICAgICAgICAgICAgIGtleTogJ0NhdGVnb3J5SUQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgICAgQnJhbmQ6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgICAgRGVzY3JpcHRpb246IERhdGFUeXBlcy5TVFJJTkcsIFxyXG4gICAgICAgIFZvbHVtZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgUHJpY2U6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgIGltYWdlOiBEYXRhVHlwZXMuVEVYVCxcclxuICAgICAgICBJbnZlbnRvcnk6IERhdGFUeXBlcy5JTlRFR0VSXHJcbiAgICB9LCB7XHJcbiAgICAgICAgc2VxdWVsaXplLFxyXG4gICAgICAgIG1vZGVsTmFtZTogJ1Byb2R1Y3QnLFxyXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvZHVjdDtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUN0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsT0FBTyxTQUFTTixLQUFLLENBQUM7SUFDeEI7QUFDUjtBQUNBO0FBQ0E7QUFDQTtJQUNRLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUNyQjtNQUNBRixPQUFPLENBQUNHLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxRQUFRLEVBQUU7UUFBRUMsVUFBVSxFQUFFO01BQWEsQ0FBQyxDQUFDO0lBQ3BFO0VBQ0o7RUFDQUwsT0FBTyxDQUFDTSxJQUFJLENBQUM7SUFDVEMsU0FBUyxFQUFFO01BQ1BDLElBQUksRUFBRVQsU0FBUyxDQUFDVSxPQUFPO01BQ3ZCQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsYUFBYSxFQUFFLElBQUk7TUFDbkJDLFVBQVUsRUFBRTtJQUNoQixDQUFDO0lBQ0RDLFVBQVUsRUFBRTtNQUNSTCxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztNQUN2QkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJJLFVBQVUsRUFBRTtRQUNSQyxLQUFLLEVBQUUsWUFBWTtRQUNuQkMsR0FBRyxFQUFFO01BQ1Q7SUFDSixDQUFDO0lBQ0RDLElBQUksRUFBRWxCLFNBQVMsQ0FBQ21CLE1BQU07SUFDdEJDLEtBQUssRUFBRXBCLFNBQVMsQ0FBQ21CLE1BQU07SUFDdkJFLFdBQVcsRUFBRXJCLFNBQVMsQ0FBQ21CLE1BQU07SUFDN0JHLE1BQU0sRUFBRXRCLFNBQVMsQ0FBQ1UsT0FBTztJQUN6QmEsS0FBSyxFQUFFdkIsU0FBUyxDQUFDVSxPQUFPO0lBQ3hCYyxLQUFLLEVBQUV4QixTQUFTLENBQUN5QixJQUFJO0lBQ3JCQyxTQUFTLEVBQUUxQixTQUFTLENBQUNVO0VBQ3pCLENBQUMsRUFBRTtJQUNDWCxTQUFTO0lBQ1Q0QixTQUFTLEVBQUUsU0FBUztJQUNwQkMsVUFBVSxFQUFFO0VBQ2hCLENBQUMsQ0FBQztFQUNGLE9BQU8zQixPQUFPO0FBQ2xCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Product","associate","models","belongsTo","Category","foreignKey","init","ProductID","type","INTEGER","allowNull","autoIncrement","primaryKey","CategoryID","references","model","key","Name","STRING","Brand","Description","Volume","Price","image","TEXT","Inventory","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["product.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Product extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Product.belongsTo(models.Category, { foreignKey: 'CategoryID' });\r\n        }\r\n    }\r\n    Product.init({\r\n        ProductID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            autoIncrement: true,\r\n            primaryKey: true\r\n        },\r\n        CategoryID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            references: {\r\n                model: 'Categories',\r\n                key: 'CategoryID'\r\n            }\r\n        },\r\n        Name: DataTypes.STRING,\r\n        Brand: DataTypes.STRING,\r\n        Description: DataTypes.STRING, \r\n        Volume: DataTypes.INTEGER,\r\n        Price: DataTypes.INTEGER,\r\n        image: DataTypes.TEXT,\r\n        Inventory: DataTypes.INTEGER\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Product',\r\n        timestamps: false,\r\n    });\r\n    return Product;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,OAAO,CAACG,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QAAEC,UAAU,EAAE;MAAa,CAAC,CAAC;IACpE;EACJ;EACAL,OAAO,CAACM,IAAI,CAAC;IACTC,SAAS,EAAE;MACPC,IAAI,EAAET,SAAS,CAACU,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IAChB,CAAC;IACDC,UAAU,EAAE;MACRL,IAAI,EAAET,SAAS,CAACU,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBI,UAAU,EAAE;QACRC,KAAK,EAAE,YAAY;QACnBC,GAAG,EAAE;MACT;IACJ,CAAC;IACDC,IAAI,EAAElB,SAAS,CAACmB,MAAM;IACtBC,KAAK,EAAEpB,SAAS,CAACmB,MAAM;IACvBE,WAAW,EAAErB,SAAS,CAACmB,MAAM;IAC7BG,MAAM,EAAEtB,SAAS,CAACU,OAAO;IACzBa,KAAK,EAAEvB,SAAS,CAACU,OAAO;IACxBc,KAAK,EAAExB,SAAS,CAACyB,IAAI;IACrBC,SAAS,EAAE1B,SAAS,CAACU;EACzB,CAAC,EAAE;IACCX,SAAS;IACT4B,SAAS,EAAE,SAAS;IACpBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAO3B,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718457791810},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Category extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Category.hasMany(models.Product, {\n        foreignKey: 'CategoryID'\n      });\n    }\n  }\n  Category.init({\n    CategoryID: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      allowNull: false,\n      autoIncrement: true\n    },\n    Name: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Category',\n    tableName: 'Categories',\n    timestamps: false\n  });\n  return Category;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ2F0ZWdvcnkiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNNYW55IiwiUHJvZHVjdCIsImZvcmVpZ25LZXkiLCJpbml0IiwiQ2F0ZWdvcnlJRCIsInR5cGUiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsImF1dG9JbmNyZW1lbnQiLCJOYW1lIiwiU1RSSU5HIiwibW9kZWxOYW1lIiwidGFibGVOYW1lIiwidGltZXN0YW1wcyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsiY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcclxuICAgIGNsYXNzIENhdGVnb3J5IGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcclxuICAgICAgICAgICAgQ2F0ZWdvcnkuaGFzTWFueShtb2RlbHMuUHJvZHVjdCwgeyBmb3JlaWduS2V5OiAnQ2F0ZWdvcnlJRCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQ2F0ZWdvcnkuaW5pdCh7XHJcbiAgICAgICAgQ2F0ZWdvcnlJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTmFtZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgIH0sIHtcclxuICAgICAgICBzZXF1ZWxpemUsXHJcbiAgICAgICAgbW9kZWxOYW1lOiAnQ2F0ZWdvcnknLFxyXG4gICAgICAgIHRhYmxlTmFtZTogJ0NhdGVnb3JpZXMnLFxyXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ2F0ZWdvcnk7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLFFBQVEsU0FBU04sS0FBSyxDQUFDO0lBQ3pCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsUUFBUSxDQUFDRyxPQUFPLENBQUNELE1BQU0sQ0FBQ0UsT0FBTyxFQUFFO1FBQUVDLFVBQVUsRUFBRTtNQUFhLENBQUMsQ0FBQztJQUNsRTtFQUNKO0VBQ0FMLFFBQVEsQ0FBQ00sSUFBSSxDQUFDO0lBQ1ZDLFVBQVUsRUFBRTtNQUNSQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztNQUN2QkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxhQUFhLEVBQUU7SUFDbkIsQ0FBQztJQUNEQyxJQUFJLEVBQUVkLFNBQVMsQ0FBQ2U7RUFDcEIsQ0FBQyxFQUFFO0lBQ0NoQixTQUFTO0lBQ1RpQixTQUFTLEVBQUUsVUFBVTtJQUNyQkMsU0FBUyxFQUFFLFlBQVk7SUFDdkJDLFVBQVUsRUFBRTtFQUNoQixDQUFDLENBQUM7RUFDRixPQUFPakIsUUFBUTtBQUNuQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Category","associate","models","hasMany","Product","foreignKey","init","CategoryID","type","INTEGER","primaryKey","allowNull","autoIncrement","Name","STRING","modelName","tableName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["category.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Category extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Category.hasMany(models.Product, { foreignKey: 'CategoryID' });\r\n        }\r\n    }\r\n    Category.init({\r\n        CategoryID: {\r\n            type: DataTypes.INTEGER,\r\n            primaryKey: true,\r\n            allowNull: false,\r\n            autoIncrement: true\r\n        },\r\n        Name: DataTypes.STRING,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Category',\r\n        tableName: 'Categories',\r\n        timestamps: false,\r\n    });\r\n    return Category;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,OAAO,CAACD,MAAM,CAACE,OAAO,EAAE;QAAEC,UAAU,EAAE;MAAa,CAAC,CAAC;IAClE;EACJ;EACAL,QAAQ,CAACM,IAAI,CAAC;IACVC,UAAU,EAAE;MACRC,IAAI,EAAET,SAAS,CAACU,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE;IACnB,CAAC;IACDC,IAAI,EAAEd,SAAS,CAACe;EACpB,CAAC,EAAE;IACChB,SAAS;IACTiB,SAAS,EAAE,UAAU;IACrBC,SAAS,EAAE,YAAY;IACvBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOjB,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718445986372},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\category_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCategory,\n  getAllCategory,\n  getCategory,\n  updateCategory,\n  deleteCategory\n} = require('../controllers/category_controller');\nconst router = express.Router();\nrouter.post('/create', createCategory); //ok\nrouter.get('/getAllcategory', getAllCategory); //ok\nrouter.get('/getCategory/:ctid', getCategory); //ok\nrouter.put('/updateCategory/:ctid', updateCategory); //chua check\nrouter.delete('/deleteCategory/:ctid', deleteCategory); //ok\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUNhdGVnb3J5IiwiZ2V0QWxsQ2F0ZWdvcnkiLCJnZXRDYXRlZ29yeSIsInVwZGF0ZUNhdGVnb3J5IiwiZGVsZXRlQ2F0ZWdvcnkiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiY2F0ZWdvcnlfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ2F0ZWdvcnksIGdldEFsbENhdGVnb3J5LCBnZXRDYXRlZ29yeSwgdXBkYXRlQ2F0ZWdvcnksIGRlbGV0ZUNhdGVnb3J5IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jYXRlZ29yeV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2NyZWF0ZScsIGNyZWF0ZUNhdGVnb3J5KTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRBbGxjYXRlZ29yeScsIGdldEFsbENhdGVnb3J5KTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRDYXRlZ29yeS86Y3RpZCcsIGdldENhdGVnb3J5KTsvL29rXHJcbnJvdXRlci5wdXQoJy91cGRhdGVDYXRlZ29yeS86Y3RpZCcsIHVwZGF0ZUNhdGVnb3J5KTsvL2NodWEgY2hlY2tcclxucm91dGVyLmRlbGV0ZSgnL2RlbGV0ZUNhdGVnb3J5LzpjdGlkJywgZGVsZXRlQ2F0ZWdvcnkpOy8vb2tcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsY0FBYztFQUFFQyxjQUFjO0VBQUVDLFdBQVc7RUFBRUMsY0FBYztFQUFFQztBQUFlLENBQUMsR0FBR0wsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQ3JJLE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsU0FBUyxFQUFFUCxjQUFjLENBQUMsQ0FBQztBQUN2Q0ssTUFBTSxDQUFDRyxHQUFHLENBQUMsaUJBQWlCLEVBQUVQLGNBQWMsQ0FBQyxDQUFDO0FBQzlDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRU4sV0FBVyxDQUFDLENBQUM7QUFDOUNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHVCQUF1QixFQUFFTixjQUFjLENBQUMsQ0FBQztBQUNwREUsTUFBTSxDQUFDSyxNQUFNLENBQUMsdUJBQXVCLEVBQUVOLGNBQWMsQ0FBQyxDQUFDOztBQUV2RE8sTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","createCategory","getAllCategory","getCategory","updateCategory","deleteCategory","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["category_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCategory, getAllCategory, getCategory, updateCategory, deleteCategory } = require('../controllers/category_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/create', createCategory);//ok\r\nrouter.get('/getAllcategory', getAllCategory);//ok\r\nrouter.get('/getCategory/:ctid', getCategory);//ok\r\nrouter.put('/updateCategory/:ctid', updateCategory);//chua check\r\nrouter.delete('/deleteCategory/:ctid', deleteCategory);//ok\r\n\r\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEP,cAAc,CAAC,CAAC;AACvCK,MAAM,CAACG,GAAG,CAAC,iBAAiB,EAAEP,cAAc,CAAC,CAAC;AAC9CI,MAAM,CAACG,GAAG,CAAC,oBAAoB,EAAEN,WAAW,CAAC,CAAC;AAC9CG,MAAM,CAACI,GAAG,CAAC,uBAAuB,EAAEN,cAAc,CAAC,CAAC;AACpDE,MAAM,CAACK,MAAM,CAAC,uBAAuB,EAAEN,cAAc,CAAC,CAAC;;AAEvDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498364823},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\category_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const db = require('../Models');\nconst Product = require('../Models/product');\nconst Category = require('../Models/category');\nconst asyncHandler = require('express-async-handler');\nconst createCategory = asyncHandler(async (req, res) => {\n  const {\n    Name\n  } = req.body;\n  try {\n    if (!Name) {\n      return res.status(400).json({\n        success: false,\n        message: \"Tên danh mục sản phẩm không được để trống\"\n      });\n    }\n\n    // Kiểm tra xem danh mục đã tồn tại hay chưa\n    const categoryExist = await db.Category.findOne({\n      where: {\n        Name\n      },\n      attributes: ['CategoryID', 'Name']\n    });\n    if (categoryExist) {\n      return res.status(400).json({\n        success: false,\n        message: \"Danh mục sản phẩm đã tồn tại\"\n      });\n    }\n\n    // Tạo mới danh mục sản phẩm\n    const newCategory = await db.Category.create({\n      Name\n    });\n    return res.status(201).json({\n      success: true,\n      newCategory\n    });\n  } catch (error) {\n    console.error(\"Error in createCategory:\", error);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã xảy ra lỗi khi tạo danh mục sản phẩm\"\n    });\n  }\n});\nconst getCategory = asyncHandler(async (req, res) => {\n  const {\n    ctid\n  } = req.params;\n  const category = await db.Category.findByPk(ctid);\n  if (category) {\n    return res.status(200).json({\n      success: true,\n      category: category\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Danh mục không tồn tại\"\n    });\n  }\n});\nconst updateCategory = asyncHandler(async (req, res) => {\n  const {\n    ctid\n  } = req.params;\n  const category = await db.Category.findByPk(ctid);\n  if (!category) {\n    return res.status(404).json({\n      success: false,\n      message: \"Danh mục không tồn tại\"\n    });\n  }\n  await db.category.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedCategory: category\n  });\n});\nconst deleteCategory = asyncHandler(async (req, res) => {\n  const {\n    ctid\n  } = req.params;\n  try {\n    const category = await db.Category.findByPk(ctid);\n\n    // Kiểm tra xem danh mục có tồn tại hay không\n    if (!category) {\n      return res.status(404).json({\n        success: false,\n        message: \"Danh mục không tồn tại\"\n      });\n    }\n\n    // Kiểm tra xem danh mục có sản phẩm nào không\n    const productsInCategory = await db.Product.findAll({\n      where: {\n        CategoryID: ctid\n      }\n    });\n    if (productsInCategory.length > 0) {\n      return res.status(400).json({\n        success: false,\n        message: \"Không thể xóa danh mục này vì có sản phẩm trong danh mục\"\n      });\n    }\n\n    // Xóa danh mục\n    await db.Category.destroy({\n      where: {\n        CategoryID: ctid\n      }\n    });\n    return res.status(200).json({\n      success: true,\n      message: `Đã xoá danh mục ${category.Name}`\n    });\n  } catch (error) {\n    console.error(\"Error in deleteCategory:\", error);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã xảy ra lỗi khi xóa danh mục\"\n    });\n  }\n});\nconst getAllCategory = asyncHandler(async (req, res) => {\n  // Lấy all loại hàng\n  const listCategory = await db.Category.findAll();\n  for (let category of listCategory) {\n    const productCount = await db.Product.count({\n      where: {\n        categoryId: category.CategoryID\n      }\n    }); // Correct this line\n    category.productCount = productCount;\n  }\n\n  // Trả về danh sách loại hàng và số lượng sản phẩm cho mỗi loại hàng\n  return res.status(200).json({\n    success: true,\n    listCategory: listCategory\n  });\n});\nmodule.exports = {\n  createCategory,\n  getAllCategory,\n  getCategory,\n  updateCategory,\n  deleteCategory\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJQcm9kdWN0IiwiQ2F0ZWdvcnkiLCJhc3luY0hhbmRsZXIiLCJjcmVhdGVDYXRlZ29yeSIsInJlcSIsInJlcyIsIk5hbWUiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY2F0ZWdvcnlFeGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsImF0dHJpYnV0ZXMiLCJuZXdDYXRlZ29yeSIsImNyZWF0ZSIsImVycm9yIiwiY29uc29sZSIsImdldENhdGVnb3J5IiwiY3RpZCIsInBhcmFtcyIsImNhdGVnb3J5IiwiZmluZEJ5UGsiLCJ1cGRhdGVDYXRlZ29yeSIsInVwZGF0ZSIsInVwZGF0ZWRDYXRlZ29yeSIsImRlbGV0ZUNhdGVnb3J5IiwicHJvZHVjdHNJbkNhdGVnb3J5IiwiZmluZEFsbCIsIkNhdGVnb3J5SUQiLCJsZW5ndGgiLCJkZXN0cm95IiwiZ2V0QWxsQ2F0ZWdvcnkiLCJsaXN0Q2F0ZWdvcnkiLCJwcm9kdWN0Q291bnQiLCJjb3VudCIsImNhdGVnb3J5SWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbImNhdGVnb3J5X2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGIgPSByZXF1aXJlKCcuLi9Nb2RlbHMnKTtcclxuY29uc3QgUHJvZHVjdCA9IHJlcXVpcmUoJy4uL01vZGVscy9wcm9kdWN0Jyk7XHJcbmNvbnN0IENhdGVnb3J5ID0gcmVxdWlyZSgnLi4vTW9kZWxzL2NhdGVnb3J5Jyk7XHJcbmNvbnN0IGFzeW5jSGFuZGxlciA9IHJlcXVpcmUoJ2V4cHJlc3MtYXN5bmMtaGFuZGxlcicpO1xyXG5cclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnkgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IE5hbWUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFOYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVMOqbiBkYW5oIG3hu6VjIHPhuqNuIHBo4bqpbSBraMO0bmcgxJHGsOG7o2MgxJHhu4MgdHLhu5FuZ1wiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gS2nhu4NtIHRyYSB4ZW0gZGFuaCBt4bulYyDEkcOjIHThu5NuIHThuqFpIGhheSBjaMawYVxyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5RXhpc3QgPSBhd2FpdCBkYi5DYXRlZ29yeS5maW5kT25lKHsgd2hlcmU6IHsgTmFtZSB9LCBhdHRyaWJ1dGVzOiBbJ0NhdGVnb3J5SUQnLCAnTmFtZSddIH0pO1xyXG5cclxuICAgICAgICBpZiAoY2F0ZWdvcnlFeGlzdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkRhbmggbeG7pWMgc+G6o24gcGjhuqltIMSRw6MgdOG7k24gdOG6oWlcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFThuqFvIG3hu5tpIGRhbmggbeG7pWMgc+G6o24gcGjhuqltXHJcbiAgICAgICAgY29uc3QgbmV3Q2F0ZWdvcnkgPSBhd2FpdCBkYi5DYXRlZ29yeS5jcmVhdGUoeyBOYW1lIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBuZXdDYXRlZ29yeVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gY3JlYXRlQ2F0ZWdvcnk6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCLEkMOjIHjhuqN5IHJhIGzhu5dpIGtoaSB04bqhbyBkYW5oIG3hu6VjIHPhuqNuIHBo4bqpbVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0Q2F0ZWdvcnkgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGN0aWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSBhd2FpdCBkYi5DYXRlZ29yeS5maW5kQnlQayhjdGlkKTtcclxuXHJcbiAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRGFuaCBt4bulYyBraMO0bmcgdOG7k24gdOG6oWlcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVwZGF0ZUNhdGVnb3J5ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjdGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuZmluZEJ5UGsoY3RpZCk7XHJcblxyXG4gICAgaWYgKCFjYXRlZ29yeSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkRhbmggbeG7pWMga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBkYi5jYXRlZ29yeS51cGRhdGUocmVxLmJvZHkpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1cGRhdGVkQ2F0ZWdvcnk6IGNhdGVnb3J5XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVDYXRlZ29yeSA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgY3RpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuZmluZEJ5UGsoY3RpZCk7XHJcblxyXG4gICAgICAgIC8vIEtp4buDbSB0cmEgeGVtIGRhbmggbeG7pWMgY8OzIHThu5NuIHThuqFpIGhheSBraMO0bmdcclxuICAgICAgICBpZiAoIWNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEYW5oIG3hu6VjIGtow7RuZyB04buTbiB04bqhaVwiIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEtp4buDbSB0cmEgeGVtIGRhbmggbeG7pWMgY8OzIHPhuqNuIHBo4bqpbSBuw6BvIGtow7RuZ1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RzSW5DYXRlZ29yeSA9IGF3YWl0IGRiLlByb2R1Y3QuZmluZEFsbCh7IHdoZXJlOiB7IENhdGVnb3J5SUQ6IGN0aWQgfSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocHJvZHVjdHNJbkNhdGVnb3J5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIktow7RuZyB0aOG7gyB4w7NhIGRhbmggbeG7pWMgbsOgeSB2w6wgY8OzIHPhuqNuIHBo4bqpbSB0cm9uZyBkYW5oIG3hu6VjXCIgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gWMOzYSBkYW5oIG3hu6VjXHJcbiAgICAgICAgYXdhaXQgZGIuQ2F0ZWdvcnkuZGVzdHJveSh7IHdoZXJlOiB7IENhdGVnb3J5SUQ6IGN0aWQgfSB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogYMSQw6MgeG/DoSBkYW5oIG3hu6VjICR7Y2F0ZWdvcnkuTmFtZX1gXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBkZWxldGVDYXRlZ29yeTpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIsSQw6MgeOG6o3kgcmEgbOG7l2kga2hpIHjDs2EgZGFuaCBt4bulY1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGdldEFsbENhdGVnb3J5ID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy8gTOG6pXkgYWxsIGxv4bqhaSBow6BuZ1xyXG4gICAgY29uc3QgbGlzdENhdGVnb3J5ID0gYXdhaXQgZGIuQ2F0ZWdvcnkuZmluZEFsbCgpO1xyXG5cclxuICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGxpc3RDYXRlZ29yeSkge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RDb3VudCA9IGF3YWl0IGRiLlByb2R1Y3QuY291bnQoeyB3aGVyZTogeyBjYXRlZ29yeUlkOiBjYXRlZ29yeS5DYXRlZ29yeUlEIH0gfSk7IC8vIENvcnJlY3QgdGhpcyBsaW5lXHJcbiAgICAgICAgY2F0ZWdvcnkucHJvZHVjdENvdW50ID0gcHJvZHVjdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRy4bqjIHbhu4EgZGFuaCBzw6FjaCBsb+G6oWkgaMOgbmcgdsOgIHPhu5EgbMaw4bujbmcgc+G6o24gcGjhuqltIGNobyBt4buXaSBsb+G6oWkgaMOgbmdcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBsaXN0Q2F0ZWdvcnk6IGxpc3RDYXRlZ29yeVxyXG4gICAgfSk7XHJcbn0pO1xyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUNhdGVnb3J5LFxyXG4gICAgZ2V0QWxsQ2F0ZWdvcnksXHJcbiAgICBnZXRDYXRlZ29yeSxcclxuICAgIHVwZGF0ZUNhdGVnb3J5LFxyXG4gICAgZGVsZXRlQ2F0ZWdvcnlcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDL0IsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDNUMsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDOUMsTUFBTUcsWUFBWSxHQUFHSCxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFckQsTUFBTUksY0FBYyxHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0VBRXpCLElBQUk7SUFDQSxJQUFJLENBQUNELElBQUksRUFBRTtNQUNQLE9BQU9ELEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDeEJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLE9BQU8sRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNOOztJQUVBO0lBQ0EsTUFBTUMsYUFBYSxHQUFHLE1BQU1kLEVBQUUsQ0FBQ0csUUFBUSxDQUFDWSxPQUFPLENBQUM7TUFBRUMsS0FBSyxFQUFFO1FBQUVSO01BQUssQ0FBQztNQUFFUyxVQUFVLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTTtJQUFFLENBQUMsQ0FBQztJQUV4RyxJQUFJSCxhQUFhLEVBQUU7TUFDZixPQUFPUCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjs7SUFFQTtJQUNBLE1BQU1LLFdBQVcsR0FBRyxNQUFNbEIsRUFBRSxDQUFDRyxRQUFRLENBQUNnQixNQUFNLENBQUM7TUFBRVg7SUFBSyxDQUFDLENBQUM7SUFFdEQsT0FBT0QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLElBQUk7TUFDYk07SUFDSixDQUFDLENBQUM7RUFDTixDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFO0lBQ1pDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLDBCQUEwQixFQUFFQSxLQUFLLENBQUM7SUFDaEQsT0FBT2IsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLEtBQUs7TUFDZEMsT0FBTyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ047QUFDSixDQUFDLENBQUM7QUFFRixNQUFNUyxXQUFXLEdBQUdsQixZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDakQsTUFBTTtJQUFFZ0I7RUFBSyxDQUFDLEdBQUdqQixHQUFHLENBQUNrQixNQUFNO0VBRTNCLE1BQU1DLFFBQVEsR0FBRyxNQUFNekIsRUFBRSxDQUFDRyxRQUFRLENBQUN1QixRQUFRLENBQUNILElBQUksQ0FBQztFQUVqRCxJQUFJRSxRQUFRLEVBQUU7SUFDVixPQUFPbEIsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsT0FBTyxFQUFFLElBQUk7TUFDYmEsUUFBUSxFQUFFQTtJQUNkLENBQUMsQ0FBQztFQUNOLENBQUMsTUFBTTtJQUNILE9BQU9sQixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxPQUFPLEVBQUUsS0FBSztNQUNkQyxPQUFPLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDTjtBQUNKLENBQUMsQ0FBQztBQUVGLE1BQU1jLGNBQWMsR0FBR3ZCLFlBQVksQ0FBQyxPQUFPRSxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNwRCxNQUFNO0lBQUVnQjtFQUFLLENBQUMsR0FBR2pCLEdBQUcsQ0FBQ2tCLE1BQU07RUFFM0IsTUFBTUMsUUFBUSxHQUFHLE1BQU16QixFQUFFLENBQUNHLFFBQVEsQ0FBQ3VCLFFBQVEsQ0FBQ0gsSUFBSSxDQUFDO0VBRWpELElBQUksQ0FBQ0UsUUFBUSxFQUFFO0lBQ1gsT0FBT2xCLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLE9BQU8sRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNOO0VBRUEsTUFBTWIsRUFBRSxDQUFDeUIsUUFBUSxDQUFDRyxNQUFNLENBQUN0QixHQUFHLENBQUNHLElBQUksQ0FBQztFQUVsQyxPQUFPRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3hCQyxPQUFPLEVBQUUsSUFBSTtJQUNiaUIsZUFBZSxFQUFFSjtFQUNyQixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixNQUFNSyxjQUFjLEdBQUcxQixZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFZ0I7RUFBSyxDQUFDLEdBQUdqQixHQUFHLENBQUNrQixNQUFNO0VBRTNCLElBQUk7SUFDQSxNQUFNQyxRQUFRLEdBQUcsTUFBTXpCLEVBQUUsQ0FBQ0csUUFBUSxDQUFDdUIsUUFBUSxDQUFDSCxJQUFJLENBQUM7O0lBRWpEO0lBQ0EsSUFBSSxDQUFDRSxRQUFRLEVBQUU7TUFDWCxPQUFPbEIsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUN4QkMsT0FBTyxFQUFFLEtBQUs7UUFDZEMsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ047O0lBRUE7SUFDQSxNQUFNa0Isa0JBQWtCLEdBQUcsTUFBTS9CLEVBQUUsQ0FBQ0UsT0FBTyxDQUFDOEIsT0FBTyxDQUFDO01BQUVoQixLQUFLLEVBQUU7UUFBRWlCLFVBQVUsRUFBRVY7TUFBSztJQUFFLENBQUMsQ0FBQztJQUVwRixJQUFJUSxrQkFBa0IsQ0FBQ0csTUFBTSxHQUFHLENBQUMsRUFBRTtNQUMvQixPQUFPM0IsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUN4QkMsT0FBTyxFQUFFLEtBQUs7UUFDZEMsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ047O0lBRUE7SUFDQSxNQUFNYixFQUFFLENBQUNHLFFBQVEsQ0FBQ2dDLE9BQU8sQ0FBQztNQUFFbkIsS0FBSyxFQUFFO1FBQUVpQixVQUFVLEVBQUVWO01BQUs7SUFBRSxDQUFDLENBQUM7SUFFMUQsT0FBT2hCLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxJQUFJO01BQ2JDLE9BQU8sRUFBRSxtQkFBbUJZLFFBQVEsQ0FBQ2pCLElBQUk7SUFDN0MsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDLE9BQU9ZLEtBQUssRUFBRTtJQUNaQyxPQUFPLENBQUNELEtBQUssQ0FBQywwQkFBMEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2hELE9BQU9iLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLE9BQU8sRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQyxDQUFDO0FBR0YsTUFBTXVCLGNBQWMsR0FBR2hDLFlBQVksQ0FBQyxPQUFPRSxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNwRDtFQUNBLE1BQU04QixZQUFZLEdBQUcsTUFBTXJDLEVBQUUsQ0FBQ0csUUFBUSxDQUFDNkIsT0FBTyxDQUFDLENBQUM7RUFFaEQsS0FBSyxJQUFJUCxRQUFRLElBQUlZLFlBQVksRUFBRTtJQUMvQixNQUFNQyxZQUFZLEdBQUcsTUFBTXRDLEVBQUUsQ0FBQ0UsT0FBTyxDQUFDcUMsS0FBSyxDQUFDO01BQUV2QixLQUFLLEVBQUU7UUFBRXdCLFVBQVUsRUFBRWYsUUFBUSxDQUFDUTtNQUFXO0lBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3RlIsUUFBUSxDQUFDYSxZQUFZLEdBQUdBLFlBQVk7RUFDeEM7O0VBRUE7RUFDQSxPQUFPL0IsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztJQUN4QkMsT0FBTyxFQUFFLElBQUk7SUFDYnlCLFlBQVksRUFBRUE7RUFDbEIsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBQ0ZJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2JyQyxjQUFjO0VBQ2QrQixjQUFjO0VBQ2RkLFdBQVc7RUFDWEssY0FBYztFQUNkRztBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db","require","Product","Category","asyncHandler","createCategory","req","res","Name","body","status","json","success","message","categoryExist","findOne","where","attributes","newCategory","create","error","console","getCategory","ctid","params","category","findByPk","updateCategory","update","updatedCategory","deleteCategory","productsInCategory","findAll","CategoryID","length","destroy","getAllCategory","listCategory","productCount","count","categoryId","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["category_controller.js"],"sourcesContent":["const db = require('../Models');\r\nconst Product = require('../Models/product');\r\nconst Category = require('../Models/category');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createCategory = asyncHandler(async (req, res) => {\r\n    const { Name } = req.body;\r\n\r\n    try {\r\n        if (!Name) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: \"Tên danh mục sản phẩm không được để trống\"\r\n            });\r\n        }\r\n\r\n        // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n        const categoryExist = await db.Category.findOne({ where: { Name }, attributes: ['CategoryID', 'Name'] });\r\n\r\n        if (categoryExist) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: \"Danh mục sản phẩm đã tồn tại\"\r\n            });\r\n        }\r\n\r\n        // Tạo mới danh mục sản phẩm\r\n        const newCategory = await db.Category.create({ Name });\r\n\r\n        return res.status(201).json({\r\n            success: true,\r\n            newCategory\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Error in createCategory:\", error);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã xảy ra lỗi khi tạo danh mục sản phẩm\"\r\n        });\r\n    }\r\n});\r\n\r\nconst getCategory = asyncHandler(async (req, res) => {\r\n    const { ctid } = req.params;\r\n\r\n    const category = await db.Category.findByPk(ctid);\r\n\r\n    if (category) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            category: category\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Danh mục không tồn tại\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateCategory = asyncHandler(async (req, res) => {\r\n    const { ctid } = req.params;\r\n\r\n    const category = await db.Category.findByPk(ctid);\r\n\r\n    if (!category) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Danh mục không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await db.category.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedCategory: category\r\n    });\r\n});\r\n\r\nconst deleteCategory = asyncHandler(async (req, res) => {\r\n    const { ctid } = req.params;\r\n\r\n    try {\r\n        const category = await db.Category.findByPk(ctid);\r\n\r\n        // Kiểm tra xem danh mục có tồn tại hay không\r\n        if (!category) {\r\n            return res.status(404).json({ \r\n                success: false, \r\n                message: \"Danh mục không tồn tại\" \r\n            });\r\n        }\r\n\r\n        // Kiểm tra xem danh mục có sản phẩm nào không\r\n        const productsInCategory = await db.Product.findAll({ where: { CategoryID: ctid } });\r\n        \r\n        if (productsInCategory.length > 0) {\r\n            return res.status(400).json({ \r\n                success: false, \r\n                message: \"Không thể xóa danh mục này vì có sản phẩm trong danh mục\" \r\n            });\r\n        }\r\n\r\n        // Xóa danh mục\r\n        await db.Category.destroy({ where: { CategoryID: ctid } });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Đã xoá danh mục ${category.Name}`\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Error in deleteCategory:\", error);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã xảy ra lỗi khi xóa danh mục\"\r\n        });\r\n    }\r\n});\r\n\r\n\r\nconst getAllCategory = asyncHandler(async (req, res) => {\r\n    // Lấy all loại hàng\r\n    const listCategory = await db.Category.findAll();\r\n\r\n    for (let category of listCategory) {\r\n        const productCount = await db.Product.count({ where: { categoryId: category.CategoryID } }); // Correct this line\r\n        category.productCount = productCount;\r\n    }\r\n\r\n    // Trả về danh sách loại hàng và số lượng sản phẩm cho mỗi loại hàng\r\n    return res.status(200).json({\r\n        success: true,\r\n        listCategory: listCategory\r\n    });\r\n});\r\nmodule.exports = {\r\n    createCategory,\r\n    getAllCategory,\r\n    getCategory,\r\n    updateCategory,\r\n    deleteCategory\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718498401670},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require(__dirname + '/../config/config.json')[env];\nconst db = {};\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\nfs.readdirSync(__dirname).filter(file => {\n  return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js' && file.indexOf('.test.js') === -1;\n}).forEach(file => {\n  const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n  db[model.name] = model;\n});\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImJhc2VuYW1lIiwiX19maWxlbmFtZSIsImVudiIsIk5PREVfRU5WIiwiY29uZmlnIiwiX19kaXJuYW1lIiwiZGIiLCJzZXF1ZWxpemUiLCJ1c2VfZW52X3ZhcmlhYmxlIiwiZGF0YWJhc2UiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicmVhZGRpclN5bmMiLCJmaWx0ZXIiLCJmaWxlIiwiaW5kZXhPZiIsInNsaWNlIiwiZm9yRWFjaCIsIm1vZGVsIiwiam9pbiIsIkRhdGFUeXBlcyIsIm5hbWUiLCJPYmplY3QiLCJrZXlzIiwibW9kZWxOYW1lIiwiYXNzb2NpYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBTZXF1ZWxpemUgPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuY29uc3QgcHJvY2VzcyA9IHJlcXVpcmUoJ3Byb2Nlc3MnKTtcclxuY29uc3QgYmFzZW5hbWUgPSBwYXRoLmJhc2VuYW1lKF9fZmlsZW5hbWUpO1xyXG5jb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnO1xyXG5jb25zdCBjb25maWcgPSByZXF1aXJlKF9fZGlybmFtZSArICcvLi4vY29uZmlnL2NvbmZpZy5qc29uJylbZW52XTtcclxuY29uc3QgZGIgPSB7fTtcclxuXHJcbmxldCBzZXF1ZWxpemU7XHJcbmlmIChjb25maWcudXNlX2Vudl92YXJpYWJsZSkge1xyXG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUocHJvY2Vzcy5lbnZbY29uZmlnLnVzZV9lbnZfdmFyaWFibGVdLCBjb25maWcpO1xyXG59IGVsc2Uge1xyXG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlLCBjb25maWcudXNlcm5hbWUsIGNvbmZpZy5wYXNzd29yZCwgY29uZmlnKTtcclxufVxyXG5cclxuZnNcclxuICAucmVhZGRpclN5bmMoX19kaXJuYW1lKVxyXG4gIC5maWx0ZXIoZmlsZSA9PiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBmaWxlLmluZGV4T2YoJy4nKSAhPT0gMCAmJlxyXG4gICAgICBmaWxlICE9PSBiYXNlbmFtZSAmJlxyXG4gICAgICBmaWxlLnNsaWNlKC0zKSA9PT0gJy5qcycgJiZcclxuICAgICAgZmlsZS5pbmRleE9mKCcudGVzdC5qcycpID09PSAtMVxyXG4gICAgKTtcclxuICB9KVxyXG4gIC5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgY29uc3QgbW9kZWwgPSByZXF1aXJlKHBhdGguam9pbihfX2Rpcm5hbWUsIGZpbGUpKShzZXF1ZWxpemUsIFNlcXVlbGl6ZS5EYXRhVHlwZXMpO1xyXG4gICAgZGJbbW9kZWwubmFtZV0gPSBtb2RlbDtcclxuICB9KTtcclxuXHJcbk9iamVjdC5rZXlzKGRiKS5mb3JFYWNoKG1vZGVsTmFtZSA9PiB7XHJcbiAgaWYgKGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKSB7XHJcbiAgICBkYlttb2RlbE5hbWVdLmFzc29jaWF0ZShkYik7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcclxuZGIuU2VxdWVsaXplID0gU2VxdWVsaXplO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkYjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsU0FBUyxHQUFHRixPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3RDLE1BQU1HLE9BQU8sR0FBR0gsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNSSxRQUFRLEdBQUdILElBQUksQ0FBQ0csUUFBUSxDQUFDQyxVQUFVLENBQUM7QUFDMUMsTUFBTUMsR0FBRyxHQUFHSCxPQUFPLENBQUNHLEdBQUcsQ0FBQ0MsUUFBUSxJQUFJLGFBQWE7QUFDakQsTUFBTUMsTUFBTSxHQUFHUixPQUFPLENBQUNTLFNBQVMsR0FBRyx3QkFBd0IsQ0FBQyxDQUFDSCxHQUFHLENBQUM7QUFDakUsTUFBTUksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUViLElBQUlDLFNBQVM7QUFDYixJQUFJSCxNQUFNLENBQUNJLGdCQUFnQixFQUFFO0VBQzNCRCxTQUFTLEdBQUcsSUFBSVQsU0FBUyxDQUFDQyxPQUFPLENBQUNHLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDSSxnQkFBZ0IsQ0FBQyxFQUFFSixNQUFNLENBQUM7QUFDekUsQ0FBQyxNQUFNO0VBQ0xHLFNBQVMsR0FBRyxJQUFJVCxTQUFTLENBQUNNLE1BQU0sQ0FBQ0ssUUFBUSxFQUFFTCxNQUFNLENBQUNNLFFBQVEsRUFBRU4sTUFBTSxDQUFDTyxRQUFRLEVBQUVQLE1BQU0sQ0FBQztBQUN0RjtBQUVBVCxFQUFFLENBQ0NpQixXQUFXLENBQUNQLFNBQVMsQ0FBQyxDQUN0QlEsTUFBTSxDQUFDQyxJQUFJLElBQUk7RUFDZCxPQUNFQSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQ3ZCRCxJQUFJLEtBQUtkLFFBQVEsSUFDakJjLElBQUksQ0FBQ0UsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUN4QkYsSUFBSSxDQUFDQyxPQUFPLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRW5DLENBQUMsQ0FBQyxDQUNERSxPQUFPLENBQUNILElBQUksSUFBSTtFQUNmLE1BQU1JLEtBQUssR0FBR3RCLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDc0IsSUFBSSxDQUFDZCxTQUFTLEVBQUVTLElBQUksQ0FBQyxDQUFDLENBQUNQLFNBQVMsRUFBRVQsU0FBUyxDQUFDc0IsU0FBUyxDQUFDO0VBQ2pGZCxFQUFFLENBQUNZLEtBQUssQ0FBQ0csSUFBSSxDQUFDLEdBQUdILEtBQUs7QUFDeEIsQ0FBQyxDQUFDO0FBRUpJLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDakIsRUFBRSxDQUFDLENBQUNXLE9BQU8sQ0FBQ08sU0FBUyxJQUFJO0VBQ25DLElBQUlsQixFQUFFLENBQUNrQixTQUFTLENBQUMsQ0FBQ0MsU0FBUyxFQUFFO0lBQzNCbkIsRUFBRSxDQUFDa0IsU0FBUyxDQUFDLENBQUNDLFNBQVMsQ0FBQ25CLEVBQUUsQ0FBQztFQUM3QjtBQUNGLENBQUMsQ0FBQztBQUVGQSxFQUFFLENBQUNDLFNBQVMsR0FBR0EsU0FBUztBQUN4QkQsRUFBRSxDQUFDUixTQUFTLEdBQUdBLFNBQVM7QUFFeEI0QixNQUFNLENBQUNDLE9BQU8sR0FBR3JCLEVBQUUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","config","__dirname","db","sequelize","use_env_variable","database","username","password","readdirSync","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["index.js"],"sourcesContent":["'use strict';\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst Sequelize = require('sequelize');\r\nconst process = require('process');\r\nconst basename = path.basename(__filename);\r\nconst env = process.env.NODE_ENV || 'development';\r\nconst config = require(__dirname + '/../config/config.json')[env];\r\nconst db = {};\r\n\r\nlet sequelize;\r\nif (config.use_env_variable) {\r\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\r\n} else {\r\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\r\n}\r\n\r\nfs\r\n  .readdirSync(__dirname)\r\n  .filter(file => {\r\n    return (\r\n      file.indexOf('.') !== 0 &&\r\n      file !== basename &&\r\n      file.slice(-3) === '.js' &&\r\n      file.indexOf('.test.js') === -1\r\n    );\r\n  })\r\n  .forEach(file => {\r\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\r\n    db[model.name] = model;\r\n  });\r\n\r\nObject.keys(db).forEach(modelName => {\r\n  if (db[modelName].associate) {\r\n    db[modelName].associate(db);\r\n  }\r\n});\r\n\r\ndb.sequelize = sequelize;\r\ndb.Sequelize = Sequelize;\r\n\r\nmodule.exports = db;\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMI,QAAQ,GAAGH,IAAI,CAACG,QAAQ,CAACC,UAAU,CAAC;AAC1C,MAAMC,GAAG,GAAGH,OAAO,CAACG,GAAG,CAACC,QAAQ,IAAI,aAAa;AACjD,MAAMC,MAAM,GAAGR,OAAO,CAACS,SAAS,GAAG,wBAAwB,CAAC,CAACH,GAAG,CAAC;AACjE,MAAMI,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIH,MAAM,CAACI,gBAAgB,EAAE;EAC3BD,SAAS,GAAG,IAAIT,SAAS,CAACC,OAAO,CAACG,GAAG,CAACE,MAAM,CAACI,gBAAgB,CAAC,EAAEJ,MAAM,CAAC;AACzE,CAAC,MAAM;EACLG,SAAS,GAAG,IAAIT,SAAS,CAACM,MAAM,CAACK,QAAQ,EAAEL,MAAM,CAACM,QAAQ,EAAEN,MAAM,CAACO,QAAQ,EAAEP,MAAM,CAAC;AACtF;AAEAT,EAAE,CACCiB,WAAW,CAACP,SAAS,CAAC,CACtBQ,MAAM,CAACC,IAAI,IAAI;EACd,OACEA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IACvBD,IAAI,KAAKd,QAAQ,IACjBc,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAEnC,CAAC,CAAC,CACDE,OAAO,CAACH,IAAI,IAAI;EACf,MAAMI,KAAK,GAAGtB,OAAO,CAACC,IAAI,CAACsB,IAAI,CAACd,SAAS,EAAES,IAAI,CAAC,CAAC,CAACP,SAAS,EAAET,SAAS,CAACsB,SAAS,CAAC;EACjFd,EAAE,CAACY,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACjB,EAAE,CAAC,CAACW,OAAO,CAACO,SAAS,IAAI;EACnC,IAAIlB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BnB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,CAACnB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACR,SAAS,GAAGA,SAAS;AAExB4B,MAAM,CAACC,OAAO,GAAGrB,EAAE","ignoreList":[]}},"mtime":1718445986374},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\customer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Customer extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Customer.hasMany(models.Order, {\n        foreignKey: 'CustomerID',\n        as: 'Orders'\n      });\n    }\n  }\n  Customer.init({\n    CustomerID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Gender: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Customer',\n    timestamps: false\n  });\n  return Customer;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ3VzdG9tZXIiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNNYW55IiwiT3JkZXIiLCJmb3JlaWduS2V5IiwiYXMiLCJpbml0IiwiQ3VzdG9tZXJJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJOYW1lIiwiU1RSSU5HIiwiUGhvbmUiLCJHZW5kZXIiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJjdXN0b21lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHsgTW9kZWwgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gICAgY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cclxuICAgICAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAgICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxyXG4gICAgICAgICAgICBDdXN0b21lci5oYXNNYW55KG1vZGVscy5PcmRlciwgeyBmb3JlaWduS2V5OiAnQ3VzdG9tZXJJRCcsIGFzOiAnT3JkZXJzJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBDdXN0b21lci5pbml0KHtcclxuICAgICAgICBDdXN0b21lcklEOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxyXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgTmFtZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgUGhvbmU6IERhdGFUeXBlcy5TVFJJTkcsXHJcbiAgICAgIEdlbmRlcjogRGF0YVR5cGVzLlNUUklOR1xyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdDdXN0b21lcicsXHJcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDdXN0b21lcjtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLFFBQVEsU0FBU04sS0FBSyxDQUFDO0lBQ3pCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsUUFBUSxDQUFDRyxPQUFPLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLFVBQVUsRUFBRSxZQUFZO1FBQUVDLEVBQUUsRUFBRTtNQUFTLENBQUMsQ0FBQztJQUM5RTtFQUNKO0VBQ0FOLFFBQVEsQ0FBQ08sSUFBSSxDQUFDO0lBQ1ZDLFVBQVUsRUFBRTtNQUNSQyxJQUFJLEVBQUVWLFNBQVMsQ0FBQ1csT0FBTztNQUN2QkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLGFBQWEsRUFBRSxJQUFJO01BQ25CQyxVQUFVLEVBQUU7SUFDaEIsQ0FBQztJQUNIQyxJQUFJLEVBQUVmLFNBQVMsQ0FBQ2dCLE1BQU07SUFDdEJDLEtBQUssRUFBRWpCLFNBQVMsQ0FBQ2dCLE1BQU07SUFDdkJFLE1BQU0sRUFBRWxCLFNBQVMsQ0FBQ2dCO0VBQ3BCLENBQUMsRUFBRTtJQUNDakIsU0FBUztJQUNUb0IsU0FBUyxFQUFFLFVBQVU7SUFDckJDLFVBQVUsRUFBRTtFQUNoQixDQUFDLENBQUM7RUFDRixPQUFPbkIsUUFBUTtBQUNuQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Customer","associate","models","hasMany","Order","foreignKey","as","init","CustomerID","type","INTEGER","allowNull","autoIncrement","primaryKey","Name","STRING","Phone","Gender","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["customer.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Customer extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Customer.hasMany(models.Order, { foreignKey: 'CustomerID', as: 'Orders' });\r\n        }\r\n    }\r\n    Customer.init({\r\n        CustomerID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            autoIncrement: true,\r\n            primaryKey: true\r\n        },\r\n      Name: DataTypes.STRING,\r\n      Phone: DataTypes.STRING,\r\n      Gender: DataTypes.STRING\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Customer',\r\n        timestamps: false,\r\n    });\r\n    return Customer;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,OAAO,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,UAAU,EAAE,YAAY;QAAEC,EAAE,EAAE;MAAS,CAAC,CAAC;IAC9E;EACJ;EACAN,QAAQ,CAACO,IAAI,CAAC;IACVC,UAAU,EAAE;MACRC,IAAI,EAAEV,SAAS,CAACW,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IAChB,CAAC;IACHC,IAAI,EAAEf,SAAS,CAACgB,MAAM;IACtBC,KAAK,EAAEjB,SAAS,CAACgB,MAAM;IACvBE,MAAM,EAAElB,SAAS,CAACgB;EACpB,CAAC,EAAE;IACCjB,SAAS;IACToB,SAAS,EAAE,UAAU;IACrBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOnB,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718457798398},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\employee.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Employee extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // define association here\n      Employee.hasOne(models.User, {\n        foreignKey: 'Phone',\n        as: 'Users'\n      });\n    }\n  }\n  Employee.init({\n    EmployeeID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Gender: DataTypes.STRING,\n    Address: DataTypes.STRING,\n    Role: DataTypes.STRING,\n    Salary: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Employee',\n    timestamps: false\n  });\n  return Employee;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiRW1wbG95ZWUiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNPbmUiLCJVc2VyIiwiZm9yZWlnbktleSIsImFzIiwiaW5pdCIsIkVtcGxveWVlSUQiLCJ0eXBlIiwiSU5URUdFUiIsImFsbG93TnVsbCIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiTmFtZSIsIlNUUklORyIsIlBob25lIiwiR2VuZGVyIiwiQWRkcmVzcyIsIlJvbGUiLCJTYWxhcnkiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJlbXBsb3llZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHtcclxuICAgIE1vZGVsXHJcbn0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcclxuICAgIGNsYXNzIEVtcGxveWVlIGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcclxuICAgICAgICAgICAgRW1wbG95ZWUuaGFzT25lKG1vZGVscy5Vc2VyLCB7IGZvcmVpZ25LZXk6ICdQaG9uZScsIGFzOiAnVXNlcnMnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEVtcGxveWVlLmluaXQoe1xyXG4gICAgICAgIEVtcGxveWVlSUQ6IHtcclxuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICBOYW1lOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICBQaG9uZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgR2VuZGVyOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICBBZGRyZXNzOiAgRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgUm9sZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgU2FsYXJ5OiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgIH0sIHtcclxuICAgICAgICBzZXF1ZWxpemUsXHJcbiAgICAgICAgbW9kZWxOYW1lOiAnRW1wbG95ZWUnLFxyXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRW1wbG95ZWU7XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNO0VBQ0ZBO0FBQ0osQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3hCQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QyxNQUFNQyxRQUFRLFNBQVNOLEtBQUssQ0FBQztJQUN6QjtBQUNSO0FBQ0E7QUFDQTtBQUNBO0lBQ1EsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3JCO01BQ0FGLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRCxNQUFNLENBQUNFLElBQUksRUFBRTtRQUFFQyxVQUFVLEVBQUUsT0FBTztRQUFFQyxFQUFFLEVBQUU7TUFBUSxDQUFDLENBQUM7SUFDdEU7RUFDSjtFQUNBTixRQUFRLENBQUNPLElBQUksQ0FBQztJQUNWQyxVQUFVLEVBQUU7TUFDUkMsSUFBSSxFQUFFVixTQUFTLENBQUNXLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxhQUFhLEVBQUUsSUFBSTtNQUNuQkMsVUFBVSxFQUFFO0lBQ2hCLENBQUM7SUFDSEMsSUFBSSxFQUFFZixTQUFTLENBQUNnQixNQUFNO0lBQ3RCQyxLQUFLLEVBQUVqQixTQUFTLENBQUNnQixNQUFNO0lBQ3ZCRSxNQUFNLEVBQUVsQixTQUFTLENBQUNnQixNQUFNO0lBQ3hCRyxPQUFPLEVBQUduQixTQUFTLENBQUNnQixNQUFNO0lBQzFCSSxJQUFJLEVBQUVwQixTQUFTLENBQUNnQixNQUFNO0lBQ3RCSyxNQUFNLEVBQUVyQixTQUFTLENBQUNXO0VBQ3BCLENBQUMsRUFBRTtJQUNDWixTQUFTO0lBQ1R1QixTQUFTLEVBQUUsVUFBVTtJQUNyQkMsVUFBVSxFQUFFO0VBQ2hCLENBQUMsQ0FBQztFQUNGLE9BQU90QixRQUFRO0FBQ25CLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Employee","associate","models","hasOne","User","foreignKey","as","init","EmployeeID","type","INTEGER","allowNull","autoIncrement","primaryKey","Name","STRING","Phone","Gender","Address","Role","Salary","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["employee.js"],"sourcesContent":["'use strict';\r\nconst {\r\n    Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Employee extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // define association here\r\n            Employee.hasOne(models.User, { foreignKey: 'Phone', as: 'Users' });\r\n        }\r\n    }\r\n    Employee.init({\r\n        EmployeeID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            autoIncrement: true,\r\n            primaryKey: true\r\n        },\r\n      Name: DataTypes.STRING,\r\n      Phone: DataTypes.STRING,\r\n      Gender: DataTypes.STRING,\r\n      Address:  DataTypes.STRING,\r\n      Role: DataTypes.STRING,\r\n      Salary: DataTypes.INTEGER,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Employee',\r\n        timestamps: false,\r\n    });\r\n    return Employee;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACFA;AACJ,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IACzB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,QAAQ,CAACG,MAAM,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE,OAAO;QAAEC,EAAE,EAAE;MAAQ,CAAC,CAAC;IACtE;EACJ;EACAN,QAAQ,CAACO,IAAI,CAAC;IACVC,UAAU,EAAE;MACRC,IAAI,EAAEV,SAAS,CAACW,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IAChB,CAAC;IACHC,IAAI,EAAEf,SAAS,CAACgB,MAAM;IACtBC,KAAK,EAAEjB,SAAS,CAACgB,MAAM;IACvBE,MAAM,EAAElB,SAAS,CAACgB,MAAM;IACxBG,OAAO,EAAGnB,SAAS,CAACgB,MAAM;IAC1BI,IAAI,EAAEpB,SAAS,CAACgB,MAAM;IACtBK,MAAM,EAAErB,SAAS,CAACW;EACpB,CAAC,EAAE;IACCZ,SAAS;IACTuB,SAAS,EAAE,UAAU;IACrBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOtB,QAAQ;AACnB,CAAC","ignoreList":[]}},"mtime":1718457796261},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\invoice.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Invoice extends Model {\n    static associate(models) {\n      // Define the relationship between Invoice and Order\n      Invoice.belongsTo(models.Order, {\n        foreignKey: 'OrderID',\n        as: 'Order'\n      });\n    }\n  }\n  Invoice.init({\n    InvoiceID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    InvoiceDate: DataTypes.DATE,\n    Totalcost: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Invoice',\n    tableName: 'invoices',\n    timestamps: false\n  });\n  return Invoice;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiSW52b2ljZSIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIk9yZGVyIiwiZm9yZWlnbktleSIsImFzIiwiaW5pdCIsIkludm9pY2VJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJJbnZvaWNlRGF0ZSIsIkRBVEUiLCJUb3RhbGNvc3QiLCJtb2RlbE5hbWUiLCJ0YWJsZU5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJpbnZvaWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gICAgY2xhc3MgSW52b2ljZSBleHRlbmRzIE1vZGVsIHtcclxuICAgICAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIEludm9pY2UgYW5kIE9yZGVyXHJcbiAgICAgICAgICAgIEludm9pY2UuYmVsb25nc1RvKG1vZGVscy5PcmRlciwge1xyXG4gICAgICAgICAgICAgICAgZm9yZWlnbktleTogJ09yZGVySUQnLFxyXG4gICAgICAgICAgICAgICAgYXM6ICdPcmRlcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgSW52b2ljZS5pbml0KHtcclxuICAgICAgICBJbnZvaWNlSUQ6IHtcclxuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIEludm9pY2VEYXRlOiBEYXRhVHlwZXMuREFURSxcclxuICAgICAgICBUb3RhbGNvc3Q6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdJbnZvaWNlJyxcclxuICAgICAgICB0YWJsZU5hbWU6ICdpbnZvaWNlcycsXHJcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBJbnZvaWNlO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNO0VBQUVBO0FBQU0sQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXRDQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QyxNQUFNQyxPQUFPLFNBQVNOLEtBQUssQ0FBQztJQUN4QixPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDckI7TUFDQUYsT0FBTyxDQUFDRyxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQzVCQyxVQUFVLEVBQUUsU0FBUztRQUNyQkMsRUFBRSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ047RUFDSjtFQUNBTixPQUFPLENBQUNPLElBQUksQ0FBQztJQUNUQyxTQUFTLEVBQUU7TUFDUEMsSUFBSSxFQUFFVixTQUFTLENBQUNXLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxhQUFhLEVBQUUsSUFBSTtNQUNuQkMsVUFBVSxFQUFFO0lBQ2hCLENBQUM7SUFDREMsV0FBVyxFQUFFZixTQUFTLENBQUNnQixJQUFJO0lBQzNCQyxTQUFTLEVBQUVqQixTQUFTLENBQUNXO0VBQ3pCLENBQUMsRUFBRTtJQUNDWixTQUFTO0lBQ1RtQixTQUFTLEVBQUUsU0FBUztJQUNwQkMsU0FBUyxFQUFFLFVBQVU7SUFDckJDLFVBQVUsRUFBRTtFQUNoQixDQUFDLENBQUM7RUFDRixPQUFPbkIsT0FBTztBQUNsQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Invoice","associate","models","belongsTo","Order","foreignKey","as","init","InvoiceID","type","INTEGER","allowNull","autoIncrement","primaryKey","InvoiceDate","DATE","Totalcost","modelName","tableName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["invoice.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Invoice extends Model {\r\n        static associate(models) {\r\n            // Define the relationship between Invoice and Order\r\n            Invoice.belongsTo(models.Order, {\r\n                foreignKey: 'OrderID',\r\n                as: 'Order'\r\n            });\r\n        }\r\n    }\r\n    Invoice.init({\r\n        InvoiceID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            autoIncrement: true,\r\n            primaryKey: true\r\n        },\r\n        InvoiceDate: DataTypes.DATE,\r\n        Totalcost: DataTypes.INTEGER,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Invoice',\r\n        tableName: 'invoices',\r\n        timestamps: false,\r\n    });\r\n    return Invoice;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,OAAO,CAACG,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAC5BC,UAAU,EAAE,SAAS;QACrBC,EAAE,EAAE;MACR,CAAC,CAAC;IACN;EACJ;EACAN,OAAO,CAACO,IAAI,CAAC;IACTC,SAAS,EAAE;MACPC,IAAI,EAAEV,SAAS,CAACW,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IAChB,CAAC;IACDC,WAAW,EAAEf,SAAS,CAACgB,IAAI;IAC3BC,SAAS,EAAEjB,SAAS,CAACW;EACzB,CAAC,EAAE;IACCZ,SAAS;IACTmB,SAAS,EAAE,SAAS;IACpBC,SAAS,EAAE,UAAU;IACrBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOnB,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718457490147},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\invoicedetail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class InvoiceDetail extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {\n      // Define the relationship between InvoiceDetail and Invoice\n      InvoiceDetail.belongsTo(models.Invoice, {\n        foreignKey: 'InvoiceID',\n        as: 'invoice'\n      });\n\n      // Define the relationship between InvoiceDetail and Product\n      InvoiceDetail.belongsTo(models.Product, {\n        foreignKey: 'ProductID',\n        as: 'product'\n      });\n    }\n  }\n  InvoiceDetail.init({\n    InvoiceID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    ProductID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    Quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      validate: {\n        min: 1\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'InvoiceDetail',\n    tableName: 'Invoicedetails',\n    timestamps: false\n  });\n  return InvoiceDetail;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiSW52b2ljZURldGFpbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsIkludm9pY2UiLCJmb3JlaWduS2V5IiwiYXMiLCJQcm9kdWN0IiwiaW5pdCIsIkludm9pY2VJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwiUHJvZHVjdElEIiwiUXVhbnRpdHkiLCJ2YWxpZGF0ZSIsIm1pbiIsIm1vZGVsTmFtZSIsInRhYmxlTmFtZSIsInRpbWVzdGFtcHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbImludm9pY2VkZXRhaWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBJbnZvaWNlRGV0YWlsIGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBJbnZvaWNlRGV0YWlsIGFuZCBJbnZvaWNlXHJcbiAgICAgICAgICAgIEludm9pY2VEZXRhaWwuYmVsb25nc1RvKG1vZGVscy5JbnZvaWNlLCB7XHJcbiAgICAgICAgICAgICAgICBmb3JlaWduS2V5OiAnSW52b2ljZUlEJyxcclxuICAgICAgICAgICAgICAgIGFzOiAnaW52b2ljZSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIEludm9pY2VEZXRhaWwgYW5kIFByb2R1Y3RcclxuICAgICAgICAgICAgSW52b2ljZURldGFpbC5iZWxvbmdzVG8obW9kZWxzLlByb2R1Y3QsIHtcclxuICAgICAgICAgICAgICAgIGZvcmVpZ25LZXk6ICdQcm9kdWN0SUQnLFxyXG4gICAgICAgICAgICAgICAgYXM6ICdwcm9kdWN0J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBJbnZvaWNlRGV0YWlsLmluaXQoe1xyXG4gICAgICAgIEludm9pY2VJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFByb2R1Y3RJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFF1YW50aXR5OiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWxpZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgbWluOiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdJbnZvaWNlRGV0YWlsJyxcclxuICAgICAgICB0YWJsZU5hbWU6ICdJbnZvaWNlZGV0YWlscycsXHJcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBJbnZvaWNlRGV0YWlsO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNO0VBQUVBO0FBQU0sQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXRDQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QyxNQUFNQyxhQUFhLFNBQVNOLEtBQUssQ0FBQztJQUM5QjtBQUNSO0FBQ0E7QUFDQTtBQUNBO0lBQ1EsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3JCO01BQ0FGLGFBQWEsQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNFLE9BQU8sRUFBRTtRQUNwQ0MsVUFBVSxFQUFFLFdBQVc7UUFDdkJDLEVBQUUsRUFBRTtNQUNSLENBQUMsQ0FBQzs7TUFFRjtNQUNBTixhQUFhLENBQUNHLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxPQUFPLEVBQUU7UUFDcENGLFVBQVUsRUFBRSxXQUFXO1FBQ3ZCQyxFQUFFLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDTjtFQUNKO0VBQ0FOLGFBQWEsQ0FBQ1EsSUFBSSxDQUFDO0lBQ2ZDLFNBQVMsRUFBRTtNQUNQQyxJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksT0FBTztNQUN2QkMsU0FBUyxFQUFFO0lBQ2YsQ0FBQztJQUNEQyxTQUFTLEVBQUU7TUFDUEgsSUFBSSxFQUFFWCxTQUFTLENBQUNZLE9BQU87TUFDdkJDLFNBQVMsRUFBRTtJQUNmLENBQUM7SUFDREUsUUFBUSxFQUFFO01BQ05KLElBQUksRUFBRVgsU0FBUyxDQUFDWSxPQUFPO01BQ3ZCQyxTQUFTLEVBQUUsS0FBSztNQUNoQkcsUUFBUSxFQUFFO1FBQ05DLEdBQUcsRUFBRTtNQUNUO0lBQ0o7RUFDSixDQUFDLEVBQUU7SUFDQ2xCLFNBQVM7SUFDVG1CLFNBQVMsRUFBRSxlQUFlO0lBQzFCQyxTQUFTLEVBQUUsZ0JBQWdCO0lBQzNCQyxVQUFVLEVBQUU7RUFDaEIsQ0FBQyxDQUFDO0VBQ0YsT0FBT25CLGFBQWE7QUFDeEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","InvoiceDetail","associate","models","belongsTo","Invoice","foreignKey","as","Product","init","InvoiceID","type","INTEGER","allowNull","ProductID","Quantity","validate","min","modelName","tableName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["invoicedetail.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class InvoiceDetail extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n            // Define the relationship between InvoiceDetail and Invoice\r\n            InvoiceDetail.belongsTo(models.Invoice, {\r\n                foreignKey: 'InvoiceID',\r\n                as: 'invoice'\r\n            });\r\n\r\n            // Define the relationship between InvoiceDetail and Product\r\n            InvoiceDetail.belongsTo(models.Product, {\r\n                foreignKey: 'ProductID',\r\n                as: 'product'\r\n            });\r\n        }\r\n    }\r\n    InvoiceDetail.init({\r\n        InvoiceID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        ProductID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        Quantity: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            validate: {\r\n                min: 1\r\n            }\r\n        },\r\n    }, {\r\n        sequelize,\r\n        modelName: 'InvoiceDetail',\r\n        tableName: 'Invoicedetails',\r\n        timestamps: false,\r\n    });\r\n    return InvoiceDetail;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,aAAa,SAASN,KAAK,CAAC;IAC9B;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,aAAa,CAACG,SAAS,CAACD,MAAM,CAACE,OAAO,EAAE;QACpCC,UAAU,EAAE,WAAW;QACvBC,EAAE,EAAE;MACR,CAAC,CAAC;;MAEF;MACAN,aAAa,CAACG,SAAS,CAACD,MAAM,CAACK,OAAO,EAAE;QACpCF,UAAU,EAAE,WAAW;QACvBC,EAAE,EAAE;MACR,CAAC,CAAC;IACN;EACJ;EACAN,aAAa,CAACQ,IAAI,CAAC;IACfC,SAAS,EAAE;MACPC,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE;IACf,CAAC;IACDC,SAAS,EAAE;MACPH,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE;IACf,CAAC;IACDE,QAAQ,EAAE;MACNJ,IAAI,EAAEX,SAAS,CAACY,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBG,QAAQ,EAAE;QACNC,GAAG,EAAE;MACT;IACJ;EACJ,CAAC,EAAE;IACClB,SAAS;IACTmB,SAAS,EAAE,eAAe;IAC1BC,SAAS,EAAE,gBAAgB;IAC3BC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOnB,aAAa;AACxB,CAAC","ignoreList":[]}},"mtime":1718445986375},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Order extends Model {\n    static associate(models) {\n      // Define the relationship between Order and Invoice\n      Order.hasOne(models.Invoice, {\n        foreignKey: 'OrderID',\n        as: 'Invoice'\n      });\n\n      // Define the relationship between Order and Customer (nếu cần)\n      Order.belongsTo(models.Customer, {\n        foreignKey: 'CustomerID',\n        as: 'Customer'\n      });\n      Order.hasMany(models.OrderDetail, {\n        foreignKey: 'OrderID',\n        as: 'OrderDetail'\n      });\n    }\n  }\n  Order.init({\n    OrderID: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      autoIncrement: true\n    },\n    CustomerID: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    OrderDate: {\n      type: DataTypes.DATE,\n      allowNull: false\n    },\n    Status: {\n      type: DataTypes.BOOLEAN,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'Order',\n    timestamps: false\n  });\n  return Order;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiT3JkZXIiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJoYXNPbmUiLCJJbnZvaWNlIiwiZm9yZWlnbktleSIsImFzIiwiYmVsb25nc1RvIiwiQ3VzdG9tZXIiLCJoYXNNYW55IiwiT3JkZXJEZXRhaWwiLCJpbml0IiwiT3JkZXJJRCIsInR5cGUiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImF1dG9JbmNyZW1lbnQiLCJDdXN0b21lcklEIiwiYWxsb3dOdWxsIiwiT3JkZXJEYXRlIiwiREFURSIsIlN0YXR1cyIsIkJPT0xFQU4iLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJvcmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHsgTW9kZWwgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcclxuICAgIGNsYXNzIE9yZGVyIGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XHJcbiAgICAgICAgICAgIC8vIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gT3JkZXIgYW5kIEludm9pY2VcclxuICAgICAgICAgICAgT3JkZXIuaGFzT25lKG1vZGVscy5JbnZvaWNlLCB7XHJcbiAgICAgICAgICAgICAgICBmb3JlaWduS2V5OiAnT3JkZXJJRCcsXHJcbiAgICAgICAgICAgICAgICBhczogJ0ludm9pY2UnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBPcmRlciBhbmQgQ3VzdG9tZXIgKG7hur91IGPhuqduKVxyXG4gICAgICAgICAgICBPcmRlci5iZWxvbmdzVG8obW9kZWxzLkN1c3RvbWVyLCB7XHJcbiAgICAgICAgICAgICAgICBmb3JlaWduS2V5OiAnQ3VzdG9tZXJJRCcsXHJcbiAgICAgICAgICAgICAgICBhczogJ0N1c3RvbWVyJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIE9yZGVyLmhhc01hbnkobW9kZWxzLk9yZGVyRGV0YWlsLCB7IGZvcmVpZ25LZXk6ICdPcmRlcklEJyAsYXM6ICdPcmRlckRldGFpbCd9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPcmRlci5pbml0KHtcclxuICAgICAgICBPcmRlcklEOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxyXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxyXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQ3VzdG9tZXJJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIE9yZGVyRGF0ZToge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFN0YXR1czoge1xyXG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcclxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdPcmRlcicsXHJcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBPcmRlcjtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkMsTUFBTUMsS0FBSyxTQUFTTixLQUFLLENBQUM7SUFDdEIsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3JCO01BQ0FGLEtBQUssQ0FBQ0csTUFBTSxDQUFDRCxNQUFNLENBQUNFLE9BQU8sRUFBRTtRQUN6QkMsVUFBVSxFQUFFLFNBQVM7UUFDckJDLEVBQUUsRUFBRTtNQUNSLENBQUMsQ0FBQzs7TUFFRjtNQUNBTixLQUFLLENBQUNPLFNBQVMsQ0FBQ0wsTUFBTSxDQUFDTSxRQUFRLEVBQUU7UUFDN0JILFVBQVUsRUFBRSxZQUFZO1FBQ3hCQyxFQUFFLEVBQUU7TUFDUixDQUFDLENBQUM7TUFFRk4sS0FBSyxDQUFDUyxPQUFPLENBQUNQLE1BQU0sQ0FBQ1EsV0FBVyxFQUFFO1FBQUVMLFVBQVUsRUFBRSxTQUFTO1FBQUVDLEVBQUUsRUFBRTtNQUFhLENBQUMsQ0FBQztJQUNsRjtFQUNKO0VBQ0FOLEtBQUssQ0FBQ1csSUFBSSxDQUFDO0lBQ1BDLE9BQU8sRUFBRTtNQUNMQyxJQUFJLEVBQUVkLFNBQVMsQ0FBQ2UsT0FBTztNQUN2QkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLGFBQWEsRUFBRTtJQUNuQixDQUFDO0lBQ0RDLFVBQVUsRUFBRTtNQUNSSixJQUFJLEVBQUVkLFNBQVMsQ0FBQ2UsT0FBTztNQUN2QkksU0FBUyxFQUFFO0lBQ2YsQ0FBQztJQUNEQyxTQUFTLEVBQUU7TUFDUE4sSUFBSSxFQUFFZCxTQUFTLENBQUNxQixJQUFJO01BQ3BCRixTQUFTLEVBQUU7SUFDZixDQUFDO0lBQ0RHLE1BQU0sRUFBRTtNQUNKUixJQUFJLEVBQUVkLFNBQVMsQ0FBQ3VCLE9BQU87TUFDdkJKLFNBQVMsRUFBRTtJQUNmO0VBQ0osQ0FBQyxFQUFFO0lBQ0NwQixTQUFTO0lBQ1R5QixTQUFTLEVBQUUsT0FBTztJQUNsQkMsVUFBVSxFQUFFO0VBQ2hCLENBQUMsQ0FBQztFQUNGLE9BQU94QixLQUFLO0FBQ2hCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Order","associate","models","hasOne","Invoice","foreignKey","as","belongsTo","Customer","hasMany","OrderDetail","init","OrderID","type","INTEGER","primaryKey","autoIncrement","CustomerID","allowNull","OrderDate","DATE","Status","BOOLEAN","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["order.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Order extends Model {\r\n        static associate(models) {\r\n            // Define the relationship between Order and Invoice\r\n            Order.hasOne(models.Invoice, {\r\n                foreignKey: 'OrderID',\r\n                as: 'Invoice'\r\n            });\r\n\r\n            // Define the relationship between Order and Customer (nếu cần)\r\n            Order.belongsTo(models.Customer, {\r\n                foreignKey: 'CustomerID',\r\n                as: 'Customer'\r\n            });\r\n\r\n            Order.hasMany(models.OrderDetail, { foreignKey: 'OrderID' ,as: 'OrderDetail'});\r\n        }\r\n    }\r\n    Order.init({\r\n        OrderID: {\r\n            type: DataTypes.INTEGER,\r\n            primaryKey: true,\r\n            autoIncrement: true,\r\n        },\r\n        CustomerID: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n        },\r\n        OrderDate: {\r\n            type: DataTypes.DATE,\r\n            allowNull: false,\r\n        },\r\n        Status: {\r\n            type: DataTypes.BOOLEAN,\r\n            allowNull: false,\r\n        },\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Order',\r\n        timestamps: false,\r\n    });\r\n    return Order;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,KAAK,SAASN,KAAK,CAAC;IACtB,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrB;MACAF,KAAK,CAACG,MAAM,CAACD,MAAM,CAACE,OAAO,EAAE;QACzBC,UAAU,EAAE,SAAS;QACrBC,EAAE,EAAE;MACR,CAAC,CAAC;;MAEF;MACAN,KAAK,CAACO,SAAS,CAACL,MAAM,CAACM,QAAQ,EAAE;QAC7BH,UAAU,EAAE,YAAY;QACxBC,EAAE,EAAE;MACR,CAAC,CAAC;MAEFN,KAAK,CAACS,OAAO,CAACP,MAAM,CAACQ,WAAW,EAAE;QAAEL,UAAU,EAAE,SAAS;QAAEC,EAAE,EAAE;MAAa,CAAC,CAAC;IAClF;EACJ;EACAN,KAAK,CAACW,IAAI,CAAC;IACPC,OAAO,EAAE;MACLC,IAAI,EAAEd,SAAS,CAACe,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,aAAa,EAAE;IACnB,CAAC;IACDC,UAAU,EAAE;MACRJ,IAAI,EAAEd,SAAS,CAACe,OAAO;MACvBI,SAAS,EAAE;IACf,CAAC;IACDC,SAAS,EAAE;MACPN,IAAI,EAAEd,SAAS,CAACqB,IAAI;MACpBF,SAAS,EAAE;IACf,CAAC;IACDG,MAAM,EAAE;MACJR,IAAI,EAAEd,SAAS,CAACuB,OAAO;MACvBJ,SAAS,EAAE;IACf;EACJ,CAAC,EAAE;IACCpB,SAAS;IACTyB,SAAS,EAAE,OAAO;IAClBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOxB,KAAK;AAChB,CAAC","ignoreList":[]}},"mtime":1718469474652},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\orderdetail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class OrderDetail extends Model {\n    static associate(models) {\n      // Định nghĩa mối quan hệ với Order và Product\n      OrderDetail.belongsTo(models.Order, {\n        foreignKey: 'OrderID',\n        as: 'Order'\n      });\n      OrderDetail.hasOne(models.Product, {\n        foreignKey: 'ProductID',\n        as: 'Product'\n      });\n    }\n  }\n  OrderDetail.init({\n    OrderID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      references: {\n        model: 'Order',\n        // Tên bảng Orders trong database\n        key: 'OrderID'\n      }\n    },\n    ProductID: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      references: {\n        model: 'Product',\n        // Tên bảng Products trong database\n        key: 'ProductID'\n      }\n    },\n    Quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'OrderDetail',\n    tableName: 'OrderDetails',\n    // Tên bảng trong database\n    timestamps: false // Không sử dụng timestamps\n  });\n  return OrderDetail;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiT3JkZXJEZXRhaWwiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJiZWxvbmdzVG8iLCJPcmRlciIsImZvcmVpZ25LZXkiLCJhcyIsImhhc09uZSIsIlByb2R1Y3QiLCJpbml0IiwiT3JkZXJJRCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsIlByb2R1Y3RJRCIsIlF1YW50aXR5IiwibW9kZWxOYW1lIiwidGFibGVOYW1lIiwidGltZXN0YW1wcyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxNb2RlbHNcXCIsInNvdXJjZXMiOlsib3JkZXJkZXRhaWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgY2xhc3MgT3JkZXJEZXRhaWwgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAvLyDEkOG7i25oIG5naMSpYSBt4buRaSBxdWFuIGjhu4cgduG7m2kgT3JkZXIgdsOgIFByb2R1Y3RcclxuICAgICAgT3JkZXJEZXRhaWwuYmVsb25nc1RvKG1vZGVscy5PcmRlciwgeyBmb3JlaWduS2V5OiAnT3JkZXJJRCcsIGFzOiAnT3JkZXInIH0pO1xyXG4gICAgICBPcmRlckRldGFpbC5oYXNPbmUobW9kZWxzLlByb2R1Y3QsIHsgZm9yZWlnbktleTogJ1Byb2R1Y3RJRCcsIGFzOiAnUHJvZHVjdCcgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBPcmRlckRldGFpbC5pbml0KHtcclxuICAgIE9yZGVySUQ6IHtcclxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXHJcbiAgICAgIHJlZmVyZW5jZXM6IHtcclxuICAgICAgICBtb2RlbDogJ09yZGVyJywgLy8gVMOqbiBi4bqjbmcgT3JkZXJzIHRyb25nIGRhdGFiYXNlXHJcbiAgICAgICAga2V5OiAnT3JkZXJJRCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFByb2R1Y3RJRDoge1xyXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcclxuICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcclxuICAgICAgcmVmZXJlbmNlczoge1xyXG4gICAgICAgIG1vZGVsOiAnUHJvZHVjdCcsIC8vIFTDqm4gYuG6o25nIFByb2R1Y3RzIHRyb25nIGRhdGFiYXNlXHJcbiAgICAgICAga2V5OiAnUHJvZHVjdElEJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgUXVhbnRpdHk6IHtcclxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICB9LFxyXG4gIH0sIHtcclxuICAgIHNlcXVlbGl6ZSxcclxuICAgIG1vZGVsTmFtZTogJ09yZGVyRGV0YWlsJyxcclxuICAgIHRhYmxlTmFtZTogJ09yZGVyRGV0YWlscycsIC8vIFTDqm4gYuG6o25nIHRyb25nIGRhdGFiYXNlXHJcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSwgLy8gS2jDtG5nIHPhu60gZOG7pW5nIHRpbWVzdGFtcHNcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIE9yZGVyRGV0YWlsO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDekMsTUFBTUMsV0FBVyxTQUFTTixLQUFLLENBQUM7SUFDOUIsT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCO01BQ0FGLFdBQVcsQ0FBQ0csU0FBUyxDQUFDRCxNQUFNLENBQUNFLEtBQUssRUFBRTtRQUFFQyxVQUFVLEVBQUUsU0FBUztRQUFFQyxFQUFFLEVBQUU7TUFBUSxDQUFDLENBQUM7TUFDM0VOLFdBQVcsQ0FBQ08sTUFBTSxDQUFDTCxNQUFNLENBQUNNLE9BQU8sRUFBRTtRQUFFSCxVQUFVLEVBQUUsV0FBVztRQUFFQyxFQUFFLEVBQUU7TUFBVSxDQUFDLENBQUM7SUFDaEY7RUFDRjtFQUVBTixXQUFXLENBQUNTLElBQUksQ0FBQztJQUNmQyxPQUFPLEVBQUU7TUFDUEMsSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxPQUFPO1FBQUU7UUFDaEJDLEdBQUcsRUFBRTtNQUNQO0lBQ0YsQ0FBQztJQUNEQyxTQUFTLEVBQUU7TUFDVFAsSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxTQUFTO1FBQUU7UUFDbEJDLEdBQUcsRUFBRTtNQUNQO0lBQ0YsQ0FBQztJQUNERSxRQUFRLEVBQUU7TUFDUlIsSUFBSSxFQUFFWixTQUFTLENBQUNhLE9BQU87TUFDdkJDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQyxFQUFFO0lBQ0RmLFNBQVM7SUFDVHNCLFNBQVMsRUFBRSxhQUFhO0lBQ3hCQyxTQUFTLEVBQUUsY0FBYztJQUFFO0lBQzNCQyxVQUFVLEVBQUUsS0FBSyxDQUFFO0VBQ3JCLENBQUMsQ0FBQztFQUVGLE9BQU90QixXQUFXO0FBQ3BCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","OrderDetail","associate","models","belongsTo","Order","foreignKey","as","hasOne","Product","init","OrderID","type","INTEGER","allowNull","primaryKey","references","model","key","ProductID","Quantity","modelName","tableName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["orderdetail.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class OrderDetail extends Model {\r\n    static associate(models) {\r\n      // Định nghĩa mối quan hệ với Order và Product\r\n      OrderDetail.belongsTo(models.Order, { foreignKey: 'OrderID', as: 'Order' });\r\n      OrderDetail.hasOne(models.Product, { foreignKey: 'ProductID', as: 'Product' });\r\n    }\r\n  }\r\n\r\n  OrderDetail.init({\r\n    OrderID: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n      primaryKey: true,\r\n      references: {\r\n        model: 'Order', // Tên bảng Orders trong database\r\n        key: 'OrderID'\r\n      }\r\n    },\r\n    ProductID: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n      primaryKey: true,\r\n      references: {\r\n        model: 'Product', // Tên bảng Products trong database\r\n        key: 'ProductID'\r\n      }\r\n    },\r\n    Quantity: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n    },\r\n  }, {\r\n    sequelize,\r\n    modelName: 'OrderDetail',\r\n    tableName: 'OrderDetails', // Tên bảng trong database\r\n    timestamps: false, // Không sử dụng timestamps\r\n  });\r\n\r\n  return OrderDetail;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,WAAW,SAASN,KAAK,CAAC;IAC9B,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,WAAW,CAACG,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,UAAU,EAAE,SAAS;QAAEC,EAAE,EAAE;MAAQ,CAAC,CAAC;MAC3EN,WAAW,CAACO,MAAM,CAACL,MAAM,CAACM,OAAO,EAAE;QAAEH,UAAU,EAAE,WAAW;QAAEC,EAAE,EAAE;MAAU,CAAC,CAAC;IAChF;EACF;EAEAN,WAAW,CAACS,IAAI,CAAC;IACfC,OAAO,EAAE;MACPC,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QAAE;QAChBC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,SAAS,EAAE;MACTP,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE;QACVC,KAAK,EAAE,SAAS;QAAE;QAClBC,GAAG,EAAE;MACP;IACF,CAAC;IACDE,QAAQ,EAAE;MACRR,IAAI,EAAEZ,SAAS,CAACa,OAAO;MACvBC,SAAS,EAAE;IACb;EACF,CAAC,EAAE;IACDf,SAAS;IACTsB,SAAS,EAAE,aAAa;IACxBC,SAAS,EAAE,cAAc;IAAE;IAC3BC,UAAU,EAAE,KAAK,CAAE;EACrB,CAAC,CAAC;EAEF,OAAOtB,WAAW;AACpB,CAAC","ignoreList":[]}},"mtime":1718466329421},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nconst bcrypt = require('bcrypt');\nmodule.exports = (sequelize, DataTypes) => {\n  class User extends Model {\n    static associate(models) {\n      // Define associations here\n      User.hasMany(models.Employee, {\n        foreignKey: 'Phone',\n        as: 'Employees'\n      });\n      // Example of association with another model (Post)\n      // This assumes there is a Post model with a userId foreign key\n    }\n    isCorrectPassword(password) {\n      return password = this.Password;\n    }\n  }\n  User.init({\n    Name: DataTypes.STRING,\n    Phone: DataTypes.STRING,\n    Password: DataTypes.STRING,\n    Role: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'User',\n    timestamps: false\n  });\n  return User;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJiY3J5cHQiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiVXNlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJFbXBsb3llZSIsImZvcmVpZ25LZXkiLCJhcyIsImlzQ29ycmVjdFBhc3N3b3JkIiwicGFzc3dvcmQiLCJQYXNzd29yZCIsImluaXQiLCJOYW1lIiwiU1RSSU5HIiwiUGhvbmUiLCJSb2xlIiwiSU5URUdFUiIsIm1vZGVsTmFtZSIsInRpbWVzdGFtcHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcTW9kZWxzXFwiLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCB7IE1vZGVsIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xyXG4gIGNsYXNzIFVzZXIgZXh0ZW5kcyBNb2RlbCB7XHJcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xyXG4gICAgICAvLyBEZWZpbmUgYXNzb2NpYXRpb25zIGhlcmVcclxuICAgICAgVXNlci5oYXNNYW55KG1vZGVscy5FbXBsb3llZSwgeyBmb3JlaWduS2V5OiAnUGhvbmUnLCBhczogJ0VtcGxveWVlcyd9KTtcclxuICAgICAgLy8gRXhhbXBsZSBvZiBhc3NvY2lhdGlvbiB3aXRoIGFub3RoZXIgbW9kZWwgKFBvc3QpXHJcbiAgICAgIC8vIFRoaXMgYXNzdW1lcyB0aGVyZSBpcyBhIFBvc3QgbW9kZWwgd2l0aCBhIHVzZXJJZCBmb3JlaWduIGtleVxyXG4gICAgfVxyXG4gICAgaXNDb3JyZWN0UGFzc3dvcmQocGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHBhc3N3b3JkID0gdGhpcy5QYXNzd29yZDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgVXNlci5pbml0KHtcclxuICAgIE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsICAgICAgXHJcbiAgICBQaG9uZTogRGF0YVR5cGVzLlNUUklORyxcclxuICAgIFBhc3N3b3JkOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgUm9sZTogRGF0YVR5cGVzLklOVEVHRVJcclxuICB9LCB7XHJcbiAgICBzZXF1ZWxpemUsXHJcbiAgICBtb2RlbE5hbWU6ICdVc2VyJyxcclxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLCAgICAgICAgIFxyXG4gIH0pO1xyXG4gIHJldHVybiBVc2VyO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUN0QyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFaENFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3pDLE1BQU1DLElBQUksU0FBU1AsS0FBSyxDQUFDO0lBQ3ZCLE9BQU9RLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QjtNQUNBRixJQUFJLENBQUNHLE9BQU8sQ0FBQ0QsTUFBTSxDQUFDRSxRQUFRLEVBQUU7UUFBRUMsVUFBVSxFQUFFLE9BQU87UUFBRUMsRUFBRSxFQUFFO01BQVcsQ0FBQyxDQUFDO01BQ3RFO01BQ0E7SUFDRjtJQUNBQyxpQkFBaUJBLENBQUNDLFFBQVEsRUFBRTtNQUMxQixPQUFPQSxRQUFRLEdBQUcsSUFBSSxDQUFDQyxRQUFRO0lBQ2pDO0VBQ0Y7RUFFQVQsSUFBSSxDQUFDVSxJQUFJLENBQUM7SUFDUkMsSUFBSSxFQUFFWixTQUFTLENBQUNhLE1BQU07SUFDdEJDLEtBQUssRUFBRWQsU0FBUyxDQUFDYSxNQUFNO0lBQ3ZCSCxRQUFRLEVBQUVWLFNBQVMsQ0FBQ2EsTUFBTTtJQUMxQkUsSUFBSSxFQUFFZixTQUFTLENBQUNnQjtFQUNsQixDQUFDLEVBQUU7SUFDRGpCLFNBQVM7SUFDVGtCLFNBQVMsRUFBRSxNQUFNO0lBQ2pCQyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQUM7RUFDRixPQUFPakIsSUFBSTtBQUNiLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Model","require","bcrypt","module","exports","sequelize","DataTypes","User","associate","models","hasMany","Employee","foreignKey","as","isCorrectPassword","password","Password","init","Name","STRING","Phone","Role","INTEGER","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["user.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nconst bcrypt = require('bcrypt');\r\n\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class User extends Model {\r\n    static associate(models) {\r\n      // Define associations here\r\n      User.hasMany(models.Employee, { foreignKey: 'Phone', as: 'Employees'});\r\n      // Example of association with another model (Post)\r\n      // This assumes there is a Post model with a userId foreign key\r\n    }\r\n    isCorrectPassword(password) {\r\n      return password = this.Password;\r\n    }\r\n  }\r\n  \r\n  User.init({\r\n    Name: DataTypes.STRING,      \r\n    Phone: DataTypes.STRING,\r\n    Password: DataTypes.STRING,\r\n    Role: DataTypes.INTEGER\r\n  }, {\r\n    sequelize,\r\n    modelName: 'User',\r\n    timestamps: false,         \r\n  });\r\n  return User;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhCE,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASP,KAAK,CAAC;IACvB,OAAOQ,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,IAAI,CAACG,OAAO,CAACD,MAAM,CAACE,QAAQ,EAAE;QAAEC,UAAU,EAAE,OAAO;QAAEC,EAAE,EAAE;MAAW,CAAC,CAAC;MACtE;MACA;IACF;IACAC,iBAAiBA,CAACC,QAAQ,EAAE;MAC1B,OAAOA,QAAQ,GAAG,IAAI,CAACC,QAAQ;IACjC;EACF;EAEAT,IAAI,CAACU,IAAI,CAAC;IACRC,IAAI,EAAEZ,SAAS,CAACa,MAAM;IACtBC,KAAK,EAAEd,SAAS,CAACa,MAAM;IACvBH,QAAQ,EAAEV,SAAS,CAACa,MAAM;IAC1BE,IAAI,EAAEf,SAAS,CAACgB;EAClB,CAAC,EAAE;IACDjB,SAAS;IACTkB,SAAS,EAAE,MAAM;IACjBC,UAAU,EAAE;EACd,CAAC,CAAC;EACF,OAAOjB,IAAI;AACb,CAAC","ignoreList":[]}},"mtime":1718445986378},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Models\\\\voucher.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"'use strict';\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Voucher extends Model {\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\n    static associate(models) {}\n  }\n  Voucher.init({\n    VoucherID: {\n      type: DataTypes.INTEGER,\n      primaryKey: true,\n      autoIncrement: true,\n      allowNull: false\n    },\n    Name: DataTypes.STRING,\n    Describes: DataTypes.STRING,\n    Percent: DataTypes.INTEGER,\n    Mincost: DataTypes.INTEGER,\n    Maxcost: DataTypes.INTEGER,\n    EXDate: DataTypes.DATE\n  }, {\n    sequelize,\n    modelName: 'Voucher',\n    timestamps: false\n  });\n  return Voucher;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiVm91Y2hlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImluaXQiLCJWb3VjaGVySUQiLCJ0eXBlIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwiYWxsb3dOdWxsIiwiTmFtZSIsIlNUUklORyIsIkRlc2NyaWJlcyIsIlBlcmNlbnQiLCJNaW5jb3N0IiwiTWF4Y29zdCIsIkVYRGF0ZSIsIkRBVEUiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXE1vZGVsc1xcIiwic291cmNlcyI6WyJ2b3VjaGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgeyBNb2RlbCB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XHJcbiAgICBjbGFzcyBWb3VjaGVyIGV4dGVuZHMgTW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXHJcbiAgICAgICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVm91Y2hlci5pbml0KHtcclxuICAgICAgICBWb3VjaGVySUQ6IHtcclxuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXHJcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBOYW1lOiBEYXRhVHlwZXMuU1RSSU5HLFxyXG4gICAgICAgIERlc2NyaWJlczogRGF0YVR5cGVzLlNUUklORyxcclxuICAgICAgICBQZXJjZW50OiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICBNaW5jb3N0OiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICBNYXhjb3N0OiBEYXRhVHlwZXMuSU5URUdFUixcclxuICAgICAgICBFWERhdGU6IERhdGFUeXBlcy5EQVRFLFxyXG4gICAgfSwge1xyXG4gICAgICAgIHNlcXVlbGl6ZSxcclxuICAgICAgICBtb2RlbE5hbWU6ICdWb3VjaGVyJyxcclxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFZvdWNoZXI7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLE1BQU07RUFBRUE7QUFBTSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDLE1BQU1DLE9BQU8sU0FBU04sS0FBSyxDQUFDO0lBQ3hCO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7SUFDUSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUUsQ0FFekI7RUFDSjtFQUNBRixPQUFPLENBQUNHLElBQUksQ0FBQztJQUNUQyxTQUFTLEVBQUU7TUFDUEMsSUFBSSxFQUFFTixTQUFTLENBQUNPLE9BQU87TUFDdkJDLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxhQUFhLEVBQUUsSUFBSTtNQUNuQkMsU0FBUyxFQUFFO0lBQ2YsQ0FBQztJQUNEQyxJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksTUFBTTtJQUN0QkMsU0FBUyxFQUFFYixTQUFTLENBQUNZLE1BQU07SUFDM0JFLE9BQU8sRUFBRWQsU0FBUyxDQUFDTyxPQUFPO0lBQzFCUSxPQUFPLEVBQUVmLFNBQVMsQ0FBQ08sT0FBTztJQUMxQlMsT0FBTyxFQUFFaEIsU0FBUyxDQUFDTyxPQUFPO0lBQzFCVSxNQUFNLEVBQUVqQixTQUFTLENBQUNrQjtFQUN0QixDQUFDLEVBQUU7SUFDQ25CLFNBQVM7SUFDVG9CLFNBQVMsRUFBRSxTQUFTO0lBQ3BCQyxVQUFVLEVBQUU7RUFDaEIsQ0FBQyxDQUFDO0VBQ0YsT0FBT25CLE9BQU87QUFDbEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Voucher","associate","models","init","VoucherID","type","INTEGER","primaryKey","autoIncrement","allowNull","Name","STRING","Describes","Percent","Mincost","Maxcost","EXDate","DATE","modelName","timestamps"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Models\\","sources":["voucher.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n    class Voucher extends Model {\r\n        /**\r\n         * Helper method for defining associations.\r\n         * This method is not a part of Sequelize lifecycle.\r\n         * The `models/index` file will call this method automatically.\r\n         */\r\n        static associate(models) {\r\n\r\n        }\r\n    }\r\n    Voucher.init({\r\n        VoucherID: {\r\n            type: DataTypes.INTEGER,\r\n            primaryKey: true,\r\n            autoIncrement: true,\r\n            allowNull: false,\r\n        },\r\n        Name: DataTypes.STRING,\r\n        Describes: DataTypes.STRING,\r\n        Percent: DataTypes.INTEGER,\r\n        Mincost: DataTypes.INTEGER,\r\n        Maxcost: DataTypes.INTEGER,\r\n        EXDate: DataTypes.DATE,\r\n    }, {\r\n        sequelize,\r\n        modelName: 'Voucher',\r\n        timestamps: false,\r\n    });\r\n    return Voucher;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC,MAAMC,OAAO,SAASN,KAAK,CAAC;IACxB;AACR;AACA;AACA;AACA;IACQ,OAAOO,SAASA,CAACC,MAAM,EAAE,CAEzB;EACJ;EACAF,OAAO,CAACG,IAAI,CAAC;IACTC,SAAS,EAAE;MACPC,IAAI,EAAEN,SAAS,CAACO,OAAO;MACvBC,UAAU,EAAE,IAAI;MAChBC,aAAa,EAAE,IAAI;MACnBC,SAAS,EAAE;IACf,CAAC;IACDC,IAAI,EAAEX,SAAS,CAACY,MAAM;IACtBC,SAAS,EAAEb,SAAS,CAACY,MAAM;IAC3BE,OAAO,EAAEd,SAAS,CAACO,OAAO;IAC1BQ,OAAO,EAAEf,SAAS,CAACO,OAAO;IAC1BS,OAAO,EAAEhB,SAAS,CAACO,OAAO;IAC1BU,MAAM,EAAEjB,SAAS,CAACkB;EACtB,CAAC,EAAE;IACCnB,SAAS;IACToB,SAAS,EAAE,SAAS;IACpBC,UAAU,EAAE;EAChB,CAAC,CAAC;EACF,OAAOnB,OAAO;AAClB,CAAC","ignoreList":[]}},"mtime":1718465021656},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\invoice_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createInvoice,\n  getAllInvoice,\n  getInvoice,\n  updateInvoice,\n  deleteInvoice\n} = require('../controllers/invoice_controller');\nconst router = express.Router();\nrouter.post('/createInvoice', createInvoice);\nrouter.get('/getAllInvoice', getAllInvoice);\nrouter.get('/getInvoice/:iid', getInvoice);\nrouter.put('/updateInvoice/:iid', updateInvoice);\nrouter.delete('/deleteInvoice/:iid', deleteInvoice);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUludm9pY2UiLCJnZXRBbGxJbnZvaWNlIiwiZ2V0SW52b2ljZSIsInVwZGF0ZUludm9pY2UiLCJkZWxldGVJbnZvaWNlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldCIsInB1dCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbImludm9pY2Vfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlSW52b2ljZSwgZ2V0QWxsSW52b2ljZSwgZ2V0SW52b2ljZSwgdXBkYXRlSW52b2ljZSwgZGVsZXRlSW52b2ljZSB9ID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvaW52b2ljZV9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2NyZWF0ZUludm9pY2UnLCBjcmVhdGVJbnZvaWNlKTtcclxucm91dGVyLmdldCgnL2dldEFsbEludm9pY2UnLCBnZXRBbGxJbnZvaWNlKTtcclxucm91dGVyLmdldCgnL2dldEludm9pY2UvOmlpZCcsIGdldEludm9pY2UpO1xyXG5yb3V0ZXIucHV0KCcvdXBkYXRlSW52b2ljZS86aWlkJywgdXBkYXRlSW52b2ljZSk7XHJcbnJvdXRlci5kZWxldGUoJy9kZWxldGVJbnZvaWNlLzppaWQnLCBkZWxldGVJbnZvaWNlKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLGFBQWE7RUFBRUMsYUFBYTtFQUFFQyxVQUFVO0VBQUVDLGFBQWE7RUFBRUM7QUFBYyxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUMvSCxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGdCQUFnQixFQUFFUCxhQUFhLENBQUM7QUFDNUNLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGdCQUFnQixFQUFFUCxhQUFhLENBQUM7QUFDM0NJLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGtCQUFrQixFQUFFTixVQUFVLENBQUM7QUFDMUNHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHFCQUFxQixFQUFFTixhQUFhLENBQUM7QUFDaERFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLHFCQUFxQixFQUFFTixhQUFhLENBQUM7QUFFbkRPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createInvoice","getAllInvoice","getInvoice","updateInvoice","deleteInvoice","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["invoice_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createInvoice, getAllInvoice, getInvoice, updateInvoice, deleteInvoice } = require('../controllers/invoice_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createInvoice', createInvoice);\r\nrouter.get('/getAllInvoice', getAllInvoice);\r\nrouter.get('/getInvoice/:iid', getInvoice);\r\nrouter.put('/updateInvoice/:iid', updateInvoice);\r\nrouter.delete('/deleteInvoice/:iid', deleteInvoice);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,aAAa;EAAEC,aAAa;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,mCAAmC,CAAC;AAC/H,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,gBAAgB,EAAEP,aAAa,CAAC;AAC5CK,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEP,aAAa,CAAC;AAC3CI,MAAM,CAACG,GAAG,CAAC,kBAAkB,EAAEN,UAAU,CAAC;AAC1CG,MAAM,CAACI,GAAG,CAAC,qBAAqB,EAAEN,aAAa,CAAC;AAChDE,MAAM,CAACK,MAAM,CAAC,qBAAqB,EAAEN,aAAa,CAAC;AAEnDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498214840},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\invoice_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Invoice = require('../Models/invoice');\nconst db = require('../Models');\nconst InvoiceDetail = require('../Models/invoicedetail');\nconst asyncHandler = require('express-async-handler');\nconst createInvoice = asyncHandler(async (req, res) => {\n  const {\n    invoiceData,\n    invoiceDetailData\n  } = req.body;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await db.Invoice.create(invoiceData, {\n      transaction: t\n    });\n\n    // Tạo các chi tiết hóa đơn\n    for (const item of invoiceDetailData) {\n      await InvoiceDetail.create({\n        InvoiceID: invoice.InvoiceID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n    }\n    await t.commit();\n    res.status(201).json(invoice);\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst getInvoice = asyncHandler(async (req, res) => {\n  const {\n    iid\n  } = req.params;\n  try {\n    const invoice = await db.Invoice.findByPk(iid, {\n      include: [InvoiceDetail]\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n    res.status(200).json(invoice);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst getAllInvoice = asyncHandler(async (req, res) => {\n  try {\n    const invoices = await db.Invoice.findAll({\n      include: [InvoiceDetail]\n    });\n    res.status(200).json(invoices);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst updateInvoice = asyncHandler(async (req, res) => {\n  const {\n    iid\n  } = req.params;\n  const {\n    invoiceData,\n    invoiceDetailData\n  } = req.body;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await db.Invoice.findByPk(iid, {\n      transaction: t\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n    await db.invoice.update(invoiceData, {\n      transaction: t\n    });\n\n    // Xóa các chi tiết hóa đơn cũ\n    await db.InvoiceDetail.destroy({\n      where: {\n        InvoiceID: iid\n      },\n      transaction: t\n    });\n\n    // Tạo các chi tiết hóa đơn mới\n    for (const item of invoiceDetailData) {\n      await db.InvoiceDetail.create({\n        InvoiceID: invoice.InvoiceID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n    }\n\n    // Commit transaction\n    await t.commit();\n    res.status(200).json(invoice);\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst deleteInvoice = asyncHandler(async (req, res) => {\n  const {\n    iid\n  } = req.params;\n  const t = await sequelize.transaction();\n  try {\n    const invoice = await db.Invoice.findByPk(iid, {\n      transaction: t\n    });\n    if (!invoice) {\n      return res.status(404).json({\n        error: 'Invoice not found'\n      });\n    }\n\n    // Xóa các chi tiết hóa đơn\n    await db.InvoiceDetail.destroy({\n      where: {\n        InvoiceID: iid\n      },\n      transaction: t\n    });\n\n    // Xóa hóa đơn\n    await db.invoice.destroy({\n      transaction: t\n    });\n\n    // Commit transaction\n    await t.commit();\n    res.status(200).json({\n      message: 'Invoice deleted successfully'\n    });\n  } catch (error) {\n    // Rollback transaction nếu có lỗi\n    await t.rollback();\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nmodule.exports = {\n  createInvoice,\n  getInvoice,\n  getAllInvoice,\n  updateInvoice,\n  deleteInvoice\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbnZvaWNlIiwicmVxdWlyZSIsImRiIiwiSW52b2ljZURldGFpbCIsImFzeW5jSGFuZGxlciIsImNyZWF0ZUludm9pY2UiLCJyZXEiLCJyZXMiLCJpbnZvaWNlRGF0YSIsImludm9pY2VEZXRhaWxEYXRhIiwiYm9keSIsInQiLCJzZXF1ZWxpemUiLCJ0cmFuc2FjdGlvbiIsImludm9pY2UiLCJjcmVhdGUiLCJpdGVtIiwiSW52b2ljZUlEIiwiUHJvZHVjdElEIiwiUXVhbnRpdHkiLCJjb21taXQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJyb2xsYmFjayIsIm1lc3NhZ2UiLCJnZXRJbnZvaWNlIiwiaWlkIiwicGFyYW1zIiwiZmluZEJ5UGsiLCJpbmNsdWRlIiwiZ2V0QWxsSW52b2ljZSIsImludm9pY2VzIiwiZmluZEFsbCIsInVwZGF0ZUludm9pY2UiLCJ1cGRhdGUiLCJkZXN0cm95Iiwid2hlcmUiLCJkZWxldGVJbnZvaWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJpbnZvaWNlX2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgSW52b2ljZSA9IHJlcXVpcmUoJy4uL01vZGVscy9pbnZvaWNlJyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IEludm9pY2VEZXRhaWwgPSByZXF1aXJlKCcuLi9Nb2RlbHMvaW52b2ljZWRldGFpbCcpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUludm9pY2UgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGludm9pY2VEYXRhLCBpbnZvaWNlRGV0YWlsRGF0YSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgY29uc3QgdCA9IGF3YWl0IHNlcXVlbGl6ZS50cmFuc2FjdGlvbigpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgZGIuSW52b2ljZS5jcmVhdGUoaW52b2ljZURhdGEsIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcblxyXG4gICAgICAgIC8vIFThuqFvIGPDoWMgY2hpIHRp4bq/dCBow7NhIMSRxqFuXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGludm9pY2VEZXRhaWxEYXRhKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IEludm9pY2VEZXRhaWwuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIEludm9pY2VJRDogaW52b2ljZS5JbnZvaWNlSUQsXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SUQ6IGl0ZW0uUHJvZHVjdElELFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IGl0ZW0uUXVhbnRpdHksXHJcbiAgICAgICAgICAgIH0sIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0LmNvbW1pdCgpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGludm9pY2UpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBu4bq/dSBjw7MgbOG7l2lcclxuICAgICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBnZXRJbnZvaWNlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBpaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBkYi5JbnZvaWNlLmZpbmRCeVBrKGlpZCwge1xyXG4gICAgICAgICAgICBpbmNsdWRlOiBbSW52b2ljZURldGFpbF1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIWludm9pY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdJbnZvaWNlIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGludm9pY2UpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGdldEFsbEludm9pY2UgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2VzID0gYXdhaXQgZGIuSW52b2ljZS5maW5kQWxsKHtcclxuICAgICAgICAgICAgaW5jbHVkZTogW0ludm9pY2VEZXRhaWxdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oaW52b2ljZXMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVwZGF0ZUludm9pY2UgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgaW52b2ljZURhdGEsIGludm9pY2VEZXRhaWxEYXRhIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHQgPSBhd2FpdCBzZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBkYi5JbnZvaWNlLmZpbmRCeVBrKGlpZCwgeyB0cmFuc2FjdGlvbjogdCB9KTtcclxuICAgICAgICBpZiAoIWludm9pY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdJbnZvaWNlIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBkYi5pbnZvaWNlLnVwZGF0ZShpbnZvaWNlRGF0YSwgeyB0cmFuc2FjdGlvbjogdCB9KTtcclxuXHJcbiAgICAgICAgLy8gWMOzYSBjw6FjIGNoaSB0aeG6v3QgaMOzYSDEkcahbiBjxalcclxuICAgICAgICBhd2FpdCBkYi5JbnZvaWNlRGV0YWlsLmRlc3Ryb3koe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBJbnZvaWNlSUQ6IGlpZCB9LFxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBU4bqhbyBjw6FjIGNoaSB0aeG6v3QgaMOzYSDEkcahbiBt4bubaVxyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnZvaWNlRGV0YWlsRGF0YSkge1xyXG4gICAgICAgICAgICBhd2FpdCBkYi5JbnZvaWNlRGV0YWlsLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBJbnZvaWNlSUQ6IGludm9pY2UuSW52b2ljZUlELFxyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElEOiBpdGVtLlByb2R1Y3RJRCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBpdGVtLlF1YW50aXR5LFxyXG4gICAgICAgICAgICB9LCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29tbWl0IHRyYW5zYWN0aW9uXHJcbiAgICAgICAgYXdhaXQgdC5jb21taXQoKTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oaW52b2ljZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIFJvbGxiYWNrIHRyYW5zYWN0aW9uIG7hur91IGPDsyBs4buXaVxyXG4gICAgICAgIGF3YWl0IHQucm9sbGJhY2soKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZUludm9pY2UgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHQgPSBhd2FpdCBzZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBkYi5JbnZvaWNlLmZpbmRCeVBrKGlpZCwgeyB0cmFuc2FjdGlvbjogdCB9KTtcclxuICAgICAgICBpZiAoIWludm9pY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdJbnZvaWNlIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBYw7NhIGPDoWMgY2hpIHRp4bq/dCBow7NhIMSRxqFuXHJcbiAgICAgICAgYXdhaXQgZGIuSW52b2ljZURldGFpbC5kZXN0cm95KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgSW52b2ljZUlEOiBpaWQgfSxcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gWMOzYSBow7NhIMSRxqFuXHJcbiAgICAgICAgYXdhaXQgZGIuaW52b2ljZS5kZXN0cm95KHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcblxyXG4gICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxyXG4gICAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0ludm9pY2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBu4bq/dSBjw7MgbOG7l2lcclxuICAgICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUludm9pY2UsXHJcbiAgICBnZXRJbnZvaWNlLFxyXG4gICAgZ2V0QWxsSW52b2ljZSxcclxuICAgIHVwZGF0ZUludm9pY2UsXHJcbiAgICBkZWxldGVJbnZvaWNlXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDNUMsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQy9CLE1BQU1FLGFBQWEsR0FBR0YsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3hELE1BQU1HLFlBQVksR0FBR0gsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1JLGFBQWEsR0FBR0QsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25ELE1BQU07SUFBRUMsV0FBVztJQUFFQztFQUFrQixDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksSUFBSTtFQUVuRCxNQUFNQyxDQUFDLEdBQUcsTUFBTUMsU0FBUyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUN2QyxJQUFJO0lBQ0EsTUFBTUMsT0FBTyxHQUFHLE1BQU1aLEVBQUUsQ0FBQ0YsT0FBTyxDQUFDZSxNQUFNLENBQUNQLFdBQVcsRUFBRTtNQUFFSyxXQUFXLEVBQUVGO0lBQUUsQ0FBQyxDQUFDOztJQUV4RTtJQUNBLEtBQUssTUFBTUssSUFBSSxJQUFJUCxpQkFB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","map":{"version":3,"names":["Invoice","require","db","InvoiceDetail","asyncHandler","createInvoice","req","res","invoiceData","invoiceDetailData","body","t","sequelize","transaction","invoice","create","item","InvoiceID","ProductID","Quantity","commit","status","json","error","rollback","message","getInvoice","iid","params","findByPk","include","getAllInvoice","invoices","findAll","updateInvoice","update","destroy","where","deleteInvoice","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["invoice_controller.js"],"sourcesContent":["const Invoice = require('../Models/invoice');\r\nconst db = require('../Models');\r\nconst InvoiceDetail = require('../Models/invoicedetail');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createInvoice = asyncHandler(async (req, res) => {\r\n    const { invoiceData, invoiceDetailData } = req.body;\r\n\r\n    const t = await sequelize.transaction();\r\n    try {\r\n        const invoice = await db.Invoice.create(invoiceData, { transaction: t });\r\n\r\n        // Tạo các chi tiết hóa đơn\r\n        for (const item of invoiceDetailData) {\r\n            await InvoiceDetail.create({\r\n                InvoiceID: invoice.InvoiceID,\r\n                ProductID: item.ProductID,\r\n                Quantity: item.Quantity,\r\n            }, { transaction: t });\r\n        }\r\n\r\n        await t.commit();\r\n        res.status(201).json(invoice);\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getInvoice = asyncHandler(async (req, res) => {\r\n    const { iid } = req.params;\r\n    try {\r\n        const invoice = await db.Invoice.findByPk(iid, {\r\n            include: [InvoiceDetail]\r\n        });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n        res.status(200).json(invoice);\r\n    } catch (error) {\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst getAllInvoice = asyncHandler(async (req, res) => {\r\n    try {\r\n        const invoices = await db.Invoice.findAll({\r\n            include: [InvoiceDetail]\r\n        });\r\n        res.status(200).json(invoices);\r\n    } catch (error) {\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst updateInvoice = asyncHandler(async (req, res) => {\r\n    const { iid } = req.params;\r\n    const { invoiceData, invoiceDetailData } = req.body;\r\n    const t = await sequelize.transaction();\r\n\r\n    try {\r\n        const invoice = await db.Invoice.findByPk(iid, { transaction: t });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n\r\n        await db.invoice.update(invoiceData, { transaction: t });\r\n\r\n        // Xóa các chi tiết hóa đơn cũ\r\n        await db.InvoiceDetail.destroy({\r\n            where: { InvoiceID: iid },\r\n            transaction: t\r\n        });\r\n\r\n        // Tạo các chi tiết hóa đơn mới\r\n        for (const item of invoiceDetailData) {\r\n            await db.InvoiceDetail.create({\r\n                InvoiceID: invoice.InvoiceID,\r\n                ProductID: item.ProductID,\r\n                Quantity: item.Quantity,\r\n            }, { transaction: t });\r\n        }\r\n\r\n        // Commit transaction\r\n        await t.commit();\r\n\r\n        res.status(200).json(invoice);\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst deleteInvoice = asyncHandler(async (req, res) => {\r\n    const { iid } = req.params;\r\n    const t = await sequelize.transaction();\r\n\r\n    try {\r\n        const invoice = await db.Invoice.findByPk(iid, { transaction: t });\r\n        if (!invoice) {\r\n            return res.status(404).json({ error: 'Invoice not found' });\r\n        }\r\n\r\n        // Xóa các chi tiết hóa đơn\r\n        await db.InvoiceDetail.destroy({\r\n            where: { InvoiceID: iid },\r\n            transaction: t\r\n        });\r\n\r\n        // Xóa hóa đơn\r\n        await db.invoice.destroy({ transaction: t });\r\n\r\n        // Commit transaction\r\n        await t.commit();\r\n\r\n        res.status(200).json({ message: 'Invoice deleted successfully' });\r\n    } catch (error) {\r\n        // Rollback transaction nếu có lỗi\r\n        await t.rollback();\r\n        res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nmodule.exports = {\r\n    createInvoice,\r\n    getInvoice,\r\n    getAllInvoice,\r\n    updateInvoice,\r\n    deleteInvoice\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718498262492},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\customer_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createCustomer,\n  getAllCustomer,\n  getCustomer,\n  updateCustomer,\n  deleteCustomer\n} = require('../controllers/customer_controller');\nconst router = express.Router();\nrouter.post('/createCustomer', createCustomer); //ok\nrouter.get('/getAllCustomer', getAllCustomer); //ok\nrouter.get('/getCustomer/:cid', getCustomer); //ok\nrouter.put('/updateCustomer/:cid', updateCustomer);\nrouter.delete('/deleteCustomer/:cid', deleteCustomer); //ok\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUN1c3RvbWVyIiwiZ2V0QWxsQ3VzdG9tZXIiLCJnZXRDdXN0b21lciIsInVwZGF0ZUN1c3RvbWVyIiwiZGVsZXRlQ3VzdG9tZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiY3VzdG9tZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlQ3VzdG9tZXIsIGdldEFsbEN1c3RvbWVyLCBnZXRDdXN0b21lciwgdXBkYXRlQ3VzdG9tZXIsIGRlbGV0ZUN1c3RvbWVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jdXN0b21lcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2NyZWF0ZUN1c3RvbWVyJywgY3JlYXRlQ3VzdG9tZXIpOy8vb2tcclxucm91dGVyLmdldCgnL2dldEFsbEN1c3RvbWVyJywgZ2V0QWxsQ3VzdG9tZXIpOy8vb2tcclxucm91dGVyLmdldCgnL2dldEN1c3RvbWVyLzpjaWQnLCBnZXRDdXN0b21lcik7Ly9va1xyXG5yb3V0ZXIucHV0KCcvdXBkYXRlQ3VzdG9tZXIvOmNpZCcsIHVwZGF0ZUN1c3RvbWVyKTtcclxucm91dGVyLmRlbGV0ZSgnL2RlbGV0ZUN1c3RvbWVyLzpjaWQnLCBkZWxldGVDdXN0b21lcik7Ly9va1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLGNBQWM7RUFBRUMsY0FBYztFQUFFQyxXQUFXO0VBQUVDLGNBQWM7RUFBRUM7QUFBZSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUNySSxNQUFNTSxNQUFNLEdBQUdQLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGlCQUFpQixFQUFFUCxjQUFjLENBQUMsQ0FBQztBQUMvQ0ssTUFBTSxDQUFDRyxHQUFHLENBQUMsaUJBQWlCLEVBQUVQLGNBQWMsQ0FBQyxDQUFDO0FBQzlDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRU4sV0FBVyxDQUFDLENBQUM7QUFDN0NHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHNCQUFzQixFQUFFTixjQUFjLENBQUM7QUFDbERFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLHNCQUFzQixFQUFFTixjQUFjLENBQUMsQ0FBQzs7QUFHdERPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createCustomer","getAllCustomer","getCustomer","updateCustomer","deleteCustomer","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["customer_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createCustomer, getAllCustomer, getCustomer, updateCustomer, deleteCustomer } = require('../controllers/customer_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createCustomer', createCustomer);//ok\r\nrouter.get('/getAllCustomer', getAllCustomer);//ok\r\nrouter.get('/getCustomer/:cid', getCustomer);//ok\r\nrouter.put('/updateCustomer/:cid', updateCustomer);\r\nrouter.delete('/deleteCustomer/:cid', deleteCustomer);//ok\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEP,cAAc,CAAC,CAAC;AAC/CK,MAAM,CAACG,GAAG,CAAC,iBAAiB,EAAEP,cAAc,CAAC,CAAC;AAC9CI,MAAM,CAACG,GAAG,CAAC,mBAAmB,EAAEN,WAAW,CAAC,CAAC;AAC7CG,MAAM,CAACI,GAAG,CAAC,sBAAsB,EAAEN,cAAc,CAAC;AAClDE,MAAM,CAACK,MAAM,CAAC,sBAAsB,EAAEN,cAAc,CAAC,CAAC;;AAGtDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498333743},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\customer_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Customer = require('../Models/customer.js');\nconst db = require('../Models');\nconst asyncHandler = require('express-async-handler');\nconst {\n  where\n} = require('sequelize');\nconst createCustomer = asyncHandler(async (req, res) => {\n  const {\n    Name,\n    Phone,\n    Gender\n  } = req.body;\n  if (!Name || !Phone || !Gender) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  const customerExist = await db.Customer.findOne({\n    where: {\n      Name,\n      Phone,\n      Gender\n    }\n  });\n  if (customerExist) {\n    return res.status(400).json({\n      success: false,\n      message: \"Khách hàng đã tồn tại trong danh sách\"\n    });\n  }\n  const newCustomer = await db.Customer.create(req.body);\n  return res.status(201).json({\n    success: true,\n    newCustomer: newCustomer\n  });\n});\nconst getAllCustomer = asyncHandler(async (req, res) => {\n  try {\n    const listCustomer = await db.Customer.findAll();\n    return res.status(200).json({\n      success: true,\n      listCustomer: listCustomer\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await db.Customer.findByPk(cid);\n  if (customer) {\n    return res.status(200).json({\n      success: true,\n      Customer: customer\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không có trong danh sách\"\n    });\n  }\n});\nconst updateCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await db.Customer.findByPk(cid);\n  if (!customer) {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không tồn tại\"\n    });\n  }\n  await db.customer.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedCustomer: customer\n  });\n});\nconst deleteCustomer = asyncHandler(async (req, res) => {\n  const {\n    cid\n  } = req.params;\n  const customer = await db.Customer.findByPk(cid);\n\n  // Ktra xem khách hàng có tồn tại hay không\n  if (!customer) {\n    return res.status(404).json({\n      success: false,\n      message: \"Khách hàng không tồn tại\"\n    });\n  }\n  await db.Customer.destroy({\n    where: {\n      CustomerID: cid\n    }\n  });\n  return res.status(200).json({\n    success: true,\n    message: `Đã xoá khách hàng ${customer.Name}`\n  });\n});\nmodule.exports = {\n  createCustomer,\n  getAllCustomer,\n  getCustomer,\n  updateCustomer,\n  deleteCustomer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDdXN0b21lciIsInJlcXVpcmUiLCJkYiIsImFzeW5jSGFuZGxlciIsIndoZXJlIiwiY3JlYXRlQ3VzdG9tZXIiLCJyZXEiLCJyZXMiLCJOYW1lIiwiUGhvbmUiLCJHZW5kZXIiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXMiLCJjdXN0b21lckV4aXN0IiwiZmluZE9uZSIsIm1lc3NhZ2UiLCJuZXdDdXN0b21lciIsImNyZWF0ZSIsImdldEFsbEN1c3RvbWVyIiwibGlzdEN1c3RvbWVyIiwiZmluZEFsbCIsImVycm9yIiwiZ2V0Q3VzdG9tZXIiLCJjaWQiLCJwYXJhbXMiLCJjdXN0b21lciIsImZpbmRCeVBrIiwidXBkYXRlQ3VzdG9tZXIiLCJ1cGRhdGUiLCJ1cGRhdGVkQ3VzdG9tZXIiLCJkZWxldGVDdXN0b21lciIsImRlc3Ryb3kiLCJDdXN0b21lcklEIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJjdXN0b21lcl9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEN1c3RvbWVyID0gcmVxdWlyZSgnLi4vTW9kZWxzL2N1c3RvbWVyLmpzJyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IGFzeW5jSGFuZGxlciA9IHJlcXVpcmUoJ2V4cHJlc3MtYXN5bmMtaGFuZGxlcicpO1xyXG5jb25zdCB7IHdoZXJlIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUN1c3RvbWVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lLCBQaG9uZSAsR2VuZGVyIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIU5hbWUgfHwgIVBob25lIHx8ICFHZW5kZXIgKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjdXN0b21lckV4aXN0ID0gYXdhaXQgZGIuQ3VzdG9tZXIuZmluZE9uZSh7IHdoZXJlOiB7IE5hbWUsIFBob25lICxHZW5kZXIgfSB9KTtcclxuXHJcbiAgICBpZiAoY3VzdG9tZXJFeGlzdCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIktow6FjaCBow6BuZyDEkcOjIHThu5NuIHThuqFpIHRyb25nIGRhbmggc8OhY2hcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld0N1c3RvbWVyID0gYXdhaXQgZGIuQ3VzdG9tZXIuY3JlYXRlKHJlcS5ib2R5KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbmV3Q3VzdG9tZXI6IG5ld0N1c3RvbWVyXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBnZXRBbGxDdXN0b21lciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbGlzdEN1c3RvbWVyID0gYXdhaXQgZGIuQ3VzdG9tZXIuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGxpc3RDdXN0b21lcjogbGlzdEN1c3RvbWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0Q3VzdG9tZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgY2lkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgZGIuQ3VzdG9tZXIuZmluZEJ5UGsoY2lkKTtcclxuXHJcbiAgICBpZiAoY3VzdG9tZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBDdXN0b21lcjogY3VzdG9tZXJcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiS2jDoWNoIGjDoG5nIGtow7RuZyBjw7MgdHJvbmcgZGFuaCBzw6FjaFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlQ3VzdG9tZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgY2lkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgZGIuQ3VzdG9tZXIuZmluZEJ5UGsoY2lkKTtcclxuXHJcbiAgICBpZiAoIWN1c3RvbWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiS2jDoWNoIGjDoG5nIGtow7RuZyB04buTbiB04bqhaVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGIuY3VzdG9tZXIudXBkYXRlKHJlcS5ib2R5KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdXBkYXRlZEN1c3RvbWVyOiBjdXN0b21lclxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ3VzdG9tZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgY2lkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgZGIuQ3VzdG9tZXIuZmluZEJ5UGsoY2lkKTtcclxuXHJcbiAgICAvLyBLdHJhIHhlbSBraMOhY2ggaMOgbmcgY8OzIHThu5NuIHThuqFpIGhheSBraMO0bmdcclxuICAgIGlmICghY3VzdG9tZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJLaMOhY2ggaMOgbmcga2jDtG5nIHThu5NuIHThuqFpXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGIuQ3VzdG9tZXIuZGVzdHJveSh7d2hlcmUgOntDdXN0b21lcklEOiBjaWR9fSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGDEkMOjIHhvw6Ega2jDoWNoIGjDoG5nICR7Y3VzdG9tZXIuTmFtZX1gXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUN1c3RvbWVyLFxyXG4gICAgZ2V0QWxsQ3VzdG9tZXIsXHJcbiAgICBnZXRDdXN0b21lcixcclxuICAgIHVwZGF0ZUN1c3RvbWVyLFxyXG4gICAgZGVsZXRlQ3VzdG9tZXJcclxufSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDakQsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQy9CLE1BQU1FLFlBQVksR0FBR0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3JELE1BQU07RUFBRUc7QUFBTSxDQUFDLEdBQUdILE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFdEMsTUFBTUksY0FBYyxHQUFHRixZQUFZLENBQUMsT0FBT0csR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLEtBQUs7SUFBRUM7RUFBTyxDQUFDLEdBQUdKLEdBQUcsQ0FBQ0ssSUFBSTtFQUV4QyxJQUFJLENBQUNILElBQUksSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQ0MsTUFBTSxFQUFHO0lBQzdCLE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEdBQUcsRUFBRTtJQUNULENBQUMsQ0FBQztFQUNOO0VBRUEsTUFBTUMsYUFBYSxHQUFHLE1BQU1kLEVBQUUsQ0FBQ0YsUUFBUSxDQUFDaUIsT0FBTyxDQUFDO0lBQUViLEtBQUssRUFBRTtNQUFFSSxJQUFJO01BQUVDLEtBQUs7TUFBRUM7SUFBTztFQUFFLENBQUMsQ0FBQztFQUVuRixJQUFJTSxhQUFhLEVBQUU7SUFDZixPQUFPVCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxPQUFPLEVBQUUsS0FBSztNQUNkSSxPQUFPLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDTjtFQUVBLE1BQU1DLFdBQVcsR0FBRyxNQUFNakIs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","map":{"version":3,"names":["Customer","require","db","asyncHandler","where","createCustomer","req","res","Name","Phone","Gender","body","status","json","success","mes","customerExist","findOne","message","newCustomer","create","getAllCustomer","listCustomer","findAll","error","getCustomer","cid","params","customer","findByPk","updateCustomer","update","updatedCustomer","deleteCustomer","destroy","CustomerID","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["customer_controller.js"],"sourcesContent":["const Customer = require('../Models/customer.js');\r\nconst db = require('../Models');\r\nconst asyncHandler = require('express-async-handler');\r\nconst { where } = require('sequelize');\r\n\r\nconst createCustomer = asyncHandler(async (req, res) => {\r\n    const { Name, Phone ,Gender } = req.body;\r\n\r\n    if (!Name || !Phone || !Gender ) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n\r\n    const customerExist = await db.Customer.findOne({ where: { Name, Phone ,Gender } });\r\n\r\n    if (customerExist) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Khách hàng đã tồn tại trong danh sách\"\r\n        });\r\n    }\r\n\r\n    const newCustomer = await db.Customer.create(req.body);\r\n\r\n    return res.status(201).json({\r\n        success: true,\r\n        newCustomer: newCustomer\r\n    });\r\n});\r\n\r\nconst getAllCustomer = asyncHandler(async (req, res) => {\r\n    try {\r\n        const listCustomer = await db.Customer.findAll();\r\n        return res.status(200).json({\r\n            success: true,\r\n            listCustomer: listCustomer\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await db.Customer.findByPk(cid);\r\n\r\n    if (customer) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            Customer: customer\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Khách hàng không có trong danh sách\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await db.Customer.findByPk(cid);\r\n\r\n    if (!customer) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Khách hàng không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await db.customer.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedCustomer: customer\r\n    });\r\n});\r\n\r\nconst deleteCustomer = asyncHandler(async(req, res) => {\r\n    const { cid } = req.params;\r\n\r\n    const customer = await db.Customer.findByPk(cid);\r\n\r\n    // Ktra xem khách hàng có tồn tại hay không\r\n    if (!customer) {\r\n        return res.status(404).json({ success: false, message: \"Khách hàng không tồn tại\" });\r\n    }\r\n\r\n    await db.Customer.destroy({where :{CustomerID: cid}});\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: `Đã xoá khách hàng ${customer.Name}`\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    createCustomer,\r\n    getAllCustomer,\r\n    getCustomer,\r\n    updateCustomer,\r\n    deleteCustomer\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718498331243},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\emloyee_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createEmployee,\n  getAllEmployee,\n  getEmployee,\n  updateEmployee,\n  deleteEmployee\n} = require('../controllers/employee_controller');\nconst router = express.Router();\nrouter.post('/createEmployee', createEmployee); //ok\nrouter.get('/getAllEmployee', getAllEmployee); //ok\nrouter.get('/getEmployee/:eid', getEmployee); //ok\nrouter.put('/updateEmployee/:eid', updateEmployee);\nrouter.delete('/deleteEmployee/:eid', deleteEmployee); //ok\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUVtcGxveWVlIiwiZ2V0QWxsRW1wbG95ZWUiLCJnZXRFbXBsb3llZSIsInVwZGF0ZUVtcGxveWVlIiwiZGVsZXRlRW1wbG95ZWUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsiZW1sb3llZV9yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgeyBjcmVhdGVFbXBsb3llZSwgZ2V0QWxsRW1wbG95ZWUsIGdldEVtcGxveWVlLCB1cGRhdGVFbXBsb3llZSwgZGVsZXRlRW1wbG95ZWUgfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2VtcGxveWVlX2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvY3JlYXRlRW1wbG95ZWUnLCBjcmVhdGVFbXBsb3llZSk7Ly9va1xyXG5yb3V0ZXIuZ2V0KCcvZ2V0QWxsRW1wbG95ZWUnLCBnZXRBbGxFbXBsb3llZSk7Ly9va1xyXG5yb3V0ZXIuZ2V0KCcvZ2V0RW1wbG95ZWUvOmVpZCcsIGdldEVtcGxveWVlKTsvL29rXHJcbnJvdXRlci5wdXQoJy91cGRhdGVFbXBsb3llZS86ZWlkJywgdXBkYXRlRW1wbG95ZWUpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvZGVsZXRlRW1wbG95ZWUvOmVpZCcsIGRlbGV0ZUVtcGxveWVlKTsvL29rXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxjQUFjO0VBQUVDLGNBQWM7RUFBRUMsV0FBVztFQUFFQyxjQUFjO0VBQUVDO0FBQWUsQ0FBQyxHQUFHTCxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDckksTUFBTU0sTUFBTSxHQUFHUCxPQUFPLENBQUNRLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxpQkFBaUIsRUFBRVAsY0FBYyxDQUFDLENBQUM7QUFDL0NLLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGlCQUFpQixFQUFFUCxjQUFjLENBQUMsQ0FBQztBQUM5Q0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsbUJBQW1CLEVBQUVOLFdBQVcsQ0FBQyxDQUFDO0FBQzdDRyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRU4sY0FBYyxDQUFDO0FBQ2xERSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRU4sY0FBYyxDQUFDLENBQUM7O0FBRXRETyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createEmployee","getAllEmployee","getEmployee","updateEmployee","deleteEmployee","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["emloyee_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createEmployee, getAllEmployee, getEmployee, updateEmployee, deleteEmployee } = require('../controllers/employee_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createEmployee', createEmployee);//ok\r\nrouter.get('/getAllEmployee', getAllEmployee);//ok\r\nrouter.get('/getEmployee/:eid', getEmployee);//ok\r\nrouter.put('/updateEmployee/:eid', updateEmployee);\r\nrouter.delete('/deleteEmployee/:eid', deleteEmployee);//ok\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,cAAc;EAAEC,cAAc;EAAEC,WAAW;EAAEC,cAAc;EAAEC;AAAe,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACrI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEP,cAAc,CAAC,CAAC;AAC/CK,MAAM,CAACG,GAAG,CAAC,iBAAiB,EAAEP,cAAc,CAAC,CAAC;AAC9CI,MAAM,CAACG,GAAG,CAAC,mBAAmB,EAAEN,WAAW,CAAC,CAAC;AAC7CG,MAAM,CAACI,GAAG,CAAC,sBAAsB,EAAEN,cAAc,CAAC;AAClDE,MAAM,CAACK,MAAM,CAAC,sBAAsB,EAAEN,cAAc,CAAC,CAAC;;AAEtDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498282028},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\employee_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Employee = require('../Models/employee');\nconst db = require('../Models');\nconst asyncHandler = require('express-async-handler');\nconst createEmployee = asyncHandler(async (req, res) => {\n  const {\n    Name,\n    Phone,\n    Gender,\n    Address,\n    Role,\n    Salary\n  } = req.body;\n  if (!Name || !Phone || !Gender || !Address || !Role || !Salary) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  const employeeExist = await db.Employee.findOne({\n    where: {\n      Name,\n      Phone,\n      Gender,\n      Address,\n      Role,\n      Salary\n    }\n  });\n  if (employeeExist) {\n    return res.status(400).json({\n      success: false,\n      message: \"Nhân viên đã tồn tại trong danh sách\"\n    });\n  }\n  const newEmployee = await db.Employee.create(req.body);\n  return res.status(201).json({\n    success: true,\n    newEmployee: newEmployee\n  });\n});\nconst getAllEmployee = asyncHandler(async (req, res) => {\n  try {\n    const listEmployee = await db.Employee.findAll();\n    return res.status(200).json({\n      success: true,\n      listEmployee: listEmployee\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getEmployee = asyncHandler(async (req, res) => {\n  const {\n    eid\n  } = req.params;\n  const employee = await db.Employee.findByPk(eid);\n  if (Employee) {\n    return res.status(200).json({\n      success: true,\n      Employee: employee\n    });\n  } else {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không có trong danh sách\"\n    });\n  }\n});\nconst updateEmployee = asyncHandler(async (req, res) => {\n  const {\n    eid\n  } = req.params;\n  const Employee = await db.Employee.findByPk(eid);\n  if (!Employee) {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không tồn tại\"\n    });\n  }\n  await db.Employee.update(req.body);\n  return res.status(200).json({\n    success: true,\n    updatedEmployee: Employee\n  });\n});\nconst deleteEmployee = asyncHandler(async (req, res) => {\n  const {\n    eid\n  } = req.params;\n  const employee = await db.Employee.findByPk(eid);\n\n  // Kiểm tra xem nhân viên có tồn tại hay không\n  if (!employee) {\n    return res.status(404).json({\n      success: false,\n      message: \"Nhân viên không tồn tại\"\n    });\n  }\n  await employee.destroy();\n  return res.status(200).json({\n    success: true,\n    message: `Đã xoá nhân viên ${employee.Name}`\n  });\n});\nmodule.exports = {\n  createEmployee,\n  getAllEmployee,\n  getEmployee,\n  updateEmployee,\n  deleteEmployee\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbXBsb3llZSIsInJlcXVpcmUiLCJkYiIsImFzeW5jSGFuZGxlciIsImNyZWF0ZUVtcGxveWVlIiwicmVxIiwicmVzIiwiTmFtZSIsIlBob25lIiwiR2VuZGVyIiwiQWRkcmVzcyIsIlJvbGUiLCJTYWxhcnkiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXMiLCJlbXBsb3llZUV4aXN0IiwiZmluZE9uZSIsIndoZXJlIiwibWVzc2FnZSIsIm5ld0VtcGxveWVlIiwiY3JlYXRlIiwiZ2V0QWxsRW1wbG95ZWUiLCJsaXN0RW1wbG95ZWUiLCJmaW5kQWxsIiwiZXJyb3IiLCJnZXRFbXBsb3llZSIsImVpZCIsInBhcmFtcyIsImVtcGxveWVlIiwiZmluZEJ5UGsiLCJ1cGRhdGVFbXBsb3llZSIsInVwZGF0ZSIsInVwZGF0ZWRFbXBsb3llZSIsImRlbGV0ZUVtcGxveWVlIiwiZGVzdHJveSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsiZW1wbG95ZWVfY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFbXBsb3llZSA9IHJlcXVpcmUoJy4uL01vZGVscy9lbXBsb3llZScpO1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoJy4uL01vZGVscycpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUVtcGxveWVlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lLCBQaG9uZSAsR2VuZGVyLCBBZGRyZXNzLCBSb2xlLFNhbGFyeSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFOYW1lIHx8ICFQaG9uZSB8fCAhR2VuZGVyIHx8ICFBZGRyZXNzIHx8ICFSb2xlIHx8ICFTYWxhcnkgKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGVtcGxveWVlRXhpc3QgPSBhd2FpdCBkYi5FbXBsb3llZS5maW5kT25lKHsgd2hlcmU6IHsgIE5hbWUsIFBob25lICxHZW5kZXIsIEFkZHJlc3MsIFJvbGUsU2FsYXJ5IH0gfSk7XHJcblxyXG4gICAgaWYgKGVtcGxveWVlRXhpc3QpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJOaMOibiB2acOqbiDEkcOjIHThu5NuIHThuqFpIHRyb25nIGRhbmggc8OhY2hcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld0VtcGxveWVlID0gYXdhaXQgZGIuRW1wbG95ZWUuY3JlYXRlKHJlcS5ib2R5KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbmV3RW1wbG95ZWU6IG5ld0VtcGxveWVlXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBnZXRBbGxFbXBsb3llZSA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbGlzdEVtcGxveWVlID0gYXdhaXQgZGIuRW1wbG95ZWUuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGxpc3RFbXBsb3llZTogbGlzdEVtcGxveWVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0RW1wbG95ZWUgPSBhc3luY0hhbmRsZXIoYXN5bmMocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZWlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGVtcGxveWVlID0gYXdhaXQgZGIuRW1wbG95ZWUuZmluZEJ5UGsoZWlkKTtcclxuXHJcbiAgICBpZiAoRW1wbG95ZWUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBFbXBsb3llZTogZW1wbG95ZWVcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmjDom4gdmnDqm4ga2jDtG5nIGPDsyB0cm9uZyBkYW5oIHPDoWNoXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGRhdGVFbXBsb3llZSA9IGFzeW5jSGFuZGxlcihhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBlaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgRW1wbG95ZWUgPSBhd2FpdCBkYi5FbXBsb3llZS5maW5kQnlQayhlaWQpO1xyXG5cclxuICAgIGlmICghRW1wbG95ZWUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJOaMOibiB2acOqbiBraMO0bmcgdOG7k24gdOG6oWlcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGRiLkVtcGxveWVlLnVwZGF0ZShyZXEuYm9keSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHVwZGF0ZWRFbXBsb3llZTogRW1wbG95ZWVcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZUVtcGxveWVlID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBlaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCBkYi5FbXBsb3llZS5maW5kQnlQayhlaWQpO1xyXG5cclxuICAgIC8vIEtp4buDbSB0cmEgeGVtIG5ow6JuIHZpw6puIGPDsyB04buTbiB04bqhaSBoYXkga2jDtG5nXHJcbiAgICBpZiAoIWVtcGxveWVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJOaMOibiB2acOqbiBraMO0bmcgdOG7k24gdOG6oWlcIiBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBlbXBsb3llZS5kZXN0cm95KCk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGDEkMOjIHhvw6EgbmjDom4gdmnDqm4gJHtlbXBsb3llZS5OYW1lfWBcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlRW1wbG95ZWUsXHJcbiAgICBnZXRBbGxFbXBsb3llZSxcclxuICAgIGdldEVtcGxveWVlLFxyXG4gICAgdXBkYXRlRW1wbG95ZWUsXHJcbiAgICBkZWxldGVFbXBsb3llZVxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUM5QyxNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDL0IsTUFBTUUsWUFBWSxHQUFHRixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFckQsTUFBTUcsY0FBYyxHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLEtBQUs7SUFBRUMsTUFBTTtJQUFFQyxPQUFPO0lBQUVDLElBQUk7SUFBQ0M7RUFBTyxDQUFDLEdBQUdQLEdBQUcsQ0FBQ1EsSUFBSTtFQUU5RCxJQUFJLENBQUNOLElBQUksSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQ0MsTUFBTSxJQUFJLENBQUNDLE9BQU8sSUFBSSxDQUFDQyxJQUFJLElBQUksQ0FBQ0MsTUFBTSxFQUFHO0lBQzdELE9BQU9OLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEdBQUcsRUFBRTtJQUNULENBQUMsQ0FBQztFQUNOO0VBQ0EsTUFBTUMsYUFBYSxHQUFHLE1BQU1oQixFQUFFLENBQUNGLFFBQVEsQ0FBQ21CLE9BQU8sQ0FBQztJQUFFQyxLQUFLLEVBQUU7TUFBR2IsSUFBSTtNQUFFQyxLQUFLO01BQUVDLE1BQU07TUFBRUMsT0FBTztNQUFFQyxJQUFJO01BQUNDO0lBQU87RUFBRSxDQUFDLENBQUM7RUFFMUcsSUFBSU0sYUFBYSxFQUFFO0lBQ2YsT0FBT1osR0FBRyxDQUFDUSxNQUFN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","map":{"version":3,"names":["Employee","require","db","asyncHandler","createEmployee","req","res","Name","Phone","Gender","Address","Role","Salary","body","status","json","success","mes","employeeExist","findOne","where","message","newEmployee","create","getAllEmployee","listEmployee","findAll","error","getEmployee","eid","params","employee","findByPk","updateEmployee","update","updatedEmployee","deleteEmployee","destroy","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["employee_controller.js"],"sourcesContent":["const Employee = require('../Models/employee');\r\nconst db = require('../Models');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createEmployee = asyncHandler(async (req, res) => {\r\n    const { Name, Phone ,Gender, Address, Role,Salary } = req.body;\r\n\r\n    if (!Name || !Phone || !Gender || !Address || !Role || !Salary ) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n    const employeeExist = await db.Employee.findOne({ where: {  Name, Phone ,Gender, Address, Role,Salary } });\r\n\r\n    if (employeeExist) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Nhân viên đã tồn tại trong danh sách\"\r\n        });\r\n    }\r\n\r\n    const newEmployee = await db.Employee.create(req.body);\r\n\r\n    return res.status(201).json({\r\n        success: true,\r\n        newEmployee: newEmployee\r\n    });\r\n});\r\n\r\nconst getAllEmployee = asyncHandler(async (req, res) => {\r\n    try {\r\n        const listEmployee = await db.Employee.findAll();\r\n        return res.status(200).json({\r\n            success: true,\r\n            listEmployee: listEmployee\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getEmployee = asyncHandler(async(req, res) => {\r\n    const { eid } = req.params;\r\n\r\n    const employee = await db.Employee.findByPk(eid);\r\n\r\n    if (Employee) {\r\n        return res.status(200).json({\r\n            success: true,\r\n            Employee: employee\r\n        });\r\n    } else {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Nhân viên không có trong danh sách\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateEmployee = asyncHandler(async(req, res) => {\r\n    const { eid } = req.params;\r\n\r\n    const Employee = await db.Employee.findByPk(eid);\r\n\r\n    if (!Employee) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            message: \"Nhân viên không tồn tại\"\r\n        });\r\n    }\r\n\r\n    await db.Employee.update(req.body);\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        updatedEmployee: Employee\r\n    });\r\n});\r\n\r\nconst deleteEmployee = asyncHandler(async (req, res) => {\r\n    const { eid } = req.params;\r\n\r\n    const employee = await db.Employee.findByPk(eid);\r\n\r\n    // Kiểm tra xem nhân viên có tồn tại hay không\r\n    if (!employee) {\r\n        return res.status(404).json({ \r\n            success: false, \r\n            message: \"Nhân viên không tồn tại\" \r\n        });\r\n    }\r\n\r\n    await employee.destroy();\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: `Đã xoá nhân viên ${employee.Name}`\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    createEmployee,\r\n    getAllEmployee,\r\n    getEmployee,\r\n    updateEmployee,\r\n    deleteEmployee\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718498308034},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\order_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createOrder,\n  getAllOrder,\n  getOrder,\n  updateOrder,\n  deleteOrder\n} = require('../controllers/order_controller');\nconst router = express.Router();\nrouter.post('/createOrder', createOrder); //ok\nrouter.get('/getAllOrder', getAllOrder); //ok\nrouter.get('/getOrder/:oid', getOrder); //ok\nrouter.put('/updateOrder/:oid', updateOrder);\nrouter.delete('/deleteOrder/:oid', deleteOrder); //ok\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZU9yZGVyIiwiZ2V0QWxsT3JkZXIiLCJnZXRPcmRlciIsInVwZGF0ZU9yZGVyIiwiZGVsZXRlT3JkZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxSb3V0ZXNcXCIsInNvdXJjZXMiOlsib3JkZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgY3JlYXRlT3JkZXIsIGdldEFsbE9yZGVyLCBnZXRPcmRlciwgdXBkYXRlT3JkZXIsIGRlbGV0ZU9yZGVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9vcmRlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2NyZWF0ZU9yZGVyJywgY3JlYXRlT3JkZXIpOy8vb2tcclxucm91dGVyLmdldCgnL2dldEFsbE9yZGVyJywgZ2V0QWxsT3JkZXIpOy8vb2tcclxucm91dGVyLmdldCgnL2dldE9yZGVyLzpvaWQnLCBnZXRPcmRlcik7Ly9va1xyXG5yb3V0ZXIucHV0KCcvdXBkYXRlT3JkZXIvOm9pZCcsIHVwZGF0ZU9yZGVyKTtcclxucm91dGVyLmRlbGV0ZSgnL2RlbGV0ZU9yZGVyLzpvaWQnLCBkZWxldGVPcmRlcik7Ly9va1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsV0FBVztFQUFFQyxXQUFXO0VBQUVDLFFBQVE7RUFBRUMsV0FBVztFQUFFQztBQUFZLENBQUMsR0FBR0wsT0FBTyxDQUFDLGlDQUFpQyxDQUFDO0FBQ25ILE1BQU1NLE1BQU0sR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsY0FBYyxFQUFFUCxXQUFXLENBQUMsQ0FBQztBQUN6Q0ssTUFBTSxDQUFDRyxHQUFHLENBQUMsY0FBYyxFQUFFUCxXQUFXLENBQUMsQ0FBQztBQUN4Q0ksTUFBTSxDQUFDRyxHQUFHLENBQUMsZ0JBQWdCLEVBQUVOLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDRyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRU4sV0FBVyxDQUFDO0FBQzVDRSxNQUFNLENBQUNLLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRU4sV0FBVyxDQUFDLENBQUM7O0FBRWhETyxNQUFNLENBQUNDLE9BQU8sR0FBR1AsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","createOrder","getAllOrder","getOrder","updateOrder","deleteOrder","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["order_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createOrder, getAllOrder, getOrder, updateOrder, deleteOrder } = require('../controllers/order_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createOrder', createOrder);//ok\r\nrouter.get('/getAllOrder', getAllOrder);//ok\r\nrouter.get('/getOrder/:oid', getOrder);//ok\r\nrouter.put('/updateOrder/:oid', updateOrder);\r\nrouter.delete('/deleteOrder/:oid', deleteOrder);//ok\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,WAAW;EAAEC,WAAW;EAAEC,QAAQ;EAAEC,WAAW;EAAEC;AAAY,CAAC,GAAGL,OAAO,CAAC,iCAAiC,CAAC;AACnH,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,cAAc,EAAEP,WAAW,CAAC,CAAC;AACzCK,MAAM,CAACG,GAAG,CAAC,cAAc,EAAEP,WAAW,CAAC,CAAC;AACxCI,MAAM,CAACG,GAAG,CAAC,gBAAgB,EAAEN,QAAQ,CAAC,CAAC;AACvCG,MAAM,CAACI,GAAG,CAAC,mBAAmB,EAAEN,WAAW,CAAC;AAC5CE,MAAM,CAACK,MAAM,CAAC,mBAAmB,EAAEN,WAAW,CAAC,CAAC;;AAEhDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718498134074},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\order_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const Order = require('../Models/order');\nconst Product = require('../Models/product');\nconst Customer = require('../Models/customer');\nconst db = require('../Models');\nconst OrderDetail = require('../Models/orderdetail');\nconst asyncHandler = require('express-async-handler');\nconst createOrder = asyncHandler(async (req, res) => {\n  const {\n    CustomerID,\n    OrderDate,\n    Status,\n    orderDetails\n  } = req.body;\n\n  // Kiểm tra xem tất cả các dữ liệu cần thiết có được cung cấp hay không\n  if (!CustomerID || !OrderDate || !orderDetails || !Array.isArray(orderDetails)) {\n    return res.status(400).json({\n      error: 'Thiếu các trường bắt buộc'\n    });\n  }\n  const transaction = await db.sequelize.transaction();\n  try {\n    // Tạo đơn hàng\n    const newOrder = await db.Order.create({\n      CustomerID,\n      OrderDate,\n      Status\n    }, {\n      transaction\n    });\n\n    // Tạo các chi tiết đơn hàng\n    const orderDetailPromises = orderDetails.map(async detail => {\n      const {\n        ProductID,\n        Quantity\n      } = detail;\n      if (!ProductID || !Quantity) {\n        throw new Error('Thiếu các trường bắt buộc trong chi tiết đơn hàng');\n      }\n\n      // Tìm sản phẩm\n      const product = await db.Product.findByPk(ProductID, {\n        transaction\n      });\n      if (!product) {\n        throw new Error(`Không tìm thấy sản phẩm với ID: ${ProductID}`);\n      }\n\n      // Kiểm tra tồn kho\n      if (product.Inventory < Quantity) {\n        throw new Error(`Sản phẩm với ID: ${ProductID} không đủ tồn kho`);\n      }\n\n      // Cập nhật tồn kho\n      product.Inventory -= Quantity;\n      await product.save({\n        transaction\n      });\n      return db.OrderDetail.create({\n        OrderID: newOrder.OrderID,\n        ProductID,\n        Quantity\n      }, {\n        transaction\n      });\n    });\n    await Promise.all(orderDetailPromises);\n\n    // Commit giao dịch\n    await transaction.commit();\n    res.status(201).json(newOrder);\n  } catch (error) {\n    // Rollback giao dịch trong trường hợp lỗi\n    await transaction.rollback();\n    // Cập nhật số lượng tồn kho\n\n    console.error(error);\n    res.status(500).json({\n      error: 'Tạo đơn hàng thất bại'\n    });\n  }\n});\nconst getAllOrder = asyncHandler(async (req, res) => {\n  try {\n    const orders = await db.Order.findAll({\n      include: [{\n        model: db.OrderDetail,\n        as: 'OrderDetail',\n        // Sử dụng alias 'OrderDetail' cho mô hình OrderDetail\n        include: [{\n          model: db.Product,\n          as: 'Product'\n        } // Sử dụng alias 'Product' cho mô hình Product\n        ]\n      }, {\n        model: db.Customer,\n        as: 'Customer'\n      }]\n    });\n    res.status(200).json(orders);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst getOrder = asyncHandler(async (req, res) => {\n  const {\n    oid\n  } = req.params;\n  try {\n    const order = await db.Order.findByPk(oid, {\n      include: [{\n        model: db.OrderDetail,\n        as: 'OrderDetail'\n      }, {\n        model: db.Customer,\n        as: 'Customer'\n      }]\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy đơn hàng'\n      });\n    }\n    res.status(200).json(order);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst updateOrder = asyncHandler(async (req, res) => {\n  const {\n    oid\n  } = req.params;\n  const {\n    orderData,\n    orderDetailData\n  } = req.body;\n  const t = await db.sequelize.transaction();\n  try {\n    const order = await db.Order.findByPk(oid, {\n      transaction: t\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy sản phẩm'\n      });\n    }\n    await db.order.update(orderData, {\n      transaction: t\n    });\n\n    // Xóa các mục trong đơn hàng cũ\n    await db.OrderItem.destroy({\n      where: {\n        OrderID: id\n      },\n      transaction: t\n    });\n\n    // Tạo các mục trong đơn hàng mới và cập nhật số lượng tồn kho\n    for (const item of orderDetailData) {\n      const product = await db.Product.findByPk(item.ProductID, {\n        transaction: t\n      });\n      if (!product) {\n        throw new Error(`Không tìm thấy sản phẩm`);\n      }\n      if (product.Quantity < item.Quantity) {\n        throw new Error(`Sản phẩm không đủ số lượng`);\n      }\n\n      // Tạo OrderItem\n      await db.OrderItem.create({\n        OrderID: order.OrderID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity\n      }, {\n        transaction: t\n      });\n\n      // Cập nhật số lượng tồn kho\n      product.Quantity -= item.Quantity;\n      await db.product.save({\n        transaction: t\n      });\n    }\n    await t.commit();\n    res.status(200).json(order);\n  } catch (error) {\n    await t.rollback();\n    res.status(400).json({\n      error: error.message\n    });\n  }\n});\nconst deleteOrder = asyncHandler(async (req, res) => {\n  const {\n    oid\n  } = req.params;\n  const t = await db.sequelize.transaction();\n  try {\n    const order = await db.Order.findByPk(oid, {\n      transaction: t\n    });\n    if (!order) {\n      return res.status(404).json({\n        error: 'Không tìm thấy đơn hàng'\n      });\n    }\n\n    // Xóa các mục trong đơn hàng\n    await db.OrderDetail.destroy({\n      where: {\n        OrderID: oid\n      },\n      transaction: t\n    });\n\n    // Xóa đơn hàng\n    await db.Order.destroy({\n      where: {\n        OrderID: oid\n      },\n      transaction: t\n    });\n    await t.commit();\n    res.status(200).json({\n      message: 'Xóa đơn hàng thành công'\n    });\n  } catch (error) {\n    await t.rollback();\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nmodule.exports = {\n  createOrder,\n  getAllOrder,\n  getOrder,\n  updateOrder,\n  deleteOrder\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmRlciIsInJlcXVpcmUiLCJQcm9kdWN0IiwiQ3VzdG9tZXIiLCJkYiIsIk9yZGVyRGV0YWlsIiwiYXN5bmNIYW5kbGVyIiwiY3JlYXRlT3JkZXIiLCJyZXEiLCJyZXMiLCJDdXN0b21lcklEIiwiT3JkZXJEYXRlIiwiU3RhdHVzIiwib3JkZXJEZXRhaWxzIiwiYm9keSIsIkFycmF5IiwiaXNBcnJheSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRyYW5zYWN0aW9uIiwic2VxdWVsaXplIiwibmV3T3JkZXIiLCJjcmVhdGUiLCJvcmRlckRldGFpbFByb21pc2VzIiwibWFwIiwiZGV0YWlsIiwiUHJvZHVjdElEIiwiUXVhbnRpdHkiLCJFcnJvciIsInByb2R1Y3QiLCJmaW5kQnlQayIsIkludmVudG9yeSIsInNhdmUiLCJPcmRlcklEIiwiUHJvbWlzZSIsImFsbCIsImNvbW1pdCIsInJvbGxiYWNrIiwiY29uc29sZSIsImdldEFsbE9yZGVyIiwib3JkZXJzIiwiZmluZEFsbCIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwibWVzc2FnZSIsImdldE9yZGVyIiwib2lkIiwicGFyYW1zIiwib3JkZXIiLCJ1cGRhdGVPcmRlciIsIm9yZGVyRGF0YSIsIm9yZGVyRGV0YWlsRGF0YSIsInQiLCJ1cGRhdGUiLCJPcmRlckl0ZW0iLCJkZXN0cm95Iiwid2hlcmUiLCJpZCIsIml0ZW0iLCJkZWxldGVPcmRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsib3JkZXJfY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBPcmRlciA9IHJlcXVpcmUoJy4uL01vZGVscy9vcmRlcicpO1xyXG5jb25zdCBQcm9kdWN0ID0gcmVxdWlyZSgnLi4vTW9kZWxzL3Byb2R1Y3QnKTtcclxuY29uc3QgQ3VzdG9tZXIgPSByZXF1aXJlKCcuLi9Nb2RlbHMvY3VzdG9tZXInKTtcclxuY29uc3QgZGIgPSByZXF1aXJlKCcuLi9Nb2RlbHMnKTtcclxuY29uc3QgT3JkZXJEZXRhaWwgPSByZXF1aXJlKCcuLi9Nb2RlbHMvb3JkZXJkZXRhaWwnKTtcclxuY29uc3QgYXN5bmNIYW5kbGVyID0gcmVxdWlyZSgnZXhwcmVzcy1hc3luYy1oYW5kbGVyJyk7XHJcblxyXG5jb25zdCBjcmVhdGVPcmRlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgQ3VzdG9tZXJJRCwgT3JkZXJEYXRlLCBTdGF0dXMsIG9yZGVyRGV0YWlscyB9ID0gcmVxLmJvZHk7XHJcbiAgXHJcbiAgICAvLyBLaeG7g20gdHJhIHhlbSB04bqldCBj4bqjIGPDoWMgZOG7ryBsaeG7h3UgY+G6p24gdGhp4bq/dCBjw7MgxJHGsOG7o2MgY3VuZyBj4bqlcCBoYXkga2jDtG5nXHJcbiAgICBpZiAoIUN1c3RvbWVySUQgfHwgIU9yZGVyRGF0ZSB8fCAhb3JkZXJEZXRhaWxzIHx8ICFBcnJheS5pc0FycmF5KG9yZGVyRGV0YWlscykpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUaGnhur91IGPDoWMgdHLGsOG7nW5nIGLhuq90IGJ14buZYycgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGRiLnNlcXVlbGl6ZS50cmFuc2FjdGlvbigpO1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVOG6oW8gxJHGoW4gaMOgbmdcclxuICAgICAgY29uc3QgbmV3T3JkZXIgPSBhd2FpdCBkYi5PcmRlci5jcmVhdGUoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgQ3VzdG9tZXJJRCxcclxuICAgICAgICAgIE9yZGVyRGF0ZSxcclxuICAgICAgICAgIFN0YXR1c1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyB0cmFuc2FjdGlvbiB9XHJcbiAgICAgICk7XHJcbiAgXHJcbiAgICAgIC8vIFThuqFvIGPDoWMgY2hpIHRp4bq/dCDEkcahbiBow6BuZ1xyXG4gICAgICBjb25zdCBvcmRlckRldGFpbFByb21pc2VzID0gb3JkZXJEZXRhaWxzLm1hcChhc3luYyAoZGV0YWlsKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBQcm9kdWN0SUQsIFF1YW50aXR5IH0gPSBkZXRhaWw7XHJcbiAgXHJcbiAgICAgICAgaWYgKCFQcm9kdWN0SUQgfHwgIVF1YW50aXR5KSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaeG6v3UgY8OhYyB0csaw4budbmcgYuG6r3QgYnXhu5ljIHRyb25nIGNoaSB0aeG6v3QgxJHGoW4gaMOgbmcnKTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gVMOsbSBz4bqjbiBwaOG6qW1cclxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZGIuUHJvZHVjdC5maW5kQnlQayhQcm9kdWN0SUQsIHsgdHJhbnNhY3Rpb24gfSk7XHJcbiAgXHJcbiAgICAgICAgaWYgKCFwcm9kdWN0KSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtow7RuZyB0w6xtIHRo4bqleSBz4bqjbiBwaOG6qW0gduG7m2kgSUQ6ICR7UHJvZHVjdElEfWApO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICAvLyBLaeG7g20gdHJhIHThu5NuIGtob1xyXG4gICAgICAgIGlmIChwcm9kdWN0LkludmVudG9yeSA8IFF1YW50aXR5KSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFPhuqNuIHBo4bqpbSB24bubaSBJRDogJHtQcm9kdWN0SUR9IGtow7RuZyDEkeG7pyB04buTbiBraG9gKTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gQ+G6rXAgbmjhuq10IHThu5NuIGtob1xyXG4gICAgICAgIHByb2R1Y3QuSW52ZW50b3J5IC09IFF1YW50aXR5O1xyXG4gICAgICAgIGF3YWl0IHByb2R1Y3Quc2F2ZSh7IHRyYW5zYWN0aW9uIH0pO1xyXG4gIFxyXG4gICAgICAgIHJldHVybiBkYi5PcmRlckRldGFpbC5jcmVhdGUoXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIE9yZGVySUQ6IG5ld09yZGVyLk9yZGVySUQsXHJcbiAgICAgICAgICAgIFByb2R1Y3RJRCxcclxuICAgICAgICAgICAgUXVhbnRpdHlcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHRyYW5zYWN0aW9uIH1cclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKG9yZGVyRGV0YWlsUHJvbWlzZXMpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ29tbWl0IGdpYW8gZOG7i2NoXHJcbiAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLmNvbW1pdCgpO1xyXG4gIFxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbihuZXdPcmRlcik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBSb2xsYmFjayBnaWFvIGThu4tjaCB0cm9uZyB0csaw4budbmcgaOG7o3AgbOG7l2lcclxuICAgICAgYXdhaXQgdHJhbnNhY3Rpb24ucm9sbGJhY2soKTtcclxuICAgICAgLy8gQ+G6rXAgbmjhuq10IHPhu5EgbMaw4bujbmcgdOG7k24ga2hvXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1ThuqFvIMSRxqFuIGjDoG5nIHRo4bqldCBi4bqhaScgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0QWxsT3JkZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGRiLk9yZGVyLmZpbmRBbGwoe1xyXG4gICAgICBpbmNsdWRlOiBbXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIG1vZGVsOiBkYi5PcmRlckRldGFpbCxcclxuICAgICAgICAgIGFzOiAnT3JkZXJEZXRhaWwnLCAvLyBT4butIGThu6VuZyBhbGlhcyAnT3JkZXJEZXRhaWwnIGNobyBtw7QgaMOsbmggT3JkZXJEZXRhaWxcclxuICAgICAgICAgIGluY2x1ZGU6IFtcclxuICAgICAgICAgICAgeyBtb2RlbDogZGIuUHJvZHVjdCwgYXM6ICdQcm9kdWN0JyB9IC8vIFPhu60gZOG7pW5nIGFsaWFzICdQcm9kdWN0JyBjaG8gbcO0IGjDrG5oIFByb2R1Y3RcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgbW9kZWw6IGRiLkN1c3RvbWVyLCBhczogJ0N1c3RvbWVyJyB9XHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ob3JkZXJzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0T3JkZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IG9pZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgZGIuT3JkZXIuZmluZEJ5UGsob2lkLCB7XHJcbiAgICAgICAgaW5jbHVkZTogWyB7bW9kZWw6IGRiLk9yZGVyRGV0YWlsICwgYXM6ICdPcmRlckRldGFpbCd9LHsgbW9kZWw6IGRiLkN1c3RvbWVyLCBhczogJ0N1c3RvbWVyJyB9XVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCFvcmRlcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnS2jDtG5nIHTDrG0gdGjhuqV5IMSRxqFuIGjDoG5nJyB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihvcmRlcik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVwZGF0ZU9yZGVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBvaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IG9yZGVyRGF0YSwgb3JkZXJEZXRhaWxEYXRhIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHQgPSBhd2FpdCBkYi5zZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcclxuICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgZGIuT3JkZXIuZmluZEJ5UGsob2lkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltJyB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBhd2FpdCBkYi5vcmRlci51cGRhdGUob3JkZXJEYXRhLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gIFxyXG4gICAgICAvLyBYw7NhIGPDoWMgbeG7pWMgdHJvbmcgxJHGoW4gaMOgbmcgY8WpXHJcbiAgICAgIGF3YWl0IGRiLk9yZGVySXRlbS5kZXN0cm95KHtcclxuICAgICAgICB3aGVyZTogeyBPcmRlcklEOiBpZCB9LFxyXG4gICAgICAgIHRyYW5zYWN0aW9uOiB0XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICAvLyBU4bqhbyBjw6FjIG3hu6VjIHRyb25nIMSRxqFuIGjDoG5nIG3hu5tpIHbDoCBj4bqtcCBuaOG6rXQgc+G7kSBsxrDhu6NuZyB04buTbiBraG9cclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyRGV0YWlsRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYi5Qcm9kdWN0LmZpbmRCeVBrKGl0ZW0uUHJvZHVjdElELCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLaMO0bmcgdMOsbSB0aOG6pXkgc+G6o24gcGjhuqltYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9kdWN0LlF1YW50aXR5IDwgaXRlbS5RdWFudGl0eSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBT4bqjbiBwaOG6qW0ga2jDtG5nIMSR4bunIHPhu5EgbMaw4bujbmdgKTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gVOG6oW8gT3JkZXJJdGVtXHJcbiAgICAgICAgYXdhaXQgZGIuT3JkZXJJdGVtLmNyZWF0ZSh7XHJcbiAgICAgICAgICBPcmRlcklEOiBvcmRlci5PcmRlcklELFxyXG4gICAgICAgICAgUHJvZHVjdElEOiBpdGVtLlByb2R1Y3RJRCxcclxuICAgICAgICAgIFF1YW50aXR5OiBpdGVtLlF1YW50aXR5LFxyXG4gICAgICAgIH0sIHsgdHJhbnNhY3Rpb246IHQgfSk7XHJcbiAgXHJcbiAgICAgICAgLy8gQ+G6rXAgbmjhuq10IHPhu5EgbMaw4bujbmcgdOG7k24ga2hvXHJcbiAgICAgICAgcHJvZHVjdC5RdWFudGl0eSAtPSBpdGVtLlF1YW50aXR5O1xyXG4gICAgICAgIGF3YWl0IGRiLnByb2R1Y3Quc2F2ZSh7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG9yZGVyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGF3YWl0IHQucm9sbGJhY2soKTtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVPcmRlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG9pZCB9ID0gcmVxLnBhcmFtcztcclxuICBjb25zdCB0ID0gYXdhaXQgZGIuc2VxdWVsaXplLnRyYW5zYWN0aW9uKCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgZGIuT3JkZXIuZmluZEJ5UGsob2lkLCB7IHRyYW5zYWN0aW9uOiB0IH0pO1xyXG4gICAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0tow7RuZyB0w6xtIHRo4bqleSDEkcahbiBow6BuZycgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFjDs2EgY8OhYyBt4bulYyB0cm9uZyDEkcahbiBow6BuZ1xyXG4gICAgICBhd2FpdCBkYi5PcmRlckRldGFpbC5kZXN0cm95KHtcclxuICAgICAgICAgIHdoZXJlOiB7IE9yZGVySUQ6IG9pZCB9LFxyXG4gICAgICAgICAgdHJhbnNhY3Rpb246IHRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBYw7NhIMSRxqFuIGjDoG5nXHJcbiAgICAgIGF3YWl0IGRiLk9yZGVyLmRlc3Ryb3koe1xyXG4gICAgICAgICAgd2hlcmU6IHsgT3JkZXJJRDogb2lkIH0sXHJcbiAgICAgICAgICB0cmFuc2FjdGlvbjogdFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IHQuY29tbWl0KCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1jDs2EgxJHGoW4gaMOgbmcgdGjDoG5oIGPDtG5nJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBhd2FpdCB0LnJvbGxiYWNrKCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59KTtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBjcmVhdGVPcmRlcixcclxuICAgIGdldEFsbE9yZGVyLFxyXG4gICAgZ2V0T3JkZXIsXHJcbiAgICB1cGRhdGVPcmRlcixcclxuICAgIGRlbGV0ZU9yZGVyXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDeEMsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDNUMsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDOUMsTUFBTUcsRUFBRSxHQUFHSCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQy9CLE1BQU1JLFdBQVcsR0FBR0osT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3BELE1BQU1LLFlBQVksR0FBR0wsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1NLFdBQVcsR0FBR0QsWUFBWSxDQUFDLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2pELE1BQU07SUFBRUMsVUFBVTtJQUFFQyxTQUFTO0lBQUVDLE1BQU07SUFBRUM7RUFBYSxDQUFDLEdBQUdMLEdBQUcsQ0FBQ00sSUFBSTs7RUFFaEU7RUFDQSxJQUFJLENBQUNKLFVBQVUsSUFBSSxDQUFDQyxTQUFTLElBQUksQ0FBQ0UsWUFBWSxJQUFJLENBQUNFLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSCxZQUFZLENBQUMsRUFBRTtJQUM5RSxPQUFPSixHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUE0QixDQUFDLENBQUM7RUFDckU7RUFFQSxNQUFNQyxXQUFXLEdBQUcsTUFBTWhCLEVBQUUsQ0FBQ2lCLFNBQVMsQ0FBQ0QsV0FBVyxDQUFDLENBQUM7RUFFcEQsSUFBSTtJQUNGO0lBQ0EsTUFBTUUsUUFBUSxHQUFHLE1B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","map":{"version":3,"names":["Order","require","Product","Customer","db","OrderDetail","asyncHandler","createOrder","req","res","CustomerID","OrderDate","Status","orderDetails","body","Array","isArray","status","json","error","transaction","sequelize","newOrder","create","orderDetailPromises","map","detail","ProductID","Quantity","Error","product","findByPk","Inventory","save","OrderID","Promise","all","commit","rollback","console","getAllOrder","orders","findAll","include","model","as","message","getOrder","oid","params","order","updateOrder","orderData","orderDetailData","t","update","OrderItem","destroy","where","id","item","deleteOrder","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["order_controller.js"],"sourcesContent":["const Order = require('../Models/order');\r\nconst Product = require('../Models/product');\r\nconst Customer = require('../Models/customer');\r\nconst db = require('../Models');\r\nconst OrderDetail = require('../Models/orderdetail');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createOrder = asyncHandler(async (req, res) => {\r\n    const { CustomerID, OrderDate, Status, orderDetails } = req.body;\r\n  \r\n    // Kiểm tra xem tất cả các dữ liệu cần thiết có được cung cấp hay không\r\n    if (!CustomerID || !OrderDate || !orderDetails || !Array.isArray(orderDetails)) {\r\n      return res.status(400).json({ error: 'Thiếu các trường bắt buộc' });\r\n    }\r\n  \r\n    const transaction = await db.sequelize.transaction();\r\n  \r\n    try {\r\n      // Tạo đơn hàng\r\n      const newOrder = await db.Order.create(\r\n        {\r\n          CustomerID,\r\n          OrderDate,\r\n          Status\r\n        },\r\n        { transaction }\r\n      );\r\n  \r\n      // Tạo các chi tiết đơn hàng\r\n      const orderDetailPromises = orderDetails.map(async (detail) => {\r\n        const { ProductID, Quantity } = detail;\r\n  \r\n        if (!ProductID || !Quantity) {\r\n          throw new Error('Thiếu các trường bắt buộc trong chi tiết đơn hàng');\r\n        }\r\n  \r\n        // Tìm sản phẩm\r\n        const product = await db.Product.findByPk(ProductID, { transaction });\r\n  \r\n        if (!product) {\r\n          throw new Error(`Không tìm thấy sản phẩm với ID: ${ProductID}`);\r\n        }\r\n  \r\n        // Kiểm tra tồn kho\r\n        if (product.Inventory < Quantity) {\r\n          throw new Error(`Sản phẩm với ID: ${ProductID} không đủ tồn kho`);\r\n        }\r\n  \r\n        // Cập nhật tồn kho\r\n        product.Inventory -= Quantity;\r\n        await product.save({ transaction });\r\n  \r\n        return db.OrderDetail.create(\r\n          {\r\n            OrderID: newOrder.OrderID,\r\n            ProductID,\r\n            Quantity\r\n          },\r\n          { transaction }\r\n        );\r\n      });\r\n      \r\n      await Promise.all(orderDetailPromises);\r\n      \r\n      // Commit giao dịch\r\n      await transaction.commit();\r\n  \r\n      res.status(201).json(newOrder);\r\n    } catch (error) {\r\n      // Rollback giao dịch trong trường hợp lỗi\r\n      await transaction.rollback();\r\n      // Cập nhật số lượng tồn kho\r\n      \r\n      console.error(error);\r\n      res.status(500).json({ error: 'Tạo đơn hàng thất bại' });\r\n    }\r\n});\r\n\r\nconst getAllOrder = asyncHandler(async (req, res) => {\r\n  try {\r\n    const orders = await db.Order.findAll({\r\n      include: [\r\n        { \r\n          model: db.OrderDetail,\r\n          as: 'OrderDetail', // Sử dụng alias 'OrderDetail' cho mô hình OrderDetail\r\n          include: [\r\n            { model: db.Product, as: 'Product' } // Sử dụng alias 'Product' cho mô hình Product\r\n          ]\r\n        },\r\n        { model: db.Customer, as: 'Customer' }\r\n      ]\r\n    });\r\n    res.status(200).json(orders);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nconst getOrder = asyncHandler(async (req, res) => {\r\n    const { oid } = req.params;\r\n    try {\r\n      const order = await db.Order.findByPk(oid, {\r\n        include: [ {model: db.OrderDetail , as: 'OrderDetail'},{ model: db.Customer, as: 'Customer' }]\r\n      });\r\n      if (!order) {\r\n        return res.status(404).json({ error: 'Không tìm thấy đơn hàng' });\r\n      }\r\n      res.status(200).json(order);\r\n    } catch (error) {\r\n      res.status(500).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst updateOrder = asyncHandler(async (req, res) => {\r\n    const { oid } = req.params;\r\n    const { orderData, orderDetailData } = req.body;\r\n    const t = await db.sequelize.transaction();\r\n  \r\n    try {\r\n      const order = await db.Order.findByPk(oid, { transaction: t });\r\n      if (!order) {\r\n        return res.status(404).json({ error: 'Không tìm thấy sản phẩm' });\r\n      }\r\n  \r\n      await db.order.update(orderData, { transaction: t });\r\n  \r\n      // Xóa các mục trong đơn hàng cũ\r\n      await db.OrderItem.destroy({\r\n        where: { OrderID: id },\r\n        transaction: t\r\n      });\r\n  \r\n      // Tạo các mục trong đơn hàng mới và cập nhật số lượng tồn kho\r\n      for (const item of orderDetailData) {\r\n        const product = await db.Product.findByPk(item.ProductID, { transaction: t });\r\n        if (!product) {\r\n          throw new Error(`Không tìm thấy sản phẩm`);\r\n        }\r\n        if (product.Quantity < item.Quantity) {\r\n          throw new Error(`Sản phẩm không đủ số lượng`);\r\n        }\r\n  \r\n        // Tạo OrderItem\r\n        await db.OrderItem.create({\r\n          OrderID: order.OrderID,\r\n          ProductID: item.ProductID,\r\n          Quantity: item.Quantity,\r\n        }, { transaction: t });\r\n  \r\n        // Cập nhật số lượng tồn kho\r\n        product.Quantity -= item.Quantity;\r\n        await db.product.save({ transaction: t });\r\n      }\r\n  \r\n      await t.commit();\r\n      res.status(200).json(order);\r\n    } catch (error) {\r\n      await t.rollback();\r\n      res.status(400).json({ error: error.message });\r\n    }\r\n});\r\n\r\nconst deleteOrder = asyncHandler(async (req, res) => {\r\n  const { oid } = req.params;\r\n  const t = await db.sequelize.transaction();\r\n\r\n  try {\r\n      const order = await db.Order.findByPk(oid, { transaction: t });\r\n      if (!order) {\r\n          return res.status(404).json({ error: 'Không tìm thấy đơn hàng' });\r\n      }\r\n\r\n      // Xóa các mục trong đơn hàng\r\n      await db.OrderDetail.destroy({\r\n          where: { OrderID: oid },\r\n          transaction: t\r\n      });\r\n\r\n      // Xóa đơn hàng\r\n      await db.Order.destroy({\r\n          where: { OrderID: oid },\r\n          transaction: t\r\n      });\r\n\r\n      await t.commit();\r\n      res.status(200).json({ message: 'Xóa đơn hàng thành công' });\r\n  } catch (error) {\r\n      await t.rollback();\r\n      res.status(500).json({ error: error.message });\r\n  }\r\n});\r\nmodule.exports = {\r\n    createOrder,\r\n    getAllOrder,\r\n    getOrder,\r\n    updateOrder,\r\n    deleteOrder\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718498190471},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\user_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst usercontroller = require('../controllers/user_controller');\nconst router = express.Router();\nrouter.post('/addUser', usercontroller.addUserByAdmin); //ok\nrouter.post('/login', usercontroller.login); //ok\nrouter.get('/logout/:uid', usercontroller.logout); //ok\nrouter.get('/getallUser', usercontroller.getAlluser); //ok\nrouter.get('/getUser/:uid', usercontroller.getUsers); //ok\nrouter.delete('/deleteUser/:uid', usercontroller.deleteUser); //ok\nrouter.put('/updateUser/:uid', usercontroller.updateUser); //chay duoc nhung khong bt dungf\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJjb250cm9sbGVyIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImFkZFVzZXJCeUFkbWluIiwibG9naW4iLCJnZXQiLCJsb2dvdXQiLCJnZXRBbGx1c2VyIiwiZ2V0VXNlcnMiLCJkZWxldGUiLCJkZWxldGVVc2VyIiwicHV0IiwidXBkYXRlVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcUm91dGVzXFwiLCJzb3VyY2VzIjpbInVzZXJfcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHVzZXJjb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdXNlcl9jb250cm9sbGVyJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FkZFVzZXInLHVzZXJjb250cm9sbGVyLmFkZFVzZXJCeUFkbWluKTsvL29rXHJcbnJvdXRlci5wb3N0KCcvbG9naW4nLHVzZXJjb250cm9sbGVyLmxvZ2luKTsvL29rXHJcbnJvdXRlci5nZXQoJy9sb2dvdXQvOnVpZCcsdXNlcmNvbnRyb2xsZXIubG9nb3V0KTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRhbGxVc2VyJyx1c2VyY29udHJvbGxlci5nZXRBbGx1c2VyKTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRVc2VyLzp1aWQnLHVzZXJjb250cm9sbGVyLmdldFVzZXJzKTsvL29rXHJcbnJvdXRlci5kZWxldGUoJy9kZWxldGVVc2VyLzp1aWQnLHVzZXJjb250cm9sbGVyLmRlbGV0ZVVzZXIpOy8vb2tcclxucm91dGVyLnB1dCgnL3VwZGF0ZVVzZXIvOnVpZCcsdXNlcmNvbnRyb2xsZXIudXBkYXRlVXNlcik7Ly9jaGF5IGR1b2Mgbmh1bmcga2hvbmcgYnQgZHVuZ2ZcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLGNBQWMsR0FBR0QsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ2hFLE1BQU1FLE1BQU0sR0FBR0gsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQztBQUUvQkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsVUFBVSxFQUFDSCxjQUFjLENBQUNJLGNBQWMsQ0FBQyxDQUFDO0FBQ3RESCxNQUFNLENBQUNFLElBQUksQ0FBQyxRQUFRLEVBQUNILGNBQWMsQ0FBQ0ssS0FBSyxDQUFDLENBQUM7QUFDM0NKLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGNBQWMsRUFBQ04sY0FBYyxDQUFDTyxNQUFNLENBQUMsQ0FBQztBQUNqRE4sTUFBTSxDQUFDSyxHQUFHLENBQUMsYUFBYSxFQUFDTixjQUFjLENBQUNRLFVBQVUsQ0FBQyxDQUFDO0FBQ3BEUCxNQUFNLENBQUNLLEdBQUcsQ0FBQyxlQUFlLEVBQUNOLGNBQWMsQ0FBQ1MsUUFBUSxDQUFDLENBQUM7QUFDcERSLE1BQU0sQ0FBQ1MsTUFBTSxDQUFDLGtCQUFrQixFQUFDVixjQUFjLENBQUNXLFVBQVUsQ0FBQyxDQUFDO0FBQzVEVixNQUFNLENBQUNXLEdBQUcsQ0FBQyxrQkFBa0IsRUFBQ1osY0FBYyxDQUFDYSxVQUFVLENBQUMsQ0FBQzs7QUFFekRDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHZCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","usercontroller","router","Router","post","addUserByAdmin","login","get","logout","getAlluser","getUsers","delete","deleteUser","put","updateUser","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["user_routes.js"],"sourcesContent":["const express = require('express');\r\nconst usercontroller = require('../controllers/user_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/addUser',usercontroller.addUserByAdmin);//ok\r\nrouter.post('/login',usercontroller.login);//ok\r\nrouter.get('/logout/:uid',usercontroller.logout);//ok\r\nrouter.get('/getallUser',usercontroller.getAlluser);//ok\r\nrouter.get('/getUser/:uid',usercontroller.getUsers);//ok\r\nrouter.delete('/deleteUser/:uid',usercontroller.deleteUser);//ok\r\nrouter.put('/updateUser/:uid',usercontroller.updateUser);//chay duoc nhung khong bt dungf\r\n\r\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,cAAc,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAChE,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,UAAU,EAACH,cAAc,CAACI,cAAc,CAAC,CAAC;AACtDH,MAAM,CAACE,IAAI,CAAC,QAAQ,EAACH,cAAc,CAACK,KAAK,CAAC,CAAC;AAC3CJ,MAAM,CAACK,GAAG,CAAC,cAAc,EAACN,cAAc,CAACO,MAAM,CAAC,CAAC;AACjDN,MAAM,CAACK,GAAG,CAAC,aAAa,EAACN,cAAc,CAACQ,UAAU,CAAC,CAAC;AACpDP,MAAM,CAACK,GAAG,CAAC,eAAe,EAACN,cAAc,CAACS,QAAQ,CAAC,CAAC;AACpDR,MAAM,CAACS,MAAM,CAAC,kBAAkB,EAACV,cAAc,CAACW,UAAU,CAAC,CAAC;AAC5DV,MAAM,CAACW,GAAG,CAAC,kBAAkB,EAACZ,cAAc,CAACa,UAAU,CAAC,CAAC;;AAEzDC,MAAM,CAACC,OAAO,GAAGd,MAAM","ignoreList":[]}},"mtime":1718454080605},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\user_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const db = require('../Models');\nconst User = require('../Models/user');\nconst Order = require('../Models/order');\nconst jwt = require('jsonwebtoken');\nconst asyncHandler = require('express-async-handler');\nconst {\n  generateAccessToken,\n  generateRefreshToken\n} = require('../middleware/jwt');\nconst addUserByAdmin = asyncHandler(async (req, res) => {\n  const {\n    Name,\n    Phone,\n    Password,\n    Role\n  } = req.body;\n  if (!Name || !Phone || !Password || !Role) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  //dont check users\n  const newUser = await db.User.create({\n    Name,\n    Phone,\n    Password,\n    Role\n  });\n  return res.status(200).json({\n    success: true,\n    mes: 'Thêm tài khoản thành công',\n    user: newUser\n  });\n});\nconst login = asyncHandler(async (req, res) => {\n  const {\n    Phone,\n    Password\n  } = req.body;\n  if (!Phone || !Password) {\n    return res.status(400).json({\n      success: false,\n      mes: \"Vui lòng nhập đầy đủ thông tin\"\n    });\n  }\n  const user = await db.User.findOne({\n    where: {\n      Phone: Phone\n    }\n  });\n  if (user && (await user.isCorrectPassword(Password))) {\n    const {\n      Password,\n      Role,\n      ...userData\n    } = user.toJSON();\n\n    // Create access token\n    const accessToken = generateAccessToken(user.id, Role);\n    // Create refresh token\n    const newRefreshToken = generateRefreshToken(user.id);\n\n    // Save refresh token in db\n    await user.update({\n      refreshToken: newRefreshToken\n    });\n\n    // Save refresh token in cookie\n    res.cookie('refreshToken', newRefreshToken, {\n      httpOnly: true,\n      maxAge: 7 * 24 * 60 * 60 * 1000\n    });\n    // Save access token in cookie\n    res.cookie('accessToken', accessToken, {\n      httpOnly: true,\n      maxAge: 30 * 60 * 1000\n    }); // 30 phút\n\n    return res.status(200).json({\n      success: true,\n      accessToken,\n      userData\n    });\n  } else {\n    return res.status(401).json({\n      success: false,\n      mes: \"Thông tin đăng nhập không chính xác\"\n    });\n  }\n});\nconst logout = asyncHandler(async (req, res) => {\n  const cookie = req.cookies;\n  if (!cookie || !cookie.refreshToken) {\n    return res.status(500).json({\n      success: false,\n      mes: \"Không có refresh token trong cookies\"\n    });\n  }\n  await db.User.findOneAndUpdate({\n    refreshToken: cookie.refreshToken\n  }, {\n    $unset: {\n      refreshToken: \"\"\n    }\n  });\n  res.clearCookie('refreshToken', {\n    httpOnly: true,\n    secure: true\n  });\n  return res.status(200).json({\n    success: true,\n    mes: 'Đăng xuất thành công'\n  });\n});\nconst getUsers = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    throw new Error(\"Đã có lỗi xảy ra, vui lòng thử lại\");\n  }\n  const user = await db.User.findByPk(uid, {\n    attributes: {\n      exclude: ['Password', 'refreshToken']\n    }\n  });\n  if (!user) {\n    return res.status(404).json({\n      success: false,\n      mes: \"Người dùng không được tìm thấy\"\n    });\n  }\n  return res.status(200).json({\n    success: true,\n    user: user\n  });\n});\n\n//lấy tất cả người dùng\nconst getAlluser = asyncHandler(async (req, res) => {\n  const response = await db.User.findAll({\n    attributes: {\n      exclude: ['Password', 'Role']\n    } // Loại bỏ trường 'Password'\n  });\n  return res.status(200).json({\n    success: response.length > 0,\n    users: response\n  });\n});\nconst deleteUser = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    return res.status(400).json({\n      success: false,\n      message: \"Thiếu thông tin người dùng cần xoá\"\n    });\n  }\n  try {\n    // Kiểm tra người dùng có tồn tại không\n    const user = await db.User.findByPk(uid);\n    if (!user) {\n      return res.status(404).json({\n        success: false,\n        message: \"Người dùng không tồn tại\"\n      });\n    }\n\n    // Xoá người dùng\n    await db.User.destroy({\n      where: {\n        id: uid\n      }\n    });\n    return res.status(200).json({\n      success: true,\n      message: `Người dùng với ID ${uid} đã được xoá`\n    });\n  } catch (error) {\n    // Xử lý lỗi\n    console.error(\"Lỗi khi xoá người dùng:\", error.message);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\n    });\n  }\n});\nconst updateUser = asyncHandler(async (req, res) => {\n  const {\n    uid\n  } = req.params;\n  if (!uid) {\n    return res.status(400).json({\n      success: false,\n      message: \"Thiếu thông tin người dùng cần cập nhật\"\n    });\n  }\n  try {\n    const [updatedRowsCount, updatedUsers] = await db.User.update(req.body, {\n      where: {\n        id: uid\n      },\n      returning: true // Trả về các bản ghi đã được cập nhật\n    });\n    if (updatedRowsCount === 0 || !updatedUsers || updatedUsers.length === 0) {\n      return res.status(404).json({\n        success: false,\n        message: \"Người dùng không được tìm thấy hoặc không thể cập nhật\"\n      });\n    }\n    const updatedUser = updatedUsers[0].toJSON(); // Chuyển đổi thành đối tượng JSON\n\n    // Loại bỏ các trường nhạy cảm từ phản hồi\n    delete updatedUser.Password;\n    delete updatedUser.refreshToken;\n    return res.status(200).json({\n      success: true,\n      message: \"Cập nhật thành công\",\n      user: updatedUser\n    });\n  } catch (error) {\n    console.error(\"Lỗi khi cập nhật người dùng:\", error.message);\n    return res.status(500).json({\n      success: false,\n      message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\n    });\n  }\n});\nmodule.exports = {\n  addUserByAdmin,\n  login,\n  logout,\n  getAlluser,\n  getUsers,\n  deleteUser,\n  updateUser\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJVc2VyIiwiT3JkZXIiLCJqd3QiLCJhc3luY0hhbmRsZXIiLCJnZW5lcmF0ZUFjY2Vzc1Rva2VuIiwiZ2VuZXJhdGVSZWZyZXNoVG9rZW4iLCJhZGRVc2VyQnlBZG1pbiIsInJlcSIsInJlcyIsIk5hbWUiLCJQaG9uZSIsIlBhc3N3b3JkIiwiUm9sZSIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lcyIsIm5ld1VzZXIiLCJjcmVhdGUiLCJ1c2VyIiwibG9naW4iLCJmaW5kT25lIiwid2hlcmUiLCJpc0NvcnJlY3RQYXNzd29yZCIsInVzZXJEYXRhIiwidG9KU09OIiwiYWNjZXNzVG9rZW4iLCJpZCIsIm5ld1JlZnJlc2hUb2tlbiIsInVwZGF0ZSIsInJlZnJlc2hUb2tlbiIsImNvb2tpZSIsImh0dHBPbmx5IiwibWF4QWdlIiwibG9nb3V0IiwiY29va2llcyIsImZpbmRPbmVBbmRVcGRhdGUiLCIkdW5zZXQiLCJjbGVhckNvb2tpZSIsInNlY3VyZSIsImdldFVzZXJzIiwidWlkIiwicGFyYW1zIiwiRXJyb3IiLCJmaW5kQnlQayIsImF0dHJpYnV0ZXMiLCJleGNsdWRlIiwiZ2V0QWxsdXNlciIsInJlc3BvbnNlIiwiZmluZEFsbCIsImxlbmd0aCIsInVzZXJzIiwiZGVsZXRlVXNlciIsIm1lc3NhZ2UiLCJkZXN0cm95IiwiZXJyb3IiLCJjb25zb2xlIiwidXBkYXRlVXNlciIsInVwZGF0ZWRSb3dzQ291bnQiLCJ1cGRhdGVkVXNlcnMiLCJyZXR1cm5pbmciLCJ1cGRhdGVkVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFx4YW1wcFxcaHRkb2NzXFxTSE9QX05VT0NIT0FcXFNlcnZlclxcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsidXNlcl9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi4vTW9kZWxzJyk7XHJcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9Nb2RlbHMvdXNlcicpO1xyXG5jb25zdCBPcmRlciA9IHJlcXVpcmUoJy4uL01vZGVscy9vcmRlcicpXHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBhc3luY0hhbmRsZXIgPSByZXF1aXJlKCdleHByZXNzLWFzeW5jLWhhbmRsZXInKTtcclxuY29uc3QgeyBnZW5lcmF0ZUFjY2Vzc1Rva2VuLCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9qd3QnKTtcclxuXHJcbmNvbnN0IGFkZFVzZXJCeUFkbWluID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBOYW1lLCBQaG9uZSwgUGFzc3dvcmQsIFJvbGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghTmFtZSB8fCAhUGhvbmUgfHwgIVBhc3N3b3JkIHx8ICFSb2xlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJWdWkgbMOybmcgbmjhuq1wIMSR4bqneSDEkeG7pyB0aMO0bmcgdGluXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vZG9udCBjaGVjayB1c2Vyc1xyXG4gICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IGRiLlVzZXIuY3JlYXRlKHtcclxuICAgICAgICBOYW1lLFxyXG4gICAgICAgIFBob25lLFxyXG4gICAgICAgIFBhc3N3b3JkLFxyXG4gICAgICAgIFJvbGVcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXM6ICdUaMOqbSB0w6BpIGtob+G6o24gdGjDoG5oIGPDtG5nJyxcclxuICAgICAgICB1c2VyOiBuZXdVc2VyXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBsb2dpbiA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgUGhvbmUsIFBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIVBob25lIHx8ICFQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXM6IFwiVnVpIGzDsm5nIG5o4bqtcCDEkeG6p3kgxJHhu6cgdGjDtG5nIHRpblwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLlVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IFBob25lOiBQaG9uZSB9IH0pO1xyXG5cclxuICAgIGlmICh1c2VyICYmIGF3YWl0IHVzZXIuaXNDb3JyZWN0UGFzc3dvcmQoUGFzc3dvcmQpKSB7XHJcbiAgICAgICAgY29uc3QgeyBQYXNzd29yZCwgUm9sZSwgLi4udXNlckRhdGEgfSA9IHVzZXIudG9KU09OKCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhY2Nlc3MgdG9rZW5cclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGdlbmVyYXRlQWNjZXNzVG9rZW4odXNlci5pZCwgUm9sZSk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHJlZnJlc2ggdG9rZW5cclxuICAgICAgICBjb25zdCBuZXdSZWZyZXNoVG9rZW4gPSBnZW5lcmF0ZVJlZnJlc2hUb2tlbih1c2VyLmlkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTYXZlIHJlZnJlc2ggdG9rZW4gaW4gZGJcclxuICAgICAgICBhd2FpdCB1c2VyLnVwZGF0ZSh7IHJlZnJlc2hUb2tlbjogbmV3UmVmcmVzaFRva2VuIH0pO1xyXG5cclxuICAgICAgICAvLyBTYXZlIHJlZnJlc2ggdG9rZW4gaW4gY29va2llXHJcbiAgICAgICAgcmVzLmNvb2tpZSgncmVmcmVzaFRva2VuJywgbmV3UmVmcmVzaFRva2VuLCB7IGh0dHBPbmx5OiB0cnVlLCBtYXhBZ2U6IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwIH0pO1xyXG4gICAgICAgIC8vIFNhdmUgYWNjZXNzIHRva2VuIGluIGNvb2tpZVxyXG4gICAgICAgIHJlcy5jb29raWUoJ2FjY2Vzc1Rva2VuJywgYWNjZXNzVG9rZW4sIHsgaHR0cE9ubHk6IHRydWUsIG1heEFnZTogMzAgKiA2MCAqIDEwMDAgfSk7IC8vIDMwIHBow7p0XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICB1c2VyRGF0YVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzOiBcIlRow7RuZyB0aW4gxJHEg25nIG5o4bqtcCBraMO0bmcgY2jDrW5oIHjDoWNcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGxvZ291dCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGNvb2tpZSA9IHJlcS5jb29raWVzO1xyXG5cclxuICAgIGlmICghY29va2llIHx8ICFjb29raWUucmVmcmVzaFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogXCJLaMO0bmcgY8OzIHJlZnJlc2ggdG9rZW4gdHJvbmcgY29va2llc1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGIuVXNlci5maW5kT25lQW5kVXBkYXRlKHsgcmVmcmVzaFRva2VuOiBjb29raWUucmVmcmVzaFRva2VuIH0sIHsgJHVuc2V0OiB7IHJlZnJlc2hUb2tlbjogXCJcIiB9IH0pO1xyXG5cclxuICAgIHJlcy5jbGVhckNvb2tpZSgncmVmcmVzaFRva2VuJywge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNlY3VyZTogdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lczogJ8SQxINuZyB4deG6pXQgdGjDoG5oIGPDtG5nJ1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGdldFVzZXJzID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB1aWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCF1aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCLEkMOjIGPDsyBs4buXaSB44bqjeSByYSwgdnVpIGzDsm5nIHRo4butIGzhuqFpXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5Vc2VyLmZpbmRCeVBrKHVpZCwge1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWydQYXNzd29yZCcsICdyZWZyZXNoVG9rZW4nXSB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzOiBcIk5nxrDhu51pIGTDuW5nIGtow7RuZyDEkcaw4bujYyB0w6xtIHRo4bqleVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHVzZXI6IHVzZXJcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vbOG6pXkgdOG6pXQgY+G6oyBuZ8aw4budaSBkw7luZ1xyXG5jb25zdCBnZXRBbGx1c2VyPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRiLlVzZXIuZmluZEFsbCh7XHJcbiAgICAgICAgYXR0cmlidXRlczogeyBleGNsdWRlOiBbJ1Bhc3N3b3JkJywgJ1JvbGUnXSB9IC8vIExv4bqhaSBi4buPIHRyxrDhu51uZyAnUGFzc3dvcmQnXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgdXNlcnM6IHJlc3BvbnNlXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVVc2VyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB1aWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCF1aWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJUaGnhur91IHRow7RuZyB0aW4gbmfGsOG7nWkgZMO5bmcgY+G6p24geG/DoVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBLaeG7g20gdHJhIG5nxrDhu51pIGTDuW5nIGPDsyB04buTbiB04bqhaSBraMO0bmdcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuVXNlci5maW5kQnlQayh1aWQpO1xyXG4gICAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5nxrDhu51pIGTDuW5nIGtow7RuZyB04buTbiB04bqhaVwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gWG/DoSBuZ8aw4budaSBkw7luZ1xyXG4gICAgICAgIGF3YWl0IGRiLlVzZXIuZGVzdHJveSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiB1aWQgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBgTmfGsOG7nWkgZMO5bmcgduG7m2kgSUQgJHt1aWR9IMSRw6MgxJHGsOG7o2MgeG/DoWBcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgLy8gWOG7rSBsw70gbOG7l2lcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiTOG7l2kga2hpIHhvw6EgbmfGsOG7nWkgZMO5bmc6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIsSQw6MgY8OzIGzhu5dpIHjhuqN5IHJhLCB2dWkgbMOybmcgdGjhu60gbOG6oWlcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIXVpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoaeG6v3UgdGjDtG5nIHRpbiBuZ8aw4budaSBkw7luZyBj4bqnbiBj4bqtcCBuaOG6rXRcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgW3VwZGF0ZWRSb3dzQ291bnQsIHVwZGF0ZWRVc2Vyc10gPSBhd2FpdCBkYi5Vc2VyLnVwZGF0ZShyZXEuYm9keSwge1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogdWlkIH0sXHJcbiAgICAgICAgICAgIHJldHVybmluZzogdHJ1ZSAvLyBUcuG6oyB24buBIGPDoWMgYuG6o24gZ2hpIMSRw6MgxJHGsOG7o2MgY+G6rXAgbmjhuq10XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVkUm93c0NvdW50ID09PSAwIHx8ICF1cGRhdGVkVXNlcnMgfHwgdXBkYXRlZFVzZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5nxrDhu51pIGTDuW5nIGtow7RuZyDEkcaw4bujYyB0w6xtIHRo4bqleSBob+G6t2Mga2jDtG5nIHRo4buDIGPhuq1wIG5o4bqtdFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSB1cGRhdGVkVXNlcnNbMF0udG9KU09OKCk7IC8vIENodXnhu4NuIMSR4buVaSB0aMOgbmggxJHhu5FpIHTGsOG7o25nIEpTT05cclxuXHJcbiAgICAgICAgLy8gTG/huqFpIGLhu48gY8OhYyB0csaw4budbmcgbmjhuqF5IGPhuqNtIHThu6sgcGjhuqNuIGjhu5NpXHJcbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRVc2VyLlBhc3N3b3JkO1xyXG4gICAgICAgIGRlbGV0ZSB1cGRhdGVkVXNlci5yZWZyZXNoVG9rZW47XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ+G6rXAgbmjhuq10IHRow6BuaCBjw7RuZ1wiLFxyXG4gICAgICAgICAgICB1c2VyOiB1cGRhdGVkVXNlclxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiTOG7l2kga2hpIGPhuq1wIG5o4bqtdCBuZ8aw4budaSBkw7luZzpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwixJDDoyBjw7MgbOG7l2kgeOG6o3kgcmEsIHZ1aSBsw7JuZyB0aOG7rSBs4bqhaVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGFkZFVzZXJCeUFkbWluLFxyXG4gICAgbG9naW4sXHJcbiAgICBsb2dvdXQsXHJcbiAgICBnZXRBbGx1c2VyLFxyXG4gICAgZ2V0VXNlcnMsXHJcbiAgICBkZWxldGVVc2VyLFxyXG4gICAgdXBkYXRlVXNlcixcclxufSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQy9CLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RDLE1BQU1FLEtBQUssR0FBR0YsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3hDLE1BQU1HLEdBQUcsR0FBR0gsT0FBTyxDQUFDLGNBQWMsQ0FBQztB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","map":{"version":3,"names":["db","require","User","Order","jwt","asyncHandler","generateAccessToken","generateRefreshToken","addUserByAdmin","req","res","Name","Phone","Password","Role","body","status","json","success","mes","newUser","create","user","login","findOne","where","isCorrectPassword","userData","toJSON","accessToken","id","newRefreshToken","update","refreshToken","cookie","httpOnly","maxAge","logout","cookies","findOneAndUpdate","$unset","clearCookie","secure","getUsers","uid","params","Error","findByPk","attributes","exclude","getAlluser","response","findAll","length","users","deleteUser","message","destroy","error","console","updateUser","updatedRowsCount","updatedUsers","returning","updatedUser","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["user_controller.js"],"sourcesContent":["const db = require('../Models');\r\nconst User = require('../Models/user');\r\nconst Order = require('../Models/order')\r\nconst jwt = require('jsonwebtoken');\r\nconst asyncHandler = require('express-async-handler');\r\nconst { generateAccessToken, generateRefreshToken } = require('../middleware/jwt');\r\n\r\nconst addUserByAdmin = asyncHandler(async (req, res) => {\r\n    const { Name, Phone, Password, Role } = req.body;\r\n\r\n    if (!Name || !Phone || !Password || !Role) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n    //dont check users\r\n    const newUser = await db.User.create({\r\n        Name,\r\n        Phone,\r\n        Password,\r\n        Role\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        mes: 'Thêm tài khoản thành công',\r\n        user: newUser\r\n    });\r\n});\r\n\r\nconst login = asyncHandler(async (req, res) => {\r\n    const { Phone, Password } = req.body;\r\n\r\n    if (!Phone || !Password) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            mes: \"Vui lòng nhập đầy đủ thông tin\"\r\n        });\r\n    }\r\n\r\n    const user = await db.User.findOne({ where: { Phone: Phone } });\r\n\r\n    if (user && await user.isCorrectPassword(Password)) {\r\n        const { Password, Role, ...userData } = user.toJSON();\r\n\r\n        // Create access token\r\n        const accessToken = generateAccessToken(user.id, Role);\r\n        // Create refresh token\r\n        const newRefreshToken = generateRefreshToken(user.id);\r\n        \r\n        // Save refresh token in db\r\n        await user.update({ refreshToken: newRefreshToken });\r\n\r\n        // Save refresh token in cookie\r\n        res.cookie('refreshToken', newRefreshToken, { httpOnly: true, maxAge: 7 * 24 * 60 * 60 * 1000 });\r\n        // Save access token in cookie\r\n        res.cookie('accessToken', accessToken, { httpOnly: true, maxAge: 30 * 60 * 1000 }); // 30 phút\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            accessToken,\r\n            userData\r\n        });\r\n    } else {\r\n        return res.status(401).json({\r\n            success: false,\r\n            mes: \"Thông tin đăng nhập không chính xác\"\r\n        });\r\n    }\r\n});\r\n\r\nconst logout = asyncHandler(async (req, res) => {\r\n    const cookie = req.cookies;\r\n\r\n    if (!cookie || !cookie.refreshToken) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            mes: \"Không có refresh token trong cookies\"\r\n        });\r\n    }\r\n\r\n    await db.User.findOneAndUpdate({ refreshToken: cookie.refreshToken }, { $unset: { refreshToken: \"\" } });\r\n\r\n    res.clearCookie('refreshToken', {\r\n        httpOnly: true,\r\n        secure: true\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        mes: 'Đăng xuất thành công'\r\n    });\r\n});\r\n\r\n\r\nconst getUsers = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        throw new Error(\"Đã có lỗi xảy ra, vui lòng thử lại\");\r\n    }\r\n\r\n    const user = await db.User.findByPk(uid, {\r\n        attributes: { exclude: ['Password', 'refreshToken'] }\r\n    });\r\n\r\n    if (!user) {\r\n        return res.status(404).json({\r\n            success: false,\r\n            mes: \"Người dùng không được tìm thấy\"\r\n        });\r\n    }\r\n\r\n    return res.status(200).json({\r\n        success: true,\r\n        user: user\r\n    });\r\n});\r\n\r\n//lấy tất cả người dùng\r\nconst getAlluser= asyncHandler(async (req, res) => {\r\n    const response = await db.User.findAll({\r\n        attributes: { exclude: ['Password', 'Role'] } // Loại bỏ trường 'Password'\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: response.length > 0,\r\n        users: response\r\n    });\r\n});\r\n\r\nconst deleteUser = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Thiếu thông tin người dùng cần xoá\"\r\n        });\r\n    }\r\n\r\n    try {\r\n        // Kiểm tra người dùng có tồn tại không\r\n        const user = await db.User.findByPk(uid);\r\n        if (!user) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                message: \"Người dùng không tồn tại\"\r\n            });\r\n        }\r\n\r\n        // Xoá người dùng\r\n        await db.User.destroy({\r\n            where: { id: uid }\r\n        });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Người dùng với ID ${uid} đã được xoá`\r\n        });\r\n    } catch (error) {\r\n        // Xử lý lỗi\r\n        console.error(\"Lỗi khi xoá người dùng:\", error.message);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n        });\r\n    }\r\n});\r\n\r\nconst updateUser = asyncHandler(async (req, res) => {\r\n    const { uid } = req.params;\r\n\r\n    if (!uid) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: \"Thiếu thông tin người dùng cần cập nhật\"\r\n        });\r\n    }\r\n\r\n    try {\r\n        const [updatedRowsCount, updatedUsers] = await db.User.update(req.body, {\r\n            where: { id: uid },\r\n            returning: true // Trả về các bản ghi đã được cập nhật\r\n        });\r\n\r\n        if (updatedRowsCount === 0 || !updatedUsers || updatedUsers.length === 0) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                message: \"Người dùng không được tìm thấy hoặc không thể cập nhật\"\r\n            });\r\n        }\r\n\r\n        const updatedUser = updatedUsers[0].toJSON(); // Chuyển đổi thành đối tượng JSON\r\n\r\n        // Loại bỏ các trường nhạy cảm từ phản hồi\r\n        delete updatedUser.Password;\r\n        delete updatedUser.refreshToken;\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: \"Cập nhật thành công\",\r\n            user: updatedUser\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Lỗi khi cập nhật người dùng:\", error.message);\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n        });\r\n    }\r\n});\r\n\r\n\r\n\r\nmodule.exports = {\r\n    addUserByAdmin,\r\n    login,\r\n    logout,\r\n    getAlluser,\r\n    getUsers,\r\n    deleteUser,\r\n    updateUser,\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718449087464},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\middleware\\\\jwt.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const jwt = require('jsonwebtoken');\nrequire('dotenv').config(); // Load environment variables\n\nconst generateAccessToken = (uid, role) => {\n  console.log('Secret Key:', process.env.SECRET_KEY); // Log khóa bí mật\n  const currentTime = Math.floor(Date.now() / 1000);\n  const expirationTime = currentTime + 5 * 60; // 5 phút\n\n  const token = jwt.sign({\n    _id: uid,\n    role: role,\n    exp: expirationTime\n  }, process.env.SECRET_KEY);\n  return token;\n};\nconst generateRefreshToken = uid => {\n  return jwt.sign({\n    _id: uid\n  }, process.env.SECRET_KEY, {\n    expiresIn: '7d'\n  });\n};\nmodule.exports = {\n  generateAccessToken,\n  generateRefreshToken\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiZ2VuZXJhdGVBY2Nlc3NUb2tlbiIsInVpZCIsInJvbGUiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVF9LRVkiLCJjdXJyZW50VGltZSIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJleHBpcmF0aW9uVGltZSIsInRva2VuIiwic2lnbiIsIl9pZCIsImV4cCIsImdlbmVyYXRlUmVmcmVzaFRva2VuIiwiZXhwaXJlc0luIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxtaWRkbGV3YXJlXFwiLCJzb3VyY2VzIjpbImp3dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcclxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7IC8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcblxyXG5jb25zdCBnZW5lcmF0ZUFjY2Vzc1Rva2VuID0gKHVpZCwgcm9sZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ1NlY3JldCBLZXk6JywgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSk7IC8vIExvZyBraMOzYSBiw60gbeG6rXRcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XHJcbiAgICBjb25zdCBleHBpcmF0aW9uVGltZSA9IGN1cnJlbnRUaW1lICsgKDUgKiA2MCk7IC8vIDUgcGjDunRcclxuICAgIFxyXG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7XHJcbiAgICAgICAgX2lkOiB1aWQsXHJcbiAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICBleHA6IGV4cGlyYXRpb25UaW1lXHJcbiAgICB9LCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZKTtcclxuXHJcbiAgICByZXR1cm4gdG9rZW47XHJcbn1cclxuXHJcblxyXG5jb25zdCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiA9ICh1aWQpID0+IHtcclxuICAgIHJldHVybiBqd3Quc2lnbih7XHJcbiAgICAgICAgX2lkOiB1aWQsXHJcbiAgICB9LCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZLCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiAnN2QnXHJcbiAgICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBnZW5lcmF0ZUFjY2Vzc1Rva2VuLFxyXG4gICAgZ2VuZXJhdGVSZWZyZXNoVG9rZW5cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQ0EsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTVCLE1BQU1DLG1CQUFtQixHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2Q0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUMsQ0FBQztFQUNwRCxNQUFNQyxXQUFXLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0VBQ2pELE1BQU1DLGNBQWMsR0FBR0wsV0FBVyxHQUFJLENBQUMsR0FBRyxFQUFHLENBQUMsQ0FBQzs7RUFFL0MsTUFBTU0sS0FBSyxHQUFHakIsR0FBRyxDQUFDa0IsSUFBSSxDQUFDO0lBQ25CQyxHQUFHLEVBQUVmLEdBQUc7SUFDUkMsSUFBSSxFQUFFQSxJQUFJO0lBQ1ZlLEdBQUcsRUFBRUo7RUFDVCxDQUFDLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLENBQUM7RUFFMUIsT0FBT08sS0FBSztBQUNoQixDQUFDO0FBR0QsTUFBTUksb0JBQW9CLEdBQUlqQixHQUFHLElBQUs7RUFDbEMsT0FBT0osR0FBRyxDQUFDa0IsSUFBSSxDQUFDO0lBQ1pDLEdBQUcsRUFBRWY7RUFDVCxDQUFDLEVBQUVJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQUU7SUFDdkJZLFNBQVMsRUFBRTtFQUNmLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYnJCLG1CQUFtQjtFQUNuQmtCO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["jwt","require","config","generateAccessToken","uid","role","console","log","process","env","SECRET_KEY","currentTime","Math","floor","Date","now","expirationTime","token","sign","_id","exp","generateRefreshToken","expiresIn","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\middleware\\","sources":["jwt.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\nrequire('dotenv').config(); // Load environment variables\r\n\r\nconst generateAccessToken = (uid, role) => {\r\n    console.log('Secret Key:', process.env.SECRET_KEY); // Log khóa bí mật\r\n    const currentTime = Math.floor(Date.now() / 1000);\r\n    const expirationTime = currentTime + (5 * 60); // 5 phút\r\n    \r\n    const token = jwt.sign({\r\n        _id: uid,\r\n        role: role,\r\n        exp: expirationTime\r\n    }, process.env.SECRET_KEY);\r\n\r\n    return token;\r\n}\r\n\r\n\r\nconst generateRefreshToken = (uid) => {\r\n    return jwt.sign({\r\n        _id: uid,\r\n    }, process.env.SECRET_KEY, {\r\n        expiresIn: '7d'\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n    generateAccessToken,\r\n    generateRefreshToken\r\n}\r\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;;AAE5B,MAAMC,mBAAmB,GAAGA,CAACC,GAAG,EAAEC,IAAI,KAAK;EACvCC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;EACpD,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;EACjD,MAAMC,cAAc,GAAGL,WAAW,GAAI,CAAC,GAAG,EAAG,CAAC,CAAC;;EAE/C,MAAMM,KAAK,GAAGjB,GAAG,CAACkB,IAAI,CAAC;IACnBC,GAAG,EAAEf,GAAG;IACRC,IAAI,EAAEA,IAAI;IACVe,GAAG,EAAEJ;EACT,CAAC,EAAER,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;EAE1B,OAAOO,KAAK;AAChB,CAAC;AAGD,MAAMI,oBAAoB,GAAIjB,GAAG,IAAK;EAClC,OAAOJ,GAAG,CAACkB,IAAI,CAAC;IACZC,GAAG,EAAEf;EACT,CAAC,EAAEI,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;IACvBY,SAAS,EAAE;EACf,CAAC,CAAC;AACN,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EACbrB,mBAAmB;EACnBkB;AACJ,CAAC","ignoreList":[]}},"mtime":1718445986391},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\Routes\\\\voucher_routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const express = require('express');\nconst {\n  createNewVoucher,\n  getAllVouchers,\n  getVoucher,\n  updateVoucher,\n  deleteVoucher\n} = require('../controllers/voucher_controller');\nconst router = express.Router();\nrouter.post('/createNewVoucher', createNewVoucher); //ok\nrouter.get('/getAllVouchers', getAllVouchers); //ok\nrouter.get('/getVoucher/:vpid', getVoucher); //ok\nrouter.put('/updateVoucher/:vpid', updateVoucher);\nrouter.delete('/deleteVoucher/:vpid', deleteVoucher); //ok\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZU5ld1ZvdWNoZXIiLCJnZXRBbGxWb3VjaGVycyIsImdldFZvdWNoZXIiLCJ1cGRhdGVWb3VjaGVyIiwiZGVsZXRlVm91Y2hlciIsInJvdXRlciIsIlJvdXRlciIsInBvc3QiLCJnZXQiLCJwdXQiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxceGFtcHBcXGh0ZG9jc1xcU0hPUF9OVU9DSE9BXFxTZXJ2ZXJcXFJvdXRlc1xcIiwic291cmNlcyI6WyJ2b3VjaGVyX3JvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCB7IGNyZWF0ZU5ld1ZvdWNoZXIsIGdldEFsbFZvdWNoZXJzLCBnZXRWb3VjaGVyLCB1cGRhdGVWb3VjaGVyLCBkZWxldGVWb3VjaGVyIH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy92b3VjaGVyX2NvbnRyb2xsZXInKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvY3JlYXRlTmV3Vm91Y2hlcicsY3JlYXRlTmV3Vm91Y2hlcik7Ly9va1xyXG5yb3V0ZXIuZ2V0KCcvZ2V0QWxsVm91Y2hlcnMnLGdldEFsbFZvdWNoZXJzKTsvL29rXHJcbnJvdXRlci5nZXQoJy9nZXRWb3VjaGVyLzp2cGlkJyxnZXRWb3VjaGVyKTsvL29rXHJcbnJvdXRlci5wdXQoJy91cGRhdGVWb3VjaGVyLzp2cGlkJyx1cGRhdGVWb3VjaGVyKTtcclxucm91dGVyLmRlbGV0ZSgnL2RlbGV0ZVZvdWNoZXIvOnZwaWQnLGRlbGV0ZVZvdWNoZXIpOy8vb2tcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsZ0JBQWdCO0VBQUVDLGNBQWM7RUFBRUMsVUFBVTtFQUFFQyxhQUFhO0VBQUVDO0FBQWMsQ0FBQyxHQUFHTCxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDbkksTUFBTU0sTUFBTSxHQUFHUCxPQUFPLENBQUNRLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxtQkFBbUIsRUFBQ1AsZ0JBQWdCLENBQUMsQ0FBQztBQUNsREssTUFBTSxDQUFDRyxHQUFHLENBQUMsaUJBQWlCLEVBQUNQLGNBQWMsQ0FBQyxDQUFDO0FBQzdDSSxNQUFNLENBQUNHLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQ04sVUFBVSxDQUFDLENBQUM7QUFDM0NHLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHNCQUFzQixFQUFDTixhQUFhLENBQUM7QUFDaERFLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLHNCQUFzQixFQUFDTixhQUFhLENBQUMsQ0FBQzs7QUFFcERPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","createNewVoucher","getAllVouchers","getVoucher","updateVoucher","deleteVoucher","router","Router","post","get","put","delete","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\Routes\\","sources":["voucher_routes.js"],"sourcesContent":["const express = require('express');\r\nconst { createNewVoucher, getAllVouchers, getVoucher, updateVoucher, deleteVoucher } = require('../controllers/voucher_controller');\r\nconst router = express.Router();\r\n\r\nrouter.post('/createNewVoucher',createNewVoucher);//ok\r\nrouter.get('/getAllVouchers',getAllVouchers);//ok\r\nrouter.get('/getVoucher/:vpid',getVoucher);//ok\r\nrouter.put('/updateVoucher/:vpid',updateVoucher);\r\nrouter.delete('/deleteVoucher/:vpid',deleteVoucher);//ok\r\n\r\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,gBAAgB;EAAEC,cAAc;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,mCAAmC,CAAC;AACnI,MAAMM,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,mBAAmB,EAACP,gBAAgB,CAAC,CAAC;AAClDK,MAAM,CAACG,GAAG,CAAC,iBAAiB,EAACP,cAAc,CAAC,CAAC;AAC7CI,MAAM,CAACG,GAAG,CAAC,mBAAmB,EAACN,UAAU,CAAC,CAAC;AAC3CG,MAAM,CAACI,GAAG,CAAC,sBAAsB,EAACN,aAAa,CAAC;AAChDE,MAAM,CAACK,MAAM,CAAC,sBAAsB,EAACN,aAAa,CAAC,CAAC;;AAEpDO,MAAM,CAACC,OAAO,GAAGP,MAAM","ignoreList":[]}},"mtime":1718465382635},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"filename\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\\\\controllers\\\\voucher_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\xampp\\\\htdocs\\\\SHOP_NUOCHOA\\\\Server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.7:development":{"value":{"code":"const db = require('../Models');\nconst Voucher = require('../Models/voucher');\nconst asyncHandler = require('express-async-handler');\nconst createNewVoucher = asyncHandler(async (req, res) => {\n  const {\n    Name,\n    Describes,\n    Percent,\n    Mincost,\n    Maxcost,\n    EXDate\n  } = req.body;\n  if (!Name || !Describes || !Percent || !Mincost || !Maxcost || !EXDate) {\n    return res.status(400).json({\n      success: false,\n      message: 'Vui lòng nhập đầy đủ thông tin'\n    });\n  }\n  try {\n    const response = await db.Voucher.create({\n      Name: Name,\n      Describes: Describes,\n      Percent: Percent,\n      Mincost: Mincost,\n      Maxcost: Maxcost,\n      EXDate: new Date(Date.now() + EXDate * 24 * 60 * 60 * 1000)\n    });\n    return res.status(200).json({\n      success: true,\n      newVoucher: response\n    });\n  } catch (error) {\n    return res.status(500).json({\n      success: false,\n      message: error.message\n    });\n  }\n});\nconst getAllVouchers = asyncHandler(async (req, res) => {\n  const response = await db.Voucher.findAll({\n    attributes: {\n      exclude: ['updatedAt']\n    }\n  });\n  return res.status(200).json({\n    success: response ? true : false,\n    listVoucher: response ? response : \"Đã có lỗi xảy ra, vui lòng thử lại\"\n  });\n});\nconst getVoucher = asyncHandler(async (req, res) => {\n  const {\n    vpid\n  } = req.params;\n  const response = await db.Voucher.findByPk(vpid);\n  return res.status(200).json({\n    success: response ? true : false,\n    voucher: response ? response : \"Đã có lỗi xảy ra, vui lòng thử lại\"\n  });\n});\nconst updateVoucher = asyncHandler(async (req, res) => {\n  const {\n    vpid\n  } = req.params;\n  if (Object.keys(req.body).length === 0) {\n    throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\n  }\n  if (req.body.EXDate) {\n    const {\n      EXDate\n    } = req.body;\n    req.body.EXDate = new Date(Date.now() + +EXDate * 24 * 60 * 60 * 1000);\n  }\n  const response = await db.Voucher.update(req.body, {\n    where: {\n      VoucherID: vpid\n    },\n    returning: true,\n    plain: true\n  });\n  return res.status(200).json({\n    success: response ? true : false,\n    updatedVoucher: response ? response[1] : \"Đã có lỗi xảy ra, vui lòng thử lại\"\n  });\n});\nconst deleteVoucher = asyncHandler(async (req, res) => {\n  const {\n    vpid\n  } = req.params;\n  const response = await db.Voucher.destroy({\n    where: {\n      VoucherID: vpid\n    }\n  });\n  return res.status(200).json({\n    success: response ? true : false,\n    deleteVoucher: response ? `Đã xoá mã voucher với ID ${vpid}` : \"Đã có lỗi xảy ra, vui lòng thử lại\"\n  });\n});\nmodule.exports = {\n  createNewVoucher,\n  getAllVouchers,\n  getVoucher,\n  updateVoucher,\n  deleteVoucher\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJWb3VjaGVyIiwiYXN5bmNIYW5kbGVyIiwiY3JlYXRlTmV3Vm91Y2hlciIsInJlcSIsInJlcyIsIk5hbWUiLCJEZXNjcmliZXMiLCJQZXJjZW50IiwiTWluY29zdCIsIk1heGNvc3QiLCJFWERhdGUiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwicmVzcG9uc2UiLCJjcmVhdGUiLCJEYXRlIiwibm93IiwibmV3Vm91Y2hlciIsImVycm9yIiwiZ2V0QWxsVm91Y2hlcnMiLCJmaW5kQWxsIiwiYXR0cmlidXRlcyIsImV4Y2x1ZGUiLCJsaXN0Vm91Y2hlciIsImdldFZvdWNoZXIiLCJ2cGlkIiwicGFyYW1zIiwiZmluZEJ5UGsiLCJ2b3VjaGVyIiwidXBkYXRlVm91Y2hlciIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJFcnJvciIsInVwZGF0ZSIsIndoZXJlIiwiVm91Y2hlcklEIiwicmV0dXJuaW5nIiwicGxhaW4iLCJ1cGRhdGVkVm91Y2hlciIsImRlbGV0ZVZvdWNoZXIiLCJkZXN0cm95IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXHhhbXBwXFxodGRvY3NcXFNIT1BfTlVPQ0hPQVxcU2VydmVyXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ2b3VjaGVyX2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGIgPSByZXF1aXJlKCcuLi9Nb2RlbHMnKTtcclxuY29uc3QgVm91Y2hlciA9IHJlcXVpcmUoJy4uL01vZGVscy92b3VjaGVyJyk7XHJcbmNvbnN0IGFzeW5jSGFuZGxlciA9IHJlcXVpcmUoJ2V4cHJlc3MtYXN5bmMtaGFuZGxlcicpO1xyXG5cclxuY29uc3QgY3JlYXRlTmV3Vm91Y2hlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgTmFtZSwgRGVzY3JpYmVzLCBQZXJjZW50LCBNaW5jb3N0LCBNYXhjb3N0LCBFWERhdGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghTmFtZSB8fCAhRGVzY3JpYmVzIHx8ICFQZXJjZW50IHx8ICFNaW5jb3N0IHx8ICFNYXhjb3N0IHx8ICFFWERhdGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1Z1aSBsw7JuZyBuaOG6rXAgxJHhuqd5IMSR4bunIHRow7RuZyB0aW4nXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRiLlZvdWNoZXIuY3JlYXRlKHtcclxuICAgICAgICAgICAgTmFtZTogTmFtZSxcclxuICAgICAgICAgICAgRGVzY3JpYmVzOiBEZXNjcmliZXMsXHJcbiAgICAgICAgICAgIFBlcmNlbnQ6IFBlcmNlbnQsXHJcbiAgICAgICAgICAgIE1pbmNvc3Q6IE1pbmNvc3QsXHJcbiAgICAgICAgICAgIE1heGNvc3Q6IE1heGNvc3QsXHJcbiAgICAgICAgICAgIEVYRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIEVYRGF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIG5ld1ZvdWNoZXI6IHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0QWxsVm91Y2hlcnMgPSBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRiLlZvdWNoZXIuZmluZEFsbCh7IGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWyd1cGRhdGVkQXQnXSB9IH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogcmVzcG9uc2UgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgbGlzdFZvdWNoZXI6IHJlc3BvbnNlID8gcmVzcG9uc2UgOiBcIsSQw6MgY8OzIGzhu5dpIHjhuqN5IHJhLCB2dWkgbMOybmcgdGjhu60gbOG6oWlcIlxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0Vm91Y2hlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdnBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRiLlZvdWNoZXIuZmluZEJ5UGsodnBpZCk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgIHZvdWNoZXI6IHJlc3BvbnNlID8gcmVzcG9uc2UgOiBcIsSQw6MgY8OzIGzhu5dpIHjhuqN5IHJhLCB2dWkgbMOybmcgdGjhu60gbOG6oWlcIlxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlVm91Y2hlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdnBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoT2JqZWN0LmtleXMocmVxLmJvZHkpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZ1aSBsw7JuZyBuaOG6rXAgxJHhuqd5IMSR4bunIHRow7RuZyB0aW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlcS5ib2R5LkVYRGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgRVhEYXRlIH0gPSByZXEuYm9keTtcclxuICAgICAgICByZXEuYm9keS5FWERhdGUgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgK0VYRGF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGIuVm91Y2hlci51cGRhdGUocmVxLmJvZHksIHtcclxuICAgICAgICB3aGVyZTogeyBWb3VjaGVySUQ6IHZwaWQgfSxcclxuICAgICAgICByZXR1cm5pbmc6IHRydWUsXHJcbiAgICAgICAgcGxhaW46IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogcmVzcG9uc2UgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgdXBkYXRlZFZvdWNoZXI6IHJlc3BvbnNlID8gcmVzcG9uc2VbMV0gOiBcIsSQw6MgY8OzIGzhu5dpIHjhuqN5IHJhLCB2dWkgbMOybmcgdGjhu60gbOG6oWlcIlxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlVm91Y2hlciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdnBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRiLlZvdWNoZXIuZGVzdHJveSh7XHJcbiAgICAgICAgd2hlcmU6IHsgVm91Y2hlcklEOiB2cGlkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogcmVzcG9uc2UgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgZGVsZXRlVm91Y2hlcjogcmVzcG9uc2UgPyBgxJDDoyB4b8OhIG3DoyB2b3VjaGVyIHbhu5tpIElEICR7dnBpZH1gIDogXCLEkMOjIGPDsyBs4buXaSB44bqjeSByYSwgdnVpIGzDsm5nIHRo4butIGzhuqFpXCJcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlTmV3Vm91Y2hlcixcclxuICAgIGdldEFsbFZvdWNoZXJzLFxyXG4gICAgZ2V0Vm91Y2hlcixcclxuICAgIHVwZGF0ZVZvdWNoZXIsXHJcbiAgICBkZWxldGVWb3VjaGVyXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQy9CLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU1FLFlBQVksR0FBR0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRXJELE1BQU1HLGdCQUFnQixHQUFHRCxZQUFZLENBQUMsT0FBT0UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEQsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLFNBQVM7SUFBRUMsT0FBTztJQUFFQyxPQUFPO0lBQUVDLE9BQU87SUFBRUM7RUFBTyxDQUFDLEdBQUdQLEdBQUcsQ0FBQ1EsSUFBSTtFQUV2RSxJQUFJLENBQUNOLElBQUksSUFBSSxDQUFDQyxTQUFTLElBQUksQ0FBQ0MsT0FBTyxJQUFJLENBQUNDLE9BQU8sSUFBSSxDQUFDQyxPQUFPLElBQUksQ0FBQ0MsTUFBTSxFQUFFO0lBQ3BFLE9BQU9OLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLE9BQU8sRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNOO0VBRUEsSUFBSTtJQUNBLE1BQU1DLFFBQVEsR0FBRyxNQUFNbEIsRUFBRSxDQUFDRSxPQUFPLENBQUNpQixNQUFNLENBQUM7TUFDckNaLElBQUksRUFBRUEsSUFBSTtN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","map":{"version":3,"names":["db","require","Voucher","asyncHandler","createNewVoucher","req","res","Name","Describes","Percent","Mincost","Maxcost","EXDate","body","status","json","success","message","response","create","Date","now","newVoucher","error","getAllVouchers","findAll","attributes","exclude","listVoucher","getVoucher","vpid","params","findByPk","voucher","updateVoucher","Object","keys","length","Error","update","where","VoucherID","returning","plain","updatedVoucher","deleteVoucher","destroy","module","exports"],"sourceRoot":"C:\\xampp\\htdocs\\SHOP_NUOCHOA\\Server\\controllers\\","sources":["voucher_controller.js"],"sourcesContent":["const db = require('../Models');\r\nconst Voucher = require('../Models/voucher');\r\nconst asyncHandler = require('express-async-handler');\r\n\r\nconst createNewVoucher = asyncHandler(async (req, res) => {\r\n    const { Name, Describes, Percent, Mincost, Maxcost, EXDate } = req.body;\r\n\r\n    if (!Name || !Describes || !Percent || !Mincost || !Maxcost || !EXDate) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: 'Vui lòng nhập đầy đủ thông tin'\r\n        });\r\n    }\r\n\r\n    try {\r\n        const response = await db.Voucher.create({\r\n            Name: Name,\r\n            Describes: Describes,\r\n            Percent: Percent,\r\n            Mincost: Mincost,\r\n            Maxcost: Maxcost,\r\n            EXDate: new Date(Date.now() + EXDate * 24 * 60 * 60 * 1000)\r\n        });\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            newVoucher: response\r\n        });\r\n    } catch (error) {\r\n        return res.status(500).json({\r\n            success: false,\r\n            message: error.message\r\n        });\r\n    }\r\n});\r\n\r\nconst getAllVouchers = asyncHandler(async (req, res) => {\r\n    const response = await db.Voucher.findAll({ attributes: { exclude: ['updatedAt'] } });\r\n\r\n    return res.status(200).json({\r\n        success: response ? true : false,\r\n        listVoucher: response ? response : \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n    });\r\n});\r\n\r\nconst getVoucher = asyncHandler(async (req, res) => {\r\n    const { vpid } = req.params;\r\n\r\n    const response = await db.Voucher.findByPk(vpid);\r\n    return res.status(200).json({\r\n        success: response ? true : false,\r\n        voucher: response ? response : \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n    });\r\n});\r\n\r\nconst updateVoucher = asyncHandler(async (req, res) => {\r\n    const { vpid } = req.params;\r\n\r\n    if (Object.keys(req.body).length === 0) {\r\n        throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\r\n    }\r\n\r\n    if (req.body.EXDate) {\r\n        const { EXDate } = req.body;\r\n        req.body.EXDate = new Date(Date.now() + +EXDate * 24 * 60 * 60 * 1000);\r\n    }\r\n\r\n    const response = await db.Voucher.update(req.body, {\r\n        where: { VoucherID: vpid },\r\n        returning: true,\r\n        plain: true\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: response ? true : false,\r\n        updatedVoucher: response ? response[1] : \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n    });\r\n});\r\n\r\nconst deleteVoucher = asyncHandler(async (req, res) => {\r\n    const { vpid } = req.params;\r\n\r\n    const response = await db.Voucher.destroy({\r\n        where: { VoucherID: vpid }\r\n    });\r\n\r\n    return res.status(200).json({\r\n        success: response ? true : false,\r\n        deleteVoucher: response ? `Đã xoá mã voucher với ID ${vpid}` : \"Đã có lỗi xảy ra, vui lòng thử lại\"\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    createNewVoucher,\r\n    getAllVouchers,\r\n    getVoucher,\r\n    updateVoucher,\r\n    deleteVoucher\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1718498071397}}